{"version":3,"file":"lg-plugin-10.js","mappings":"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","sources":["webpack://sakurairo-scripts/./node_modules/lightgallery/plugins/video/lg-video.es5.js"],"sourcesContent":["/*!\n * lightgallery | 2.2.1 | September 4th 2021\n * http://www.lightgalleryjs.com/\n * Copyright (c) 2020 Sachin Neravath;\n * @license GPLv3\n */\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar videoSettings = {\r\n    autoplayFirstVideo: true,\r\n    youTubePlayerParams: false,\r\n    vimeoPlayerParams: false,\r\n    wistiaPlayerParams: false,\r\n    gotoNextSlideOnVideoEnd: true,\r\n    autoplayVideoOnSlide: false,\r\n    videojs: false,\r\n    videojsOptions: {},\r\n};\n\n/**\r\n * List of lightGallery events\r\n * All events should be documented here\r\n * Below interfaces are used to build the website documentations\r\n * */\r\nvar lGEvents = {\r\n    afterAppendSlide: 'lgAfterAppendSlide',\r\n    init: 'lgInit',\r\n    hasVideo: 'lgHasVideo',\r\n    containerResize: 'lgContainerResize',\r\n    updateSlides: 'lgUpdateSlides',\r\n    afterAppendSubHtml: 'lgAfterAppendSubHtml',\r\n    beforeOpen: 'lgBeforeOpen',\r\n    afterOpen: 'lgAfterOpen',\r\n    slideItemLoad: 'lgSlideItemLoad',\r\n    beforeSlide: 'lgBeforeSlide',\r\n    afterSlide: 'lgAfterSlide',\r\n    posterClick: 'lgPosterClick',\r\n    dragStart: 'lgDragStart',\r\n    dragMove: 'lgDragMove',\r\n    dragEnd: 'lgDragEnd',\r\n    beforeNextSlide: 'lgBeforeNextSlide',\r\n    beforePrevSlide: 'lgBeforePrevSlide',\r\n    beforeClose: 'lgBeforeClose',\r\n    afterClose: 'lgAfterClose',\r\n    rotateLeft: 'lgRotateLeft',\r\n    rotateRight: 'lgRotateRight',\r\n    flipHorizontal: 'lgFlipHorizontal',\r\n    flipVertical: 'lgFlipVertical',\r\n};\n\n/**\r\n * Video module for lightGallery\r\n * Supports HTML5, YouTube, Vimeo, wistia videos\r\n *\r\n *\r\n * @ref Wistia\r\n * https://wistia.com/support/integrations/wordpress(How to get url)\r\n * https://wistia.com/support/developers/embed-options#using-embed-options\r\n * https://wistia.com/support/developers/player-api\r\n * https://wistia.com/support/developers/construct-an-embed-code\r\n * http://jsfiddle.net/xvnm7xLm/\r\n * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video\r\n * https://wistia.com/support/embed-and-share/sharing-videos\r\n * https://private-sharing.wistia.com/medias/mwhrulrucj\r\n *\r\n * @ref Youtube\r\n * https://developers.google.com/youtube/player_parameters#enablejsapi\r\n * https://developers.google.com/youtube/iframe_api_reference\r\n *\r\n */\r\nfunction param(obj) {\r\n    return Object.keys(obj)\r\n        .map(function (k) {\r\n        return encodeURIComponent(k) + '=' + encodeURIComponent(obj[k]);\r\n    })\r\n        .join('&');\r\n}\r\nvar Video = /** @class */ (function () {\r\n    function Video(instance) {\r\n        // get lightGallery core plugin instance\r\n        this.core = instance;\r\n        this.settings = __assign(__assign({}, videoSettings), this.core.settings);\r\n        return this;\r\n    }\r\n    Video.prototype.init = function () {\r\n        var _this = this;\r\n        /**\r\n         * Event triggered when video url found without poster\r\n         * Append video HTML\r\n         * Play if autoplayFirstVideo is true\r\n         */\r\n        this.core.LGel.on(lGEvents.hasVideo + \".video\", this.onHasVideo.bind(this));\r\n        this.core.LGel.on(lGEvents.posterClick + \".video\", function () {\r\n            var $el = _this.core.getSlideItem(_this.core.index);\r\n            _this.loadVideoOnPosterClick($el);\r\n        });\r\n        // @desc fired immediately before each slide transition.\r\n        this.core.LGel.on(lGEvents.beforeSlide + \".video\", this.onBeforeSlide.bind(this));\r\n        // @desc fired immediately after each slide transition.\r\n        this.core.LGel.on(lGEvents.afterSlide + \".video\", this.onAfterSlide.bind(this));\r\n    };\r\n    /**\r\n     * @desc Event triggered when video url or poster found\r\n     * Append video HTML is poster is not given\r\n     * Play if autoplayFirstVideo is true\r\n     *\r\n     * @param {Event} event - Javascript Event object.\r\n     */\r\n    Video.prototype.onHasVideo = function (event) {\r\n        var _a = event.detail, index = _a.index, src = _a.src, html5Video = _a.html5Video, hasPoster = _a.hasPoster, isFirstSlide = _a.isFirstSlide;\r\n        if (!hasPoster) {\r\n            // All functions are called separately if poster exist in loadVideoOnPosterClick function\r\n            this.appendVideos(this.core.getSlideItem(index), {\r\n                src: src,\r\n                addClass: 'lg-object',\r\n                index: index,\r\n                html5Video: html5Video,\r\n            });\r\n            // Automatically navigate to next slide once video reaches the end.\r\n            this.gotoNextSlideOnVideoEnd(src, index);\r\n        }\r\n        if (this.settings.autoplayFirstVideo && isFirstSlide) {\r\n            if (hasPoster) {\r\n                var $slide = this.core.getSlideItem(index);\r\n                this.loadVideoOnPosterClick($slide);\r\n            }\r\n            else {\r\n                this.playVideo(index);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @desc fired immediately before each slide transition.\r\n     * Pause the previous video\r\n     * Hide the download button if the slide contains YouTube, Vimeo, or Wistia videos.\r\n     *\r\n     * @param {Event} event - Javascript Event object.\r\n     * @param {number} prevIndex - Previous index of the slide.\r\n     * @param {number} index - Current index of the slide\r\n     */\r\n    Video.prototype.onBeforeSlide = function (event) {\r\n        var _a = event.detail, prevIndex = _a.prevIndex; _a.index;\r\n        this.pauseVideo(prevIndex);\r\n    };\r\n    /**\r\n     * @desc fired immediately after each slide transition.\r\n     * Play video if autoplayVideoOnSlide option is enabled.\r\n     *\r\n     * @param {Event} event - Javascript Event object.\r\n     * @param {number} prevIndex - Previous index of the slide.\r\n     * @param {number} index - Current index of the slide\r\n     */\r\n    Video.prototype.onAfterSlide = function (event) {\r\n        var _this = this;\r\n        var index = event.detail.index;\r\n        if (this.settings.autoplayVideoOnSlide && this.core.lGalleryOn) {\r\n            setTimeout(function () {\r\n                var $slide = _this.core.getSlideItem(index);\r\n                if (!$slide.hasClass('lg-video-loaded')) {\r\n                    _this.loadVideoOnPosterClick($slide);\r\n                }\r\n                else {\r\n                    _this.playVideo(index);\r\n                }\r\n            }, 100);\r\n        }\r\n    };\r\n    /**\r\n     * Play HTML5, Youtube, Vimeo or Wistia videos in a particular slide.\r\n     * @param {number} index - Index of the slide\r\n     */\r\n    Video.prototype.playVideo = function (index) {\r\n        this.controlVideo(index, 'play');\r\n    };\r\n    /**\r\n     * Pause HTML5, Youtube, Vimeo or Wistia videos in a particular slide.\r\n     * @param {number} index - Index of the slide\r\n     */\r\n    Video.prototype.pauseVideo = function (index) {\r\n        this.controlVideo(index, 'pause');\r\n    };\r\n    Video.prototype.getVideoHtml = function (src, addClass, index, html5Video) {\r\n        var video = '';\r\n        var videoInfo = this.core.galleryItems[index]\r\n            .__slideVideoInfo || {};\r\n        var currentGalleryItem = this.core.galleryItems[index];\r\n        var videoTitle = currentGalleryItem.title || currentGalleryItem.alt;\r\n        videoTitle = videoTitle ? 'title=\"' + videoTitle + '\"' : '';\r\n        var commonIframeProps = \"allowtransparency=\\\"true\\\"\\n            frameborder=\\\"0\\\"\\n            scrolling=\\\"no\\\"\\n            allowfullscreen\\n            mozallowfullscreen\\n            webkitallowfullscreen\\n            oallowfullscreen\\n            msallowfullscreen\";\r\n        if (videoInfo.youtube) {\r\n            var videoId = 'lg-youtube' + index;\r\n            var youTubePlayerParams = \"?wmode=opaque&autoplay=0&enablejsapi=1\";\r\n            var playerParams = youTubePlayerParams +\r\n                (this.settings.youTubePlayerParams\r\n                    ? '&' + param(this.settings.youTubePlayerParams)\r\n                    : '');\r\n            video = \"<iframe allow=\\\"autoplay\\\" id=\" + videoId + \" class=\\\"lg-video-object lg-youtube \" + addClass + \"\\\" \" + videoTitle + \" src=\\\"//www.youtube.com/embed/\" + (videoInfo.youtube[1] + playerParams) + \"\\\" \" + commonIframeProps + \"></iframe>\";\r\n        }\r\n        else if (videoInfo.vimeo) {\r\n            var videoId = 'lg-vimeo' + index;\r\n            var playerParams = param(this.settings.vimeoPlayerParams);\r\n            video = \"<iframe allow=\\\"autoplay\\\" id=\" + videoId + \" class=\\\"lg-video-object lg-vimeo \" + addClass + \"\\\" \" + videoTitle + \" src=\\\"//player.vimeo.com/video/\" + (videoInfo.vimeo[1] + playerParams) + \"\\\" \" + commonIframeProps + \"></iframe>\";\r\n        }\r\n        else if (videoInfo.wistia) {\r\n            var wistiaId = 'lg-wistia' + index;\r\n            var playerParams = param(this.settings.wistiaPlayerParams);\r\n            video = \"<iframe allow=\\\"autoplay\\\" id=\\\"\" + wistiaId + \"\\\" src=\\\"//fast.wistia.net/embed/iframe/\" + (videoInfo.wistia[4] + playerParams) + \"\\\" \" + videoTitle + \" class=\\\"wistia_embed lg-video-object lg-wistia \" + addClass + \"\\\" name=\\\"wistia_embed\\\" \" + commonIframeProps + \"></iframe>\";\r\n        }\r\n        else if (videoInfo.html5) {\r\n            var html5VideoMarkup = '';\r\n            for (var i = 0; i < html5Video.source.length; i++) {\r\n                html5VideoMarkup += \"<source src=\\\"\" + html5Video.source[i].src + \"\\\" type=\\\"\" + html5Video.source[i].type + \"\\\">\";\r\n            }\r\n            if (html5Video.tracks) {\r\n                var _loop_1 = function (i) {\r\n                    var trackAttributes = '';\r\n                    var track = html5Video.tracks[i];\r\n                    Object.keys(track || {}).forEach(function (key) {\r\n                        trackAttributes += key + \"=\\\"\" + track[key] + \"\\\" \";\r\n                    });\r\n                    html5VideoMarkup += \"<track \" + trackAttributes + \">\";\r\n                };\r\n                for (var i = 0; i < html5Video.tracks.length; i++) {\r\n                    _loop_1(i);\r\n                }\r\n            }\r\n            var html5VideoAttrs_1 = '';\r\n            var videoAttributes_1 = html5Video.attributes || {};\r\n            Object.keys(videoAttributes_1 || {}).forEach(function (key) {\r\n                html5VideoAttrs_1 += key + \"=\\\"\" + videoAttributes_1[key] + \"\\\" \";\r\n            });\r\n            video = \"<video class=\\\"lg-video-object lg-html5 \" + (this.settings.videojs ? 'video-js' : '') + \"\\\" \" + html5VideoAttrs_1 + \">\\n                \" + html5VideoMarkup + \"\\n                Your browser does not support HTML5 video.\\n            </video>\";\r\n        }\r\n        return video;\r\n    };\r\n    /**\r\n     * @desc - Append videos to the slide\r\n     *\r\n     * @param {HTMLElement} el - slide element\r\n     * @param {Object} videoParams - Video parameters, Contains src, class, index, htmlVideo\r\n     */\r\n    Video.prototype.appendVideos = function (el, videoParams) {\r\n        var _a;\r\n        var videoHtml = this.getVideoHtml(videoParams.src, videoParams.addClass, videoParams.index, videoParams.html5Video);\r\n        el.find('.lg-video-cont').append(videoHtml);\r\n        var $videoElement = el.find('.lg-video-object').first();\r\n        if (videoParams.html5Video) {\r\n            $videoElement.on('mousedown.lg.video', function (e) {\r\n                e.stopPropagation();\r\n            });\r\n        }\r\n        if (this.settings.videojs && ((_a = this.core.galleryItems[videoParams.index].__slideVideoInfo) === null || _a === void 0 ? void 0 : _a.html5)) {\r\n            try {\r\n                return videojs($videoElement.get(), this.settings.videojsOptions);\r\n            }\r\n            catch (e) {\r\n                console.error('lightGallery:- Make sure you have included videojs');\r\n            }\r\n        }\r\n    };\r\n    Video.prototype.gotoNextSlideOnVideoEnd = function (src, index) {\r\n        var _this = this;\r\n        var $videoElement = this.core\r\n            .getSlideItem(index)\r\n            .find('.lg-video-object')\r\n            .first();\r\n        var videoInfo = this.core.galleryItems[index].__slideVideoInfo || {};\r\n        if (this.settings.gotoNextSlideOnVideoEnd) {\r\n            if (videoInfo.html5) {\r\n                $videoElement.on('ended', function () {\r\n                    _this.core.goToNextSlide();\r\n                });\r\n            }\r\n            else if (videoInfo.vimeo) {\r\n                try {\r\n                    // https://github.com/vimeo/player.js/#ended\r\n                    new Vimeo.Player($videoElement.get()).on('ended', function () {\r\n                        _this.core.goToNextSlide();\r\n                    });\r\n                }\r\n                catch (e) {\r\n                    console.error('lightGallery:- Make sure you have included //github.com/vimeo/player.js');\r\n                }\r\n            }\r\n            else if (videoInfo.wistia) {\r\n                try {\r\n                    window._wq = window._wq || [];\r\n                    // @todo Event is gettign triggered multiple times\r\n                    window._wq.push({\r\n                        id: $videoElement.attr('id'),\r\n                        onReady: function (video) {\r\n                            video.bind('end', function () {\r\n                                _this.core.goToNextSlide();\r\n                            });\r\n                        },\r\n                    });\r\n                }\r\n                catch (e) {\r\n                    console.error('lightGallery:- Make sure you have included //fast.wistia.com/assets/external/E-v1.js');\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Video.prototype.controlVideo = function (index, action) {\r\n        var $videoElement = this.core\r\n            .getSlideItem(index)\r\n            .find('.lg-video-object')\r\n            .first();\r\n        var videoInfo = this.core.galleryItems[index].__slideVideoInfo || {};\r\n        if (!$videoElement.get())\r\n            return;\r\n        if (videoInfo.youtube) {\r\n            try {\r\n                $videoElement.get().contentWindow.postMessage(\"{\\\"event\\\":\\\"command\\\",\\\"func\\\":\\\"\" + action + \"Video\\\",\\\"args\\\":\\\"\\\"}\", '*');\r\n            }\r\n            catch (e) {\r\n                console.error(\"lightGallery:- \" + e);\r\n            }\r\n        }\r\n        else if (videoInfo.vimeo) {\r\n            try {\r\n                new Vimeo.Player($videoElement.get())[action]();\r\n            }\r\n            catch (e) {\r\n                console.error('lightGallery:- Make sure you have included //github.com/vimeo/player.js');\r\n            }\r\n        }\r\n        else if (videoInfo.html5) {\r\n            if (this.settings.videojs) {\r\n                try {\r\n                    videojs($videoElement.get())[action]();\r\n                }\r\n                catch (e) {\r\n                    console.error('lightGallery:- Make sure you have included videojs');\r\n                }\r\n            }\r\n            else {\r\n                $videoElement.get()[action]();\r\n            }\r\n        }\r\n        else if (videoInfo.wistia) {\r\n            try {\r\n                window._wq = window._wq || [];\r\n                // @todo Find a way to destroy wistia player instance\r\n                window._wq.push({\r\n                    id: $videoElement.attr('id'),\r\n                    onReady: function (video) {\r\n                        video[action]();\r\n                    },\r\n                });\r\n            }\r\n            catch (e) {\r\n                console.error('lightGallery:- Make sure you have included //fast.wistia.com/assets/external/E-v1.js');\r\n            }\r\n        }\r\n    };\r\n    Video.prototype.loadVideoOnPosterClick = function ($el) {\r\n        var _this = this;\r\n        // check slide has poster\r\n        if (!$el.hasClass('lg-video-loaded')) {\r\n            // check already video element present\r\n            if (!$el.hasClass('lg-has-video')) {\r\n                $el.addClass('lg-has-video');\r\n                var _html = void 0;\r\n                var _src = this.core.galleryItems[this.core.index].src;\r\n                var video = this.core.galleryItems[this.core.index].video;\r\n                if (video) {\r\n                    _html =\r\n                        typeof video === 'string' ? JSON.parse(video) : video;\r\n                }\r\n                var videoJsPlayer_1 = this.appendVideos($el, {\r\n                    src: _src,\r\n                    addClass: '',\r\n                    index: this.core.index,\r\n                    html5Video: _html,\r\n                });\r\n                this.gotoNextSlideOnVideoEnd(_src, this.core.index);\r\n                var $tempImg = $el.find('.lg-object').first().get();\r\n                // @todo make sure it is working\r\n                $el.find('.lg-video-cont').first().append($tempImg);\r\n                $el.addClass('lg-video-loading');\r\n                videoJsPlayer_1 &&\r\n                    videoJsPlayer_1.ready(function () {\r\n                        videoJsPlayer_1.on('loadedmetadata', function () {\r\n                            _this.onVideoLoadAfterPosterClick($el, _this.core.index);\r\n                        });\r\n                    });\r\n                $el.find('.lg-video-object')\r\n                    .first()\r\n                    .on('load.lg error.lg loadeddata.lg', function () {\r\n                    setTimeout(function () {\r\n                        _this.onVideoLoadAfterPosterClick($el, _this.core.index);\r\n                    }, 50);\r\n                });\r\n            }\r\n            else {\r\n                this.playVideo(this.core.index);\r\n            }\r\n        }\r\n    };\r\n    Video.prototype.onVideoLoadAfterPosterClick = function ($el, index) {\r\n        $el.addClass('lg-video-loaded');\r\n        this.playVideo(index);\r\n    };\r\n    Video.prototype.destroy = function () {\r\n        this.core.LGel.off('.lg.video');\r\n        this.core.LGel.off('.video');\r\n    };\r\n    return Video;\r\n}());\n\nexport default Video;\n//# sourceMappingURL=lg-video.es5.js.map\n"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","videoSettings","autoplayFirstVideo","youTubePlayerParams","vimeoPlayerParams","wistiaPlayerParams","gotoNextSlideOnVideoEnd","autoplayVideoOnSlide","videojs","videojsOptions","lGEvents","param","obj","keys","map","k","encodeURIComponent","join","Video","instance","core","settings","init","_this","LGel","on","onHasVideo","bind","$el","getSlideItem","index","loadVideoOnPosterClick","onBeforeSlide","onAfterSlide","event","_a","detail","src","html5Video","hasPoster","isFirstSlide","appendVideos","addClass","$slide","playVideo","prevIndex","pauseVideo","lGalleryOn","setTimeout","hasClass","controlVideo","getVideoHtml","video","videoInfo","galleryItems","__slideVideoInfo","currentGalleryItem","videoTitle","title","alt","commonIframeProps","youtube","videoId","playerParams","vimeo","wistia","wistiaId","html5","html5VideoMarkup","source","type","tracks","_loop_1","trackAttributes","track","forEach","key","html5VideoAttrs_1","videoAttributes_1","attributes","el","videoParams","videoHtml","find","append","$videoElement","first","e","stopPropagation","get","console","error","goToNextSlide","Vimeo","Player","window","_wq","push","id","attr","onReady","action","contentWindow","postMessage","_html","_src","JSON","parse","videoJsPlayer_1","$tempImg","ready","onVideoLoadAfterPosterClick","destroy","off"],"sourceRoot":""}