{"version":3,"file":"192.js","mappings":"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","sources":["webpack://sakurairo-scripts/./node_modules/lightgallery/lib/index.js","webpack://sakurairo-scripts/./node_modules/lightgallery/lib/lg-events.js","webpack://sakurairo-scripts/./node_modules/lightgallery/lib/lg-settings.js","webpack://sakurairo-scripts/./node_modules/lightgallery/lib/lg-utils.js","webpack://sakurairo-scripts/./node_modules/lightgallery/lib/lgQuery.js","webpack://sakurairo-scripts/./node_modules/lightgallery/lib/lightgallery.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lightgallery_1 = require(\"./lightgallery\");\nfunction lightGallery(el, options) {\n    return new lightgallery_1.LightGallery(el, options);\n}\nexports.default = lightGallery;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.lGEvents = void 0;\n/**\n * List of lightGallery events\n * All events should be documented here\n * Below interfaces are used to build the website documentations\n * */\nexports.lGEvents = {\n    afterAppendSlide: 'lgAfterAppendSlide',\n    init: 'lgInit',\n    hasVideo: 'lgHasVideo',\n    containerResize: 'lgContainerResize',\n    updateSlides: 'lgUpdateSlides',\n    afterAppendSubHtml: 'lgAfterAppendSubHtml',\n    beforeOpen: 'lgBeforeOpen',\n    afterOpen: 'lgAfterOpen',\n    slideItemLoad: 'lgSlideItemLoad',\n    beforeSlide: 'lgBeforeSlide',\n    afterSlide: 'lgAfterSlide',\n    posterClick: 'lgPosterClick',\n    dragStart: 'lgDragStart',\n    dragMove: 'lgDragMove',\n    dragEnd: 'lgDragEnd',\n    beforeNextSlide: 'lgBeforeNextSlide',\n    beforePrevSlide: 'lgBeforePrevSlide',\n    beforeClose: 'lgBeforeClose',\n    afterClose: 'lgAfterClose',\n    rotateLeft: 'lgRotateLeft',\n    rotateRight: 'lgRotateRight',\n    flipHorizontal: 'lgFlipHorizontal',\n    flipVertical: 'lgFlipVertical',\n};\n//# sourceMappingURL=lg-events.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.lightGalleryCoreSettings = void 0;\nexports.lightGalleryCoreSettings = {\n    mode: 'lg-slide',\n    easing: 'ease',\n    speed: 400,\n    licenseKey: '0000-0000-000-0000',\n    height: '100%',\n    width: '100%',\n    addClass: '',\n    startClass: 'lg-start-zoom',\n    backdropDuration: 300,\n    container: document.body,\n    startAnimationDuration: 400,\n    zoomFromOrigin: true,\n    hideBarsDelay: 0,\n    showBarsAfter: 10000,\n    slideDelay: 0,\n    supportLegacyBrowser: true,\n    allowMediaOverlap: false,\n    videoMaxSize: '1280-720',\n    defaultCaptionHeight: 0,\n    ariaLabelledby: '',\n    ariaDescribedby: '',\n    closable: true,\n    swipeToClose: true,\n    closeOnTap: true,\n    showCloseIcon: true,\n    showMaximizeIcon: false,\n    loop: true,\n    escKey: true,\n    keyPress: true,\n    controls: true,\n    slideEndAnimation: true,\n    hideControlOnEnd: false,\n    mousewheel: false,\n    getCaptionFromTitleOrAlt: true,\n    appendSubHtmlTo: '.lg-sub-html',\n    subHtmlSelectorRelative: false,\n    preload: 2,\n    numberOfSlideItemsInDom: 10,\n    showAfterLoad: true,\n    selector: '',\n    selectWithin: '',\n    nextHtml: '',\n    prevHtml: '',\n    index: 0,\n    iframeWidth: '100%',\n    iframeHeight: '100%',\n    download: true,\n    counter: true,\n    appendCounterTo: '.lg-toolbar',\n    swipeThreshold: 50,\n    enableSwipe: true,\n    enableDrag: true,\n    dynamic: false,\n    dynamicEl: [],\n    extraProps: [],\n    exThumbImage: '',\n    isMobile: undefined,\n    mobileSettings: {\n        controls: false,\n        showCloseIcon: false,\n        download: false,\n    },\n    plugins: [],\n};\n//# sourceMappingURL=lg-settings.js.map","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.convertToData = void 0;\nvar lgQuery_1 = require(\"./lgQuery\");\nvar defaultDynamicOptions = [\n    'src',\n    'sources',\n    'subHtml',\n    'subHtmlUrl',\n    'html',\n    'video',\n    'poster',\n    'slideName',\n    'responsive',\n    'srcset',\n    'sizes',\n    'iframe',\n    'downloadUrl',\n    'download',\n    'width',\n    'facebookShareUrl',\n    'tweetText',\n    'iframeTitle',\n    'twitterShareUrl',\n    'pinterestShareUrl',\n    'pinterestText',\n    'fbHtml',\n    'disqusIdentifier',\n    'disqusUrl',\n];\n// Convert html data-attribute to camalcase\nfunction convertToData(attr) {\n    // FInd a way for lgsize\n    if (attr === 'href') {\n        return 'src';\n    }\n    attr = attr.replace('data-', '');\n    attr = attr.charAt(0).toLowerCase() + attr.slice(1);\n    attr = attr.replace(/-([a-z])/g, function (g) { return g[1].toUpperCase(); });\n    return attr;\n}\nexports.convertToData = convertToData;\nvar utils = {\n    /**\n     * get possible width and height from the lgSize attribute. Used for ZoomFromOrigin option\n     */\n    getSize: function (el, container, spacing, defaultLgSize) {\n        if (spacing === void 0) { spacing = 0; }\n        var LGel = lgQuery_1.$LG(el);\n        var lgSize = LGel.attr('data-lg-size') || defaultLgSize;\n        if (!lgSize) {\n            return;\n        }\n        var isResponsiveSizes = lgSize.split(',');\n        // if at-least two viewport sizes are available\n        if (isResponsiveSizes[1]) {\n            var wWidth = window.innerWidth;\n            for (var i = 0; i < isResponsiveSizes.length; i++) {\n                var size_1 = isResponsiveSizes[i];\n                var responsiveWidth = parseInt(size_1.split('-')[2], 10);\n                if (responsiveWidth > wWidth) {\n                    lgSize = size_1;\n                    break;\n                }\n                // take last item as last option\n                if (i === isResponsiveSizes.length - 1) {\n                    lgSize = size_1;\n                }\n            }\n        }\n        var size = lgSize.split('-');\n        var width = parseInt(size[0], 10);\n        var height = parseInt(size[1], 10);\n        var cWidth = container.width();\n        var cHeight = container.height() - spacing;\n        var maxWidth = Math.min(cWidth, width);\n        var maxHeight = Math.min(cHeight, height);\n        var ratio = Math.min(maxWidth / width, maxHeight / height);\n        return { width: width * ratio, height: height * ratio };\n    },\n    /**\n     * @desc Get transform value based on the imageSize. Used for ZoomFromOrigin option\n     * @param {jQuery Element}\n     * @returns {String} Transform CSS string\n     */\n    getTransform: function (el, container, top, bottom, imageSize) {\n        if (!imageSize) {\n            return;\n        }\n        var LGel = lgQuery_1.$LG(el).find('img').first();\n        if (!LGel.get()) {\n            return;\n        }\n        var containerRect = container.get().getBoundingClientRect();\n        var wWidth = containerRect.width;\n        // using innerWidth to include mobile safari bottom bar\n        var wHeight = container.height() - (top + bottom);\n        var elWidth = LGel.width();\n        var elHeight = LGel.height();\n        var elStyle = LGel.style();\n        var x = (wWidth - elWidth) / 2 -\n            LGel.offset().left +\n            (parseFloat(elStyle.paddingLeft) || 0) +\n            (parseFloat(elStyle.borderLeft) || 0) +\n            lgQuery_1.$LG(window).scrollLeft() +\n            containerRect.left;\n        var y = (wHeight - elHeight) / 2 -\n            LGel.offset().top +\n            (parseFloat(elStyle.paddingTop) || 0) +\n            (parseFloat(elStyle.borderTop) || 0) +\n            lgQuery_1.$LG(window).scrollTop() +\n            top;\n        var scX = elWidth / imageSize.width;\n        var scY = elHeight / imageSize.height;\n        var transform = 'translate3d(' +\n            (x *= -1) +\n            'px, ' +\n            (y *= -1) +\n            'px, 0) scale3d(' +\n            scX +\n            ', ' +\n            scY +\n            ', 1)';\n        return transform;\n    },\n    getIframeMarkup: function (iframeWidth, iframeHeight, src, iframeTitle) {\n        var title = iframeTitle ? 'title=\"' + iframeTitle + '\"' : '';\n        return \"<div class=\\\"lg-video-cont lg-has-iframe\\\" style=\\\"width:\" + iframeWidth + \"; height: \" + iframeHeight + \"\\\">\\n                    <iframe class=\\\"lg-object\\\" frameborder=\\\"0\\\" \" + title + \" src=\\\"\" + src + \"\\\"  allowfullscreen=\\\"true\\\"></iframe>\\n                </div>\";\n    },\n    getImgMarkup: function (index, src, altAttr, srcset, sizes, sources) {\n        var srcsetAttr = srcset ? \"srcset=\\\"\" + srcset + \"\\\"\" : '';\n        var sizesAttr = sizes ? \"sizes=\\\"\" + sizes + \"\\\"\" : '';\n        var imgMarkup = \"<img \" + altAttr + \" \" + srcsetAttr + \"  \" + sizesAttr + \" class=\\\"lg-object lg-image\\\" data-index=\\\"\" + index + \"\\\" src=\\\"\" + src + \"\\\" />\";\n        var sourceTag = '';\n        if (sources) {\n            var sourceObj = typeof sources === 'string' ? JSON.parse(sources) : sources;\n            sourceTag = sourceObj.map(function (source) {\n                var attrs = '';\n                Object.keys(source).forEach(function (key) {\n                    // Do not remove the first space as it is required to separate the attributes\n                    attrs += \" \" + key + \"=\\\"\" + source[key] + \"\\\"\";\n                });\n                return \"<source \" + attrs + \"></source>\";\n            });\n        }\n        return \"\" + sourceTag + imgMarkup;\n    },\n    // Get src from responsive src\n    getResponsiveSrc: function (srcItms) {\n        var rsWidth = [];\n        var rsSrc = [];\n        var src = '';\n        for (var i = 0; i < srcItms.length; i++) {\n            var _src = srcItms[i].split(' ');\n            // Manage empty space\n            if (_src[0] === '') {\n                _src.splice(0, 1);\n            }\n            rsSrc.push(_src[0]);\n            rsWidth.push(_src[1]);\n        }\n        var wWidth = window.innerWidth;\n        for (var j = 0; j < rsWidth.length; j++) {\n            if (parseInt(rsWidth[j], 10) > wWidth) {\n                src = rsSrc[j];\n                break;\n            }\n        }\n        return src;\n    },\n    isImageLoaded: function (img) {\n        if (!img)\n            return false;\n        // During the onload event, IE correctly identifies any images that\n        // weren’t downloaded as not complete. Others should too. Gecko-based\n        // browsers act like NS4 in that they report this incorrectly.\n        if (!img.complete) {\n            return false;\n        }\n        // However, they do have two very useful properties: naturalWidth and\n        // naturalHeight. These give the true size of the image. If it failed\n        // to load, either of these should be zero.\n        if (img.naturalWidth === 0) {\n            return false;\n        }\n        // No other way of checking: assume it’s ok.\n        return true;\n    },\n    getVideoPosterMarkup: function (_poster, dummyImg, videoContStyle, _isVideo) {\n        var videoClass = '';\n        if (_isVideo && _isVideo.youtube) {\n            videoClass = 'lg-has-youtube';\n        }\n        else if (_isVideo && _isVideo.vimeo) {\n            videoClass = 'lg-has-vimeo';\n        }\n        else {\n            videoClass = 'lg-has-html5';\n        }\n        return \"<div class=\\\"lg-video-cont \" + videoClass + \"\\\" style=\\\"\" + videoContStyle + \"\\\">\\n                <div class=\\\"lg-video-play-button\\\">\\n                <svg\\n                    viewBox=\\\"0 0 20 20\\\"\\n                    preserveAspectRatio=\\\"xMidYMid\\\"\\n                    focusable=\\\"false\\\"\\n                    aria-labelledby=\\\"Play video\\\"\\n                    role=\\\"img\\\"\\n                    class=\\\"lg-video-play-icon\\\"\\n                >\\n                    <title>Play video</title>\\n                    <polygon class=\\\"lg-video-play-icon-inner\\\" points=\\\"1,0 20,10 1,20\\\"></polygon>\\n                </svg>\\n                <svg class=\\\"lg-video-play-icon-bg\\\" viewBox=\\\"0 0 50 50\\\" focusable=\\\"false\\\">\\n                    <circle cx=\\\"50%\\\" cy=\\\"50%\\\" r=\\\"20\\\"></circle></svg>\\n                <svg class=\\\"lg-video-play-icon-circle\\\" viewBox=\\\"0 0 50 50\\\" focusable=\\\"false\\\">\\n                    <circle cx=\\\"50%\\\" cy=\\\"50%\\\" r=\\\"20\\\"></circle>\\n                </svg>\\n            </div>\\n            \" + (dummyImg || '') + \"\\n            <img class=\\\"lg-object lg-video-poster\\\" src=\\\"\" + _poster + \"\\\" />\\n        </div>\";\n    },\n    /**\n     * @desc Create dynamic elements array from gallery items when dynamic option is false\n     * It helps to avoid frequent DOM interaction\n     * and avoid multiple checks for dynamic elments\n     *\n     * @returns {Array} dynamicEl\n     */\n    getDynamicOptions: function (items, extraProps, getCaptionFromTitleOrAlt, exThumbImage) {\n        var dynamicElements = [];\n        var availableDynamicOptions = __spreadArrays(defaultDynamicOptions, extraProps);\n        [].forEach.call(items, function (item) {\n            var dynamicEl = {};\n            for (var i = 0; i < item.attributes.length; i++) {\n                var attr = item.attributes[i];\n                if (attr.specified) {\n                    var dynamicAttr = convertToData(attr.name);\n                    var label = '';\n                    if (availableDynamicOptions.indexOf(dynamicAttr) > -1) {\n                        label = dynamicAttr;\n                    }\n                    if (label) {\n                        dynamicEl[label] = attr.value;\n                    }\n                }\n            }\n            var currentItem = lgQuery_1.$LG(item);\n            var alt = currentItem.find('img').first().attr('alt');\n            var title = currentItem.attr('title');\n            var thumb = exThumbImage\n                ? currentItem.attr(exThumbImage)\n                : currentItem.find('img').first().attr('src');\n            dynamicEl.thumb = thumb;\n            if (getCaptionFromTitleOrAlt && !dynamicEl.subHtml) {\n                dynamicEl.subHtml = title || alt || '';\n            }\n            dynamicEl.alt = alt || title || '';\n            dynamicElements.push(dynamicEl);\n        });\n        return dynamicElements;\n    },\n    isMobile: function () {\n        return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n    },\n};\nexports.default = utils;\n//# sourceMappingURL=lg-utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$LG = exports.lgQuery = void 0;\n(function () {\n    if (typeof window.CustomEvent === 'function')\n        return false;\n    function CustomEvent(event, params) {\n        params = params || { bubbles: false, cancelable: false, detail: null };\n        var evt = document.createEvent('CustomEvent');\n        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n        return evt;\n    }\n    window.CustomEvent = CustomEvent;\n})();\n(function () {\n    if (!Element.prototype.matches) {\n        Element.prototype.matches =\n            Element.prototype.msMatchesSelector ||\n                Element.prototype.webkitMatchesSelector;\n    }\n})();\nvar lgQuery = /** @class */ (function () {\n    function lgQuery(selector) {\n        this.cssVenderPrefixes = [\n            'TransitionDuration',\n            'TransitionTimingFunction',\n            'Transform',\n            'Transition',\n        ];\n        this.selector = this._getSelector(selector);\n        this.firstElement = this._getFirstEl();\n        return this;\n    }\n    lgQuery.generateUUID = function () {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n            return v.toString(16);\n        });\n    };\n    lgQuery.prototype._getSelector = function (selector, context) {\n        if (context === void 0) { context = document; }\n        if (typeof selector !== 'string') {\n            return selector;\n        }\n        context = context || document;\n        var fl = selector.substring(0, 1);\n        if (fl === '#') {\n            return context.querySelector(selector);\n        }\n        else {\n            return context.querySelectorAll(selector);\n        }\n    };\n    lgQuery.prototype._each = function (func) {\n        if (!this.selector) {\n            return this;\n        }\n        if (this.selector.length !== undefined) {\n            [].forEach.call(this.selector, func);\n        }\n        else {\n            func(this.selector, 0);\n        }\n        return this;\n    };\n    lgQuery.prototype._setCssVendorPrefix = function (el, cssProperty, value) {\n        // prettier-ignore\n        var property = cssProperty.replace(/-([a-z])/gi, function (s, group1) {\n            return group1.toUpperCase();\n        });\n        if (this.cssVenderPrefixes.indexOf(property) !== -1) {\n            el.style[property.charAt(0).toLowerCase() + property.slice(1)] = value;\n            el.style['webkit' + property] = value;\n            el.style['moz' + property] = value;\n            el.style['ms' + property] = value;\n            el.style['o' + property] = value;\n        }\n        else {\n            el.style[property] = value;\n        }\n    };\n    lgQuery.prototype._getFirstEl = function () {\n        if (this.selector && this.selector.length !== undefined) {\n            return this.selector[0];\n        }\n        else {\n            return this.selector;\n        }\n    };\n    lgQuery.prototype.isEventMatched = function (event, eventName) {\n        var eventNamespace = eventName.split('.');\n        return event\n            .split('.')\n            .filter(function (e) { return e; })\n            .every(function (e) {\n            return eventNamespace.indexOf(e) !== -1;\n        });\n    };\n    lgQuery.prototype.attr = function (attr, value) {\n        if (value === undefined) {\n            if (!this.firstElement) {\n                return '';\n            }\n            return this.firstElement.getAttribute(attr);\n        }\n        this._each(function (el) {\n            el.setAttribute(attr, value);\n        });\n        return this;\n    };\n    lgQuery.prototype.find = function (selector) {\n        return $LG(this._getSelector(selector, this.selector));\n    };\n    lgQuery.prototype.first = function () {\n        if (this.selector && this.selector.length !== undefined) {\n            return $LG(this.selector[0]);\n        }\n        else {\n            return $LG(this.selector);\n        }\n    };\n    lgQuery.prototype.eq = function (index) {\n        return $LG(this.selector[index]);\n    };\n    lgQuery.prototype.parent = function () {\n        return $LG(this.selector.parentElement);\n    };\n    lgQuery.prototype.get = function () {\n        return this._getFirstEl();\n    };\n    lgQuery.prototype.removeAttr = function (attributes) {\n        var attrs = attributes.split(' ');\n        this._each(function (el) {\n            attrs.forEach(function (attr) { return el.removeAttribute(attr); });\n        });\n        return this;\n    };\n    lgQuery.prototype.wrap = function (className) {\n        if (!this.firstElement) {\n            return this;\n        }\n        var wrapper = document.createElement('div');\n        wrapper.className = className;\n        this.firstElement.parentNode.insertBefore(wrapper, this.firstElement);\n        this.firstElement.parentNode.removeChild(this.firstElement);\n        wrapper.appendChild(this.firstElement);\n        return this;\n    };\n    lgQuery.prototype.addClass = function (classNames) {\n        if (classNames === void 0) { classNames = ''; }\n        this._each(function (el) {\n            // IE doesn't support multiple arguments\n            classNames.split(' ').forEach(function (className) {\n                el.classList.add(className);\n            });\n        });\n        return this;\n    };\n    lgQuery.prototype.removeClass = function (classNames) {\n        this._each(function (el) {\n            // IE doesn't support multiple arguments\n            classNames.split(' ').forEach(function (className) {\n                el.classList.remove(className);\n            });\n        });\n        return this;\n    };\n    lgQuery.prototype.hasClass = function (className) {\n        if (!this.firstElement) {\n            return false;\n        }\n        return this.firstElement.classList.contains(className);\n    };\n    lgQuery.prototype.hasAttribute = function (attribute) {\n        if (!this.firstElement) {\n            return false;\n        }\n        return this.firstElement.hasAttribute(attribute);\n    };\n    lgQuery.prototype.toggleClass = function (className) {\n        if (!this.firstElement) {\n            return this;\n        }\n        if (this.hasClass(className)) {\n            this.removeClass(className);\n        }\n        else {\n            this.addClass(className);\n        }\n        return this;\n    };\n    lgQuery.prototype.css = function (property, value) {\n        var _this = this;\n        this._each(function (el) {\n            _this._setCssVendorPrefix(el, property, value);\n        });\n        return this;\n    };\n    // Need to pass separate namespaces for separate elements\n    lgQuery.prototype.on = function (events, listener) {\n        var _this = this;\n        if (!this.selector) {\n            return this;\n        }\n        events.split(' ').forEach(function (event) {\n            if (!Array.isArray(lgQuery.eventListeners[event])) {\n                lgQuery.eventListeners[event] = [];\n            }\n            lgQuery.eventListeners[event].push(listener);\n            _this.selector.addEventListener(event.split('.')[0], listener);\n        });\n        return this;\n    };\n    // @todo - test this\n    lgQuery.prototype.once = function (event, listener) {\n        var _this = this;\n        this.on(event, function () {\n            _this.off(event);\n            listener(event);\n        });\n        return this;\n    };\n    lgQuery.prototype.off = function (event) {\n        var _this = this;\n        if (!this.selector) {\n            return this;\n        }\n        Object.keys(lgQuery.eventListeners).forEach(function (eventName) {\n            if (_this.isEventMatched(event, eventName)) {\n                lgQuery.eventListeners[eventName].forEach(function (listener) {\n                    _this.selector.removeEventListener(eventName.split('.')[0], listener);\n                });\n                lgQuery.eventListeners[eventName] = [];\n            }\n        });\n        return this;\n    };\n    lgQuery.prototype.trigger = function (event, detail) {\n        if (!this.firstElement) {\n            return this;\n        }\n        var customEvent = new CustomEvent(event.split('.')[0], {\n            detail: detail || null,\n        });\n        this.firstElement.dispatchEvent(customEvent);\n        return this;\n    };\n    // Does not support IE\n    lgQuery.prototype.load = function (url) {\n        var _this = this;\n        fetch(url).then(function (res) {\n            _this.selector.innerHTML = res;\n        });\n        return this;\n    };\n    lgQuery.prototype.html = function (html) {\n        if (html === undefined) {\n            if (!this.firstElement) {\n                return '';\n            }\n            return this.firstElement.innerHTML;\n        }\n        this._each(function (el) {\n            el.innerHTML = html;\n        });\n        return this;\n    };\n    lgQuery.prototype.append = function (html) {\n        this._each(function (el) {\n            if (typeof html === 'string') {\n                el.insertAdjacentHTML('beforeend', html);\n            }\n            else {\n                el.appendChild(html);\n            }\n        });\n        return this;\n    };\n    lgQuery.prototype.prepend = function (html) {\n        this._each(function (el) {\n            el.insertAdjacentHTML('afterbegin', html);\n        });\n        return this;\n    };\n    lgQuery.prototype.remove = function () {\n        this._each(function (el) {\n            el.parentNode.removeChild(el);\n        });\n        return this;\n    };\n    lgQuery.prototype.empty = function () {\n        this._each(function (el) {\n            el.innerHTML = '';\n        });\n        return this;\n    };\n    lgQuery.prototype.scrollTop = function (scrollTop) {\n        if (scrollTop !== undefined) {\n            document.body.scrollTop = scrollTop;\n            document.documentElement.scrollTop = scrollTop;\n            return this;\n        }\n        else {\n            return (window.pageYOffset ||\n                document.documentElement.scrollTop ||\n                document.body.scrollTop ||\n                0);\n        }\n    };\n    lgQuery.prototype.scrollLeft = function (scrollLeft) {\n        if (scrollLeft !== undefined) {\n            document.body.scrollLeft = scrollLeft;\n            document.documentElement.scrollLeft = scrollLeft;\n            return this;\n        }\n        else {\n            return (window.pageXOffset ||\n                document.documentElement.scrollLeft ||\n                document.body.scrollLeft ||\n                0);\n        }\n    };\n    lgQuery.prototype.offset = function () {\n        if (!this.firstElement) {\n            return {\n                left: 0,\n                top: 0,\n            };\n        }\n        var rect = this.firstElement.getBoundingClientRect();\n        var bodyMarginLeft = $LG('body').style().marginLeft;\n        // Minus body margin - https://stackoverflow.com/questions/30711548/is-getboundingclientrect-left-returning-a-wrong-value\n        return {\n            left: rect.left - parseFloat(bodyMarginLeft) + this.scrollLeft(),\n            top: rect.top + this.scrollTop(),\n        };\n    };\n    lgQuery.prototype.style = function () {\n        if (!this.firstElement) {\n            return {};\n        }\n        return (this.firstElement.currentStyle ||\n            window.getComputedStyle(this.firstElement));\n    };\n    // Width without padding and border even if box-sizing is used.\n    lgQuery.prototype.width = function () {\n        var style = this.style();\n        return (this.firstElement.clientWidth -\n            parseFloat(style.paddingLeft) -\n            parseFloat(style.paddingRight));\n    };\n    // Height without padding and border even if box-sizing is used.\n    lgQuery.prototype.height = function () {\n        var style = this.style();\n        return (this.firstElement.clientHeight -\n            parseFloat(style.paddingTop) -\n            parseFloat(style.paddingBottom));\n    };\n    lgQuery.eventListeners = {};\n    return lgQuery;\n}());\nexports.lgQuery = lgQuery;\nfunction $LG(selector) {\n    return new lgQuery(selector);\n}\nexports.$LG = $LG;\n//# sourceMappingURL=lgQuery.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LightGallery = void 0;\nvar lg_utils_1 = require(\"./lg-utils\");\nvar lgQuery_1 = require(\"./lgQuery\");\nvar lg_settings_1 = require(\"./lg-settings\");\nvar lg_events_1 = require(\"./lg-events\");\n// @ref - https://stackoverflow.com/questions/3971841/how-to-resize-images-proportionally-keeping-the-aspect-ratio\n// @ref - https://2ality.com/2017/04/setting-up-multi-platform-packages.html\n// Unique id for each gallery\nvar lgId = 0;\nvar LightGallery = /** @class */ (function () {\n    function LightGallery(element, options) {\n        this.lgOpened = false;\n        this.index = 0;\n        // lightGallery modules\n        this.plugins = [];\n        // false when lightGallery load first slide content;\n        this.lGalleryOn = false;\n        // True when a slide animation is in progress\n        this.lgBusy = false;\n        this.currentItemsInDom = [];\n        // Scroll top value before lightGallery is opened\n        this.prevScrollTop = 0;\n        this.isDummyImageRemoved = false;\n        this.dragOrSwipeEnabled = false;\n        this.mediaContainerPosition = {\n            top: 0,\n            bottom: 0,\n        };\n        if (!element) {\n            return this;\n        }\n        lgId++;\n        this.lgId = lgId;\n        this.el = element;\n        this.LGel = lgQuery_1.$LG(element);\n        this.generateSettings(options);\n        this.buildModules();\n        // When using dynamic mode, ensure dynamicEl is an array\n        if (this.settings.dynamic &&\n            this.settings.dynamicEl !== undefined &&\n            !Array.isArray(this.settings.dynamicEl)) {\n            throw 'When using dynamic mode, you must also define dynamicEl as an Array.';\n        }\n        this.galleryItems = this.getItems();\n        this.normalizeSettings();\n        // Gallery items\n        this.init();\n        this.validateLicense();\n        return this;\n    }\n    LightGallery.prototype.generateSettings = function (options) {\n        // lightGallery settings\n        this.settings = __assign(__assign({}, lg_settings_1.lightGalleryCoreSettings), options);\n        if (this.settings.isMobile &&\n            typeof this.settings.isMobile === 'function'\n            ? this.settings.isMobile()\n            : lg_utils_1.default.isMobile()) {\n            var mobileSettings = __assign(__assign({}, this.settings.mobileSettings), this.settings.mobileSettings);\n            this.settings = __assign(__assign({}, this.settings), mobileSettings);\n        }\n    };\n    LightGallery.prototype.normalizeSettings = function () {\n        if (this.settings.slideEndAnimation) {\n            this.settings.hideControlOnEnd = false;\n        }\n        if (!this.settings.closable) {\n            this.settings.swipeToClose = false;\n        }\n        // And reset it on close to get the correct value next time\n        this.zoomFromOrigin = this.settings.zoomFromOrigin;\n        // At the moment, Zoom from image doesn't support dynamic options\n        // @todo add zoomFromOrigin support for dynamic images\n        if (this.settings.dynamic) {\n            this.zoomFromOrigin = false;\n        }\n        if (!this.settings.container) {\n            this.settings.container = document.body;\n        }\n        // settings.preload should not be grater than $item.length\n        this.settings.preload = Math.min(this.settings.preload, this.galleryItems.length);\n    };\n    LightGallery.prototype.init = function () {\n        var _this = this;\n        this.addSlideVideoInfo(this.galleryItems);\n        this.buildStructure();\n        this.LGel.trigger(lg_events_1.lGEvents.init, {\n            instance: this,\n        });\n        if (this.settings.keyPress) {\n            this.keyPress();\n        }\n        setTimeout(function () {\n            _this.enableDrag();\n            _this.enableSwipe();\n            _this.triggerPosterClick();\n        }, 50);\n        this.arrow();\n        if (this.settings.mousewheel) {\n            this.mousewheel();\n        }\n        if (!this.settings.dynamic) {\n            this.openGalleryOnItemClick();\n        }\n    };\n    LightGallery.prototype.openGalleryOnItemClick = function () {\n        var _this = this;\n        var _loop_1 = function (index) {\n            var element = this_1.items[index];\n            var $element = lgQuery_1.$LG(element);\n            // Using different namespace for click because click event should not unbind if selector is same object('this')\n            // @todo manage all event listners - should have namespace that represent element\n            var uuid = lgQuery_1.lgQuery.generateUUID();\n            $element\n                .attr('data-lg-id', uuid)\n                .on(\"click.lgcustom-item-\" + uuid, function (e) {\n                e.preventDefault();\n                var currentItemIndex = _this.settings.index || index;\n                _this.openGallery(currentItemIndex, element);\n            });\n        };\n        var this_1 = this;\n        // Using for loop instead of using bubbling as the items can be any html element.\n        for (var index = 0; index < this.items.length; index++) {\n            _loop_1(index);\n        }\n    };\n    /**\n     * Module constructor\n     * Modules are build incrementally.\n     * Gallery should be opened only once all the modules are initialized.\n     * use moduleBuildTimeout to make sure this\n     */\n    LightGallery.prototype.buildModules = function () {\n        var _this = this;\n        this.settings.plugins.forEach(function (plugin) {\n            _this.plugins.push(new plugin(_this, lgQuery_1.$LG));\n        });\n    };\n    LightGallery.prototype.validateLicense = function () {\n        if (!this.settings.licenseKey) {\n            console.error('Please provide a valid license key');\n        }\n        else if (this.settings.licenseKey === '0000-0000-000-0000') {\n            console.warn(\"lightGallery: \" + this.settings.licenseKey + \" license key is not valid for production use\");\n        }\n    };\n    LightGallery.prototype.getSlideItem = function (index) {\n        return lgQuery_1.$LG(this.getSlideItemId(index));\n    };\n    LightGallery.prototype.getSlideItemId = function (index) {\n        return \"#lg-item-\" + this.lgId + \"-\" + index;\n    };\n    LightGallery.prototype.getIdName = function (id) {\n        return id + \"-\" + this.lgId;\n    };\n    LightGallery.prototype.getElementById = function (id) {\n        return lgQuery_1.$LG(\"#\" + this.getIdName(id));\n    };\n    LightGallery.prototype.manageSingleSlideClassName = function () {\n        if (this.galleryItems.length < 2) {\n            this.outer.addClass('lg-single-item');\n        }\n        else {\n            this.outer.removeClass('lg-single-item');\n        }\n    };\n    LightGallery.prototype.buildStructure = function () {\n        var _this = this;\n        var container = this.$container && this.$container.get();\n        if (container) {\n            return;\n        }\n        var controls = '';\n        var subHtmlCont = '';\n        // Create controls\n        if (this.settings.controls) {\n            controls = \"<button type=\\\"button\\\" id=\\\"\" + this.getIdName('lg-prev') + \"\\\" aria-label=\\\"Previous slide\\\" class=\\\"lg-prev lg-icon\\\"> \" + this.settings.prevHtml + \" </button>\\n                <button type=\\\"button\\\" id=\\\"\" + this.getIdName('lg-next') + \"\\\" aria-label=\\\"Next slide\\\" class=\\\"lg-next lg-icon\\\"> \" + this.settings.nextHtml + \" </button>\";\n        }\n        if (this.settings.appendSubHtmlTo !== '.lg-item') {\n            subHtmlCont =\n                '<div class=\"lg-sub-html\" role=\"status\" aria-live=\"polite\"></div>';\n        }\n        var addClasses = '';\n        if (this.settings.allowMediaOverlap) {\n            // Do not remove space before last single quote\n            addClasses += 'lg-media-overlap ';\n        }\n        var ariaLabelledby = this.settings.ariaLabelledby\n            ? 'aria-labelledby=\"' + this.settings.ariaLabelledby + '\"'\n            : '';\n        var ariaDescribedby = this.settings.ariaDescribedby\n            ? 'aria-describedby=\"' + this.settings.ariaDescribedby + '\"'\n            : '';\n        var containerClassName = \"lg-container \" + this.settings.addClass + \" \" + (document.body !== this.settings.container ? 'lg-inline' : '');\n        var closeIcon = this.settings.closable && this.settings.showCloseIcon\n            ? \"<button type=\\\"button\\\" aria-label=\\\"Close gallery\\\" id=\\\"\" + this.getIdName('lg-close') + \"\\\" class=\\\"lg-close lg-icon\\\"></button>\"\n            : '';\n        var maximizeIcon = this.settings.showMaximizeIcon\n            ? \"<button type=\\\"button\\\" aria-label=\\\"Toggle maximize\\\" id=\\\"\" + this.getIdName('lg-maximize') + \"\\\" class=\\\"lg-maximize lg-icon\\\"></button>\"\n            : '';\n        var template = \"\\n        <div class=\\\"\" + containerClassName + \"\\\" id=\\\"\" + this.getIdName('lg-container') + \"\\\" tabindex=\\\"-1\\\" aria-modal=\\\"true\\\" \" + ariaLabelledby + \" \" + ariaDescribedby + \" role=\\\"dialog\\\"\\n        >\\n            <div id=\\\"\" + this.getIdName('lg-backdrop') + \"\\\" class=\\\"lg-backdrop\\\"></div>\\n\\n            <div id=\\\"\" + this.getIdName('lg-outer') + \"\\\" class=\\\"lg-outer lg-use-css3 lg-css3 lg-hide-items \" + addClasses + \" \\\">\\n\\n              <div id=\\\"\" + this.getIdName('lg-content') + \"\\\" class=\\\"lg-content\\\">\\n                <div id=\\\"\" + this.getIdName('lg-inner') + \"\\\" class=\\\"lg-inner\\\">\\n                </div>\\n                \" + controls + \"\\n              </div>\\n                <div id=\\\"\" + this.getIdName('lg-toolbar') + \"\\\" class=\\\"lg-toolbar lg-group\\\">\\n                    \" + maximizeIcon + \"\\n                    \" + closeIcon + \"\\n                    </div>\\n                    \" + (this.settings.appendSubHtmlTo === '.lg-outer'\n            ? subHtmlCont\n            : '') + \"\\n                <div id=\\\"\" + this.getIdName('lg-components') + \"\\\" class=\\\"lg-components\\\">\\n                    \" + (this.settings.appendSubHtmlTo === '.lg-sub-html'\n            ? subHtmlCont\n            : '') + \"\\n                </div>\\n            </div>\\n        </div>\\n        \";\n        lgQuery_1.$LG(this.settings.container)\n            .css('position', 'relative')\n            .append(template);\n        this.outer = this.getElementById('lg-outer');\n        this.$lgComponents = this.getElementById('lg-components');\n        this.$backdrop = this.getElementById('lg-backdrop');\n        this.$container = this.getElementById('lg-container');\n        this.$inner = this.getElementById('lg-inner');\n        this.$content = this.getElementById('lg-content');\n        this.$toolbar = this.getElementById('lg-toolbar');\n        this.$backdrop.css('transition-duration', this.settings.backdropDuration + 'ms');\n        var outerClassNames = this.settings.mode + \" \";\n        this.manageSingleSlideClassName();\n        if (this.settings.enableDrag) {\n            outerClassNames += 'lg-grab ';\n        }\n        if (this.settings.showAfterLoad) {\n            outerClassNames += 'lg-show-after-load';\n        }\n        this.outer.addClass(outerClassNames);\n        this.$inner.css('transition-timing-function', this.settings.easing);\n        this.$inner.css('transition-duration', this.settings.speed + 'ms');\n        if (this.settings.download) {\n            this.$toolbar.append(\"<a id=\\\"\" + this.getIdName('lg-download') + \"\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\" aria-label=\\\"Download\\\" download class=\\\"lg-download lg-icon\\\"></a>\");\n        }\n        this.counter();\n        lgQuery_1.$LG(window).on(\"resize.lg.global\" + this.lgId + \" orientationchange.lg.global\" + this.lgId, function () {\n            _this.refreshOnResize();\n        });\n        this.hideBars();\n        this.manageCloseGallery();\n        this.toggleMaximize();\n        this.initModules();\n    };\n    LightGallery.prototype.refreshOnResize = function () {\n        if (this.lgOpened) {\n            var currentGalleryItem = this.galleryItems[this.index];\n            var videoInfo = currentGalleryItem.__slideVideoInfo;\n            this.mediaContainerPosition = this.getMediaContainerPosition();\n            var _a = this.mediaContainerPosition, top_1 = _a.top, bottom = _a.bottom;\n            this.currentImageSize = lg_utils_1.default.getSize(this.items[this.index], this.outer, top_1 + bottom, videoInfo && this.settings.videoMaxSize);\n            if (videoInfo) {\n                this.resizeVideoSlide(this.index, this.currentImageSize);\n            }\n            if (this.zoomFromOrigin && !this.isDummyImageRemoved) {\n                var imgStyle = this.getDummyImgStyles(this.currentImageSize);\n                this.outer\n                    .find('.lg-current .lg-dummy-img')\n                    .first()\n                    .attr('style', imgStyle);\n            }\n            this.LGel.trigger(lg_events_1.lGEvents.containerResize);\n        }\n    };\n    LightGallery.prototype.resizeVideoSlide = function (index, imageSize) {\n        var lgVideoStyle = this.getVideoContStyle(imageSize);\n        var currentSlide = this.getSlideItem(index);\n        currentSlide.find('.lg-video-cont').attr('style', lgVideoStyle);\n    };\n    /**\n     * Update slides dynamically.\n     * Add, edit or delete slides dynamically when lightGallery is opened.\n     * Modify the current gallery items and pass it via updateSlides method\n     * @note\n     * - Do not mutate existing lightGallery items directly.\n     * - Always pass new list of gallery items\n     * - You need to take care of thumbnails outside the gallery if any\n     * - user this method only if you want to update slides when the gallery is opened. Otherwise, use `refresh()` method.\n     * @param items Gallery items\n     * @param index After the update operation, which slide gallery should navigate to\n     * @category lGPublicMethods\n     * @example\n     * const plugin = lightGallery();\n     *\n     * // Adding slides dynamically\n     * let galleryItems = [\n     * // Access existing lightGallery items\n     * // galleryItems are automatically generated internally from the gallery HTML markup\n     * // or directly from galleryItems when dynamic gallery is used\n     *   ...plugin.galleryItems,\n     *     ...[\n     *       {\n     *         src: 'img/img-1.png',\n     *           thumb: 'img/thumb1.png',\n     *         },\n     *     ],\n     *   ];\n     *   plugin.updateSlides(\n     *     galleryItems,\n     *     plugin.index,\n     *   );\n     *\n     *\n     * // Remove slides dynamically\n     * galleryItems = JSON.parse(\n     *   JSON.stringify(updateSlideInstance.galleryItems),\n     * );\n     * galleryItems.shift();\n     * updateSlideInstance.updateSlides(galleryItems, 1);\n     * @see <a href=\"/demos/update-slides/\">Demo</a>\n     */\n    LightGallery.prototype.updateSlides = function (items, index) {\n        if (this.index > items.length - 1) {\n            this.index = items.length - 1;\n        }\n        if (items.length === 1) {\n            this.index = 0;\n        }\n        if (!items.length) {\n            this.closeGallery();\n            return;\n        }\n        var currentSrc = this.galleryItems[index].src;\n        this.galleryItems = items;\n        this.updateControls();\n        this.$inner.empty();\n        this.currentItemsInDom = [];\n        var _index = 0;\n        // Find the current index based on source value of the slide\n        this.galleryItems.some(function (galleryItem, itemIndex) {\n            if (galleryItem.src === currentSrc) {\n                _index = itemIndex;\n                return true;\n            }\n            return false;\n        });\n        this.currentItemsInDom = this.organizeSlideItems(_index, -1);\n        this.loadContent(_index, true);\n        this.getSlideItem(_index).addClass('lg-current');\n        this.index = _index;\n        this.updateCurrentCounter(_index);\n        this.LGel.trigger(lg_events_1.lGEvents.updateSlides);\n    };\n    // Get gallery items based on multiple conditions\n    LightGallery.prototype.getItems = function () {\n        // Gallery items\n        this.items = [];\n        if (!this.settings.dynamic) {\n            if (this.settings.selector === 'this') {\n                this.items.push(this.el);\n            }\n            else if (this.settings.selector) {\n                if (typeof this.settings.selector === 'string') {\n                    if (this.settings.selectWithin) {\n                        var selectWithin = lgQuery_1.$LG(this.settings.selectWithin);\n                        this.items = selectWithin\n                            .find(this.settings.selector)\n                            .get();\n                    }\n                    else {\n                        this.items = this.el.querySelectorAll(this.settings.selector);\n                    }\n                }\n                else {\n                    this.items = this.settings.selector;\n                }\n            }\n            else {\n                this.items = this.el.children;\n            }\n            return lg_utils_1.default.getDynamicOptions(this.items, this.settings.extraProps, this.settings.getCaptionFromTitleOrAlt, this.settings.exThumbImage);\n        }\n        else {\n            return this.settings.dynamicEl || [];\n        }\n    };\n    /**\n     * Open lightGallery.\n     * Open gallery with specific slide by passing index of the slide as parameter.\n     * @category lGPublicMethods\n     * @param {Number} index  - index of the slide\n     * @param {HTMLElement} element - Which image lightGallery should zoom from\n     *\n     * @example\n     * const $dynamicGallery = document.getElementById('dynamic-gallery-demo');\n     * const dynamicGallery = lightGallery($dynamicGallery, {\n     *     dynamic: true,\n     *     dynamicEl: [\n     *         {\n     *              src: 'img/1.jpg',\n     *              thumb: 'img/thumb-1.jpg',\n     *              subHtml: '<h4>Image 1 title</h4><p>Image 1 descriptions.</p>',\n     *         },\n     *         ...\n     *     ],\n     * });\n     * $dynamicGallery.addEventListener('click', function () {\n     *     // Starts with third item.(Optional).\n     *     // This is useful if you want use dynamic mode with\n     *     // custom thumbnails (thumbnails outside gallery),\n     *     dynamicGallery.openGallery(2);\n     * });\n     *\n     */\n    LightGallery.prototype.openGallery = function (index, element) {\n        var _this = this;\n        if (index === void 0) { index = this.settings.index; }\n        // prevent accidental double execution\n        if (this.lgOpened)\n            return;\n        this.lgOpened = true;\n        this.outer.get().focus();\n        this.outer.removeClass('lg-hide-items');\n        // Add display block, but still has opacity 0\n        this.$container.addClass('lg-show');\n        var itemsToBeInsertedToDom = this.getItemsToBeInsertedToDom(index, index);\n        this.currentItemsInDom = itemsToBeInsertedToDom;\n        var items = '';\n        itemsToBeInsertedToDom.forEach(function (item) {\n            items = items + (\"<div id=\\\"\" + item + \"\\\" class=\\\"lg-item\\\"></div>\");\n        });\n        this.$inner.append(items);\n        this.addHtml(index);\n        var transform = '';\n        this.mediaContainerPosition = this.getMediaContainerPosition();\n        var _a = this.mediaContainerPosition, top = _a.top, bottom = _a.bottom;\n        if (!this.settings.allowMediaOverlap) {\n            this.setMediaContainerPosition(top, bottom);\n        }\n        if (this.zoomFromOrigin && element) {\n            this.currentImageSize = lg_utils_1.default.getSize(element, this.outer, top + bottom, this.galleryItems[index].__slideVideoInfo &&\n                this.settings.videoMaxSize);\n            transform = lg_utils_1.default.getTransform(element, this.outer, top, bottom, this.currentImageSize);\n        }\n        if (!this.zoomFromOrigin || !transform) {\n            this.outer.addClass(this.settings.startClass);\n            this.getSlideItem(index).removeClass('lg-complete');\n        }\n        var timeout = this.settings.zoomFromOrigin\n            ? 100\n            : this.settings.backdropDuration;\n        setTimeout(function () {\n            _this.outer.addClass('lg-components-open');\n        }, timeout);\n        this.index = index;\n        this.LGel.trigger(lg_events_1.lGEvents.beforeOpen);\n        // add class lg-current to remove initial transition\n        this.getSlideItem(index).addClass('lg-current');\n        this.lGalleryOn = false;\n        // Store the current scroll top value to scroll back after closing the gallery..\n        this.prevScrollTop = lgQuery_1.$LG(window).scrollTop();\n        setTimeout(function () {\n            // Need to check both zoomFromOrigin and transform values as we need to set set the\n            // default opening animation if user missed to add the lg-size attribute\n            if (_this.zoomFromOrigin && transform) {\n                var currentSlide_1 = _this.getSlideItem(index);\n                currentSlide_1.css('transform', transform);\n                setTimeout(function () {\n                    currentSlide_1\n                        .addClass('lg-start-progress lg-start-end-progress')\n                        .css('transition-duration', _this.settings.startAnimationDuration + 'ms');\n                    _this.outer.addClass('lg-zoom-from-image');\n                });\n                setTimeout(function () {\n                    currentSlide_1.css('transform', 'translate3d(0, 0, 0)');\n                }, 100);\n            }\n            setTimeout(function () {\n                _this.$backdrop.addClass('in');\n                _this.$container.addClass('lg-show-in');\n            }, 10);\n            // lg-visible class resets gallery opacity to 1\n            if (!_this.zoomFromOrigin || !transform) {\n                setTimeout(function () {\n                    _this.outer.addClass('lg-visible');\n                }, _this.settings.backdropDuration);\n            }\n            // initiate slide function\n            _this.slide(index, false, false, false);\n            _this.LGel.trigger(lg_events_1.lGEvents.afterOpen);\n        });\n        if (document.body === this.settings.container) {\n            lgQuery_1.$LG('html').addClass('lg-on');\n        }\n    };\n    /**\n     * Note - Changing the position of the media on every slide transition creates a flickering effect.\n     * Therefore, The height of the caption is calculated dynamically, only once based on the first slide caption.\n     * if you have dynamic captions for each media,\n     * you can provide an appropriate height for the captions via allowMediaOverlap option\n     */\n    LightGallery.prototype.getMediaContainerPosition = function () {\n        if (this.settings.allowMediaOverlap) {\n            return {\n                top: 0,\n                bottom: 0,\n            };\n        }\n        var top = this.$toolbar.get().clientHeight || 0;\n        var subHtml = this.outer.find('.lg-components .lg-sub-html').get();\n        var captionHeight = this.settings.defaultCaptionHeight ||\n            (subHtml && subHtml.clientHeight) ||\n            0;\n        var thumbContainer = this.outer.find('.lg-thumb-outer').get();\n        var thumbHeight = thumbContainer ? thumbContainer.clientHeight : 0;\n        var bottom = thumbHeight + captionHeight;\n        return {\n            top: top,\n            bottom: bottom,\n        };\n    };\n    LightGallery.prototype.setMediaContainerPosition = function (top, bottom) {\n        if (top === void 0) { top = 0; }\n        if (bottom === void 0) { bottom = 0; }\n        this.$content.css('top', top + 'px').css('bottom', bottom + 'px');\n    };\n    LightGallery.prototype.hideBars = function () {\n        var _this = this;\n        // Hide controllers if mouse doesn't move for some period\n        setTimeout(function () {\n            _this.outer.removeClass('lg-hide-items');\n            if (_this.settings.hideBarsDelay > 0) {\n                _this.outer.on('mousemove.lg click.lg touchstart.lg', function () {\n                    _this.outer.removeClass('lg-hide-items');\n                    clearTimeout(_this.hideBarTimeout);\n                    // Timeout will be cleared on each slide movement also\n                    _this.hideBarTimeout = setTimeout(function () {\n                        _this.outer.addClass('lg-hide-items');\n                    }, _this.settings.hideBarsDelay);\n                });\n                _this.outer.trigger('mousemove.lg');\n            }\n        }, this.settings.showBarsAfter);\n    };\n    LightGallery.prototype.initPictureFill = function ($img) {\n        if (this.settings.supportLegacyBrowser) {\n            try {\n                picturefill({\n                    elements: [$img.get()],\n                });\n            }\n            catch (e) {\n                console.warn('lightGallery :- If you want srcset or picture tag to be supported for older browser please include picturefil javascript library in your document.');\n            }\n        }\n    };\n    /**\n     *  @desc Create image counter\n     *  Ex: 1/10\n     */\n    LightGallery.prototype.counter = function () {\n        if (this.settings.counter) {\n            var counterHtml = \"<div class=\\\"lg-counter\\\" role=\\\"status\\\" aria-live=\\\"polite\\\">\\n                <span id=\\\"\" + this.getIdName('lg-counter-current') + \"\\\" class=\\\"lg-counter-current\\\">\" + (this.index + 1) + \" </span> /\\n                <span id=\\\"\" + this.getIdName('lg-counter-all') + \"\\\" class=\\\"lg-counter-all\\\">\" + this.galleryItems.length + \" </span></div>\";\n            this.outer.find(this.settings.appendCounterTo).append(counterHtml);\n        }\n    };\n    /**\n     *  @desc add sub-html into the slide\n     *  @param {Number} index - index of the slide\n     */\n    LightGallery.prototype.addHtml = function (index) {\n        var subHtml;\n        var subHtmlUrl;\n        if (this.galleryItems[index].subHtmlUrl) {\n            subHtmlUrl = this.galleryItems[index].subHtmlUrl;\n        }\n        else {\n            subHtml = this.galleryItems[index].subHtml;\n        }\n        if (!subHtmlUrl) {\n            if (subHtml) {\n                // get first letter of sub-html\n                // if first letter starts with . or # get the html form the jQuery object\n                var fL = subHtml.substring(0, 1);\n                if (fL === '.' || fL === '#') {\n                    if (this.settings.subHtmlSelectorRelative &&\n                        !this.settings.dynamic) {\n                        subHtml = lgQuery_1.$LG(this.items)\n                            .eq(index)\n                            .find(subHtml)\n                            .first()\n                            .html();\n                    }\n                    else {\n                        subHtml = lgQuery_1.$LG(subHtml).first().html();\n                    }\n                }\n            }\n            else {\n                subHtml = '';\n            }\n        }\n        if (this.settings.appendSubHtmlTo !== '.lg-item') {\n            if (subHtmlUrl) {\n                this.outer.find('.lg-sub-html').load(subHtmlUrl);\n            }\n            else {\n                this.outer.find('.lg-sub-html').html(subHtml);\n            }\n        }\n        else {\n            var currentSlide = lgQuery_1.$LG(this.getSlideItemId(index));\n            if (subHtmlUrl) {\n                currentSlide.load(subHtmlUrl);\n            }\n            else {\n                currentSlide.append(\"<div class=\\\"lg-sub-html\\\">\" + subHtml + \"</div>\");\n            }\n        }\n        // Add lg-empty-html class if title doesn't exist\n        if (typeof subHtml !== 'undefined' && subHtml !== null) {\n            if (subHtml === '') {\n                this.outer\n                    .find(this.settings.appendSubHtmlTo)\n                    .addClass('lg-empty-html');\n            }\n            else {\n                this.outer\n                    .find(this.settings.appendSubHtmlTo)\n                    .removeClass('lg-empty-html');\n            }\n        }\n        this.LGel.trigger(lg_events_1.lGEvents.afterAppendSubHtml, {\n            index: index,\n        });\n    };\n    /**\n     *  @desc Preload slides\n     *  @param {Number} index - index of the slide\n     * @todo preload not working for the first slide, Also, should work for the first and last slide as well\n     */\n    LightGallery.prototype.preload = function (index) {\n        for (var i = 1; i <= this.settings.preload; i++) {\n            if (i >= this.galleryItems.length - index) {\n                break;\n            }\n            this.loadContent(index + i, false);\n        }\n        for (var j = 1; j <= this.settings.preload; j++) {\n            if (index - j < 0) {\n                break;\n            }\n            this.loadContent(index - j, false);\n        }\n    };\n    LightGallery.prototype.getDummyImgStyles = function (imageSize) {\n        if (!imageSize)\n            return '';\n        return \"width:\" + imageSize.width + \"px;\\n                margin-left: -\" + imageSize.width / 2 + \"px;\\n                margin-top: -\" + imageSize.height / 2 + \"px;\\n                height:\" + imageSize.height + \"px\";\n    };\n    LightGallery.prototype.getVideoContStyle = function (imageSize) {\n        if (!imageSize)\n            return '';\n        return \"width:\" + imageSize.width + \"px;\\n                height:\" + imageSize.height + \"px\";\n    };\n    LightGallery.prototype.getDummyImageContent = function ($currentSlide, index, alt) {\n        var $currentItem;\n        if (!this.settings.dynamic) {\n            $currentItem = lgQuery_1.$LG(this.items).eq(index);\n        }\n        if ($currentItem) {\n            var _dummyImgSrc = void 0;\n            if (!this.settings.exThumbImage) {\n                _dummyImgSrc = $currentItem.find('img').first().attr('src');\n            }\n            else {\n                _dummyImgSrc = $currentItem.attr(this.settings.exThumbImage);\n            }\n            if (!_dummyImgSrc)\n                return '';\n            var imgStyle = this.getDummyImgStyles(this.currentImageSize);\n            var dummyImgContent = \"<img \" + alt + \" style=\\\"\" + imgStyle + \"\\\" class=\\\"lg-dummy-img\\\" src=\\\"\" + _dummyImgSrc + \"\\\" />\";\n            $currentSlide.addClass('lg-first-slide');\n            this.outer.addClass('lg-first-slide-loading');\n            return dummyImgContent;\n        }\n        return '';\n    };\n    LightGallery.prototype.setImgMarkup = function (src, $currentSlide, index) {\n        var currentGalleryItem = this.galleryItems[index];\n        var alt = currentGalleryItem.alt, srcset = currentGalleryItem.srcset, sizes = currentGalleryItem.sizes, sources = currentGalleryItem.sources;\n        // Use the thumbnail as dummy image which will be resized to actual image size and\n        // displayed on top of actual image\n        var imgContent = '';\n        var altAttr = alt ? 'alt=\"' + alt + '\"' : '';\n        if (!this.lGalleryOn && this.zoomFromOrigin && this.currentImageSize) {\n            imgContent = this.getDummyImageContent($currentSlide, index, altAttr);\n        }\n        else {\n            imgContent = lg_utils_1.default.getImgMarkup(index, src, altAttr, srcset, sizes, sources);\n        }\n        var imgMarkup = \"<picture class=\\\"lg-img-wrap\\\"> \" + imgContent + \"</picture>\";\n        $currentSlide.prepend(imgMarkup);\n    };\n    LightGallery.prototype.onLgObjectLoad = function ($el, index, delay, speed, dummyImageLoaded) {\n        var _this = this;\n        if (dummyImageLoaded) {\n            this.LGel.trigger(lg_events_1.lGEvents.slideItemLoad, {\n                index: index,\n                delay: delay || 0,\n            });\n        }\n        $el.find('.lg-object')\n            .first()\n            .on('load.lg', function () {\n            _this.handleLgObjectLoad($el, index, delay, speed, dummyImageLoaded);\n        });\n        setTimeout(function () {\n            $el.find('.lg-object')\n                .first()\n                .on('error.lg', function () {\n                $el.addClass('lg-complete lg-complete_');\n                $el.html('<span class=\"lg-error-msg\">Oops... Failed to load content...</span>');\n            });\n        }, speed);\n    };\n    LightGallery.prototype.handleLgObjectLoad = function ($el, index, delay, speed, dummyImageLoaded) {\n        var _this = this;\n        setTimeout(function () {\n            $el.addClass('lg-complete lg-complete_');\n            if (!dummyImageLoaded) {\n                _this.LGel.trigger(lg_events_1.lGEvents.slideItemLoad, {\n                    index: index,\n                    delay: delay || 0,\n                });\n            }\n        }, speed);\n    };\n    /**\n     * @desc Check the given src is video\n     * @param {String} src\n     * @return {Object} video type\n     * Ex:{ youtube  :  [\"//www.youtube.com/watch?v=c0asJgSyxcY\", \"c0asJgSyxcY\"] }\n     *\n     * @todo - this information can be moved to dynamicEl to avoid frequent calls\n     */\n    LightGallery.prototype.isVideo = function (src, index) {\n        if (!src) {\n            if (this.galleryItems[index].video) {\n                return {\n                    html5: true,\n                };\n            }\n            else {\n                console.error('lightGallery :- data-src is not provided on slide item ' +\n                    (index + 1) +\n                    '. Please make sure the selector property is properly configured. More info - https://www.lightgalleryjs.com/demos/html-markup/');\n                return;\n            }\n        }\n        var youtube = src.match(/\\/\\/(?:www\\.)?youtu(?:\\.be|be\\.com|be-nocookie\\.com)\\/(?:watch\\?v=|embed\\/)?([a-z0-9\\-\\_\\%]+)/i);\n        var vimeo = src.match(/\\/\\/(?:www\\.)?(?:player\\.)?vimeo.com\\/(?:video\\/)?([0-9a-z\\-_]+)/i);\n        var wistia = src.match(/https?:\\/\\/(.+)?(wistia\\.com|wi\\.st)\\/(medias|embed)\\/([0-9a-z\\-_]+)(.*)/);\n        if (youtube) {\n            return {\n                youtube: youtube,\n            };\n        }\n        else if (vimeo) {\n            return {\n                vimeo: vimeo,\n            };\n        }\n        else if (wistia) {\n            return {\n                wistia: wistia,\n            };\n        }\n    };\n    // Add video slideInfo\n    LightGallery.prototype.addSlideVideoInfo = function (items) {\n        var _this = this;\n        items.forEach(function (element, index) {\n            element.__slideVideoInfo = _this.isVideo(element.src, index);\n        });\n    };\n    /**\n     *  Load slide content into slide.\n     *  This is used to load content into slides that is not visible too\n     *  @param {Number} index - index of the slide.\n     *  @param {Boolean} rec - if true call loadcontent() function again.\n     */\n    LightGallery.prototype.loadContent = function (index, rec) {\n        var _this = this;\n        var currentGalleryItem = this.galleryItems[index];\n        var $currentSlide = lgQuery_1.$LG(this.getSlideItemId(index));\n        var poster = currentGalleryItem.poster, srcset = currentGalleryItem.srcset, sizes = currentGalleryItem.sizes, sources = currentGalleryItem.sources;\n        var src = currentGalleryItem.src;\n        var video = currentGalleryItem.video;\n        var _html5Video = video && typeof video === 'string' ? JSON.parse(video) : video;\n        if (currentGalleryItem.responsive) {\n            var srcDyItms = currentGalleryItem.responsive.split(',');\n            src = lg_utils_1.default.getResponsiveSrc(srcDyItms) || src;\n        }\n        var videoInfo = currentGalleryItem.__slideVideoInfo;\n        var lgVideoStyle = '';\n        var iframe = !!currentGalleryItem.iframe;\n        if (!$currentSlide.hasClass('lg-loaded')) {\n            if (videoInfo) {\n                var _a = this.mediaContainerPosition, top_2 = _a.top, bottom = _a.bottom;\n                var videoSize = lg_utils_1.default.getSize(this.items[index], this.outer, top_2 + bottom, videoInfo && this.settings.videoMaxSize);\n                lgVideoStyle = this.getVideoContStyle(videoSize);\n            }\n            if (iframe) {\n                var markup = lg_utils_1.default.getIframeMarkup(this.settings.iframeWidth, this.settings.iframeHeight, src, currentGalleryItem.iframeTitle);\n                $currentSlide.prepend(markup);\n            }\n            else if (poster) {\n                var dummyImg = '';\n                var isFirstSlide_1 = !this.lGalleryOn;\n                var hasStartAnimation = !this.lGalleryOn &&\n                    this.zoomFromOrigin &&\n                    this.currentImageSize;\n                if (hasStartAnimation) {\n                    dummyImg = this.getDummyImageContent($currentSlide, index, '');\n                }\n                var markup = lg_utils_1.default.getVideoPosterMarkup(poster, dummyImg || '', lgVideoStyle, videoInfo);\n                $currentSlide.prepend(markup);\n                var delay_1 = (hasStartAnimation\n                    ? this.settings.startAnimationDuration\n                    : this.settings.backdropDuration) + 100;\n                setTimeout(function () {\n                    _this.LGel.trigger(lg_events_1.lGEvents.hasVideo, {\n                        index: index,\n                        src: src,\n                        html5Video: _html5Video,\n                        hasPoster: true,\n                        isFirstSlide: isFirstSlide_1,\n                    });\n                }, delay_1);\n            }\n            else if (videoInfo) {\n                var markup = \"<div class=\\\"lg-video-cont \\\" style=\\\"\" + lgVideoStyle + \"\\\"></div>\";\n                $currentSlide.prepend(markup);\n                this.LGel.trigger(lg_events_1.lGEvents.hasVideo, {\n                    index: index,\n                    src: src,\n                    html5Video: _html5Video,\n                    hasPoster: false,\n                });\n            }\n            else {\n                this.setImgMarkup(src, $currentSlide, index);\n                if (srcset || sources) {\n                    var $img = $currentSlide.find('.lg-object');\n                    this.initPictureFill($img);\n                }\n            }\n            this.LGel.trigger(lg_events_1.lGEvents.afterAppendSlide, { index: index });\n            if (this.lGalleryOn &&\n                this.settings.appendSubHtmlTo === '.lg-item') {\n                this.addHtml(index);\n            }\n        }\n        // For first time add some delay for displaying the start animation.\n        var _speed = 0;\n        // delay for adding complete class. it is 0 except first time.\n        var delay = 0;\n        if (!this.lGalleryOn) {\n            if (this.zoomFromOrigin && this.currentImageSize) {\n                delay = this.settings.startAnimationDuration + 10;\n            }\n            else {\n                delay = this.settings.backdropDuration + 10;\n            }\n        }\n        // Do not change the delay value because it is required for zoom plugin.\n        // If gallery opened from direct url (hash) speed value should be 0\n        if (delay && !lgQuery_1.$LG(document.body).hasClass('lg-from-hash')) {\n            _speed = delay;\n        }\n        // Only for first slide\n        if (!this.lGalleryOn && this.zoomFromOrigin && this.currentImageSize) {\n            setTimeout(function () {\n                $currentSlide\n                    .removeClass('lg-start-end-progress lg-start-progress')\n                    .removeAttr('style');\n            }, this.settings.startAnimationDuration + 100);\n            if (!$currentSlide.hasClass('lg-loaded')) {\n                setTimeout(function () {\n                    $currentSlide\n                        .find('.lg-img-wrap')\n                        .append(lg_utils_1.default.getImgMarkup(index, src, '', srcset, sizes, currentGalleryItem.sources));\n                    if (srcset || sources) {\n                        var $img = $currentSlide.find('.lg-object');\n                        _this.initPictureFill($img);\n                    }\n                    _this.onLgObjectLoad($currentSlide, index, delay, _speed, true);\n                    var mediaObject = $currentSlide\n                        .find('.lg-object')\n                        .first();\n                    if (lg_utils_1.default.isImageLoaded(mediaObject.get())) {\n                        _this.loadContentOnLoad(index, $currentSlide, _speed);\n                    }\n                    else {\n                        mediaObject.on('load.lg error.lg', function () {\n                            _this.loadContentOnLoad(index, $currentSlide, _speed);\n                        });\n                    }\n                }, this.settings.startAnimationDuration + 100);\n            }\n        }\n        // SLide content has been added to dom\n        $currentSlide.addClass('lg-loaded');\n        this.onLgObjectLoad($currentSlide, index, delay, _speed, false);\n        // @todo check load state for html5 videos\n        if (videoInfo && videoInfo.html5 && !poster) {\n            $currentSlide.addClass('lg-complete lg-complete_');\n        }\n        // When gallery is opened once content is loaded (second time) need to add lg-complete class for css styling\n        if ((!this.zoomFromOrigin || !this.currentImageSize) &&\n            $currentSlide.hasClass('lg-complete_') &&\n            !this.lGalleryOn) {\n            setTimeout(function () {\n                $currentSlide.addClass('lg-complete');\n            }, this.settings.backdropDuration);\n        }\n        // Content loaded\n        // Need to set lGalleryOn before calling preload function\n        this.lGalleryOn = true;\n        if (rec === true) {\n            if (!$currentSlide.hasClass('lg-complete_')) {\n                $currentSlide\n                    .find('.lg-object')\n                    .first()\n                    .on('load.lg error.lg', function () {\n                    _this.preload(index);\n                });\n            }\n            else {\n                this.preload(index);\n            }\n        }\n    };\n    LightGallery.prototype.loadContentOnLoad = function (index, $currentSlide, speed) {\n        var _this = this;\n        setTimeout(function () {\n            $currentSlide.find('.lg-dummy-img').remove();\n            $currentSlide.removeClass('lg-first-slide');\n            _this.outer.removeClass('lg-first-slide-loading');\n            _this.isDummyImageRemoved = true;\n            _this.preload(index);\n        }, speed + 300);\n    };\n    LightGallery.prototype.getItemsToBeInsertedToDom = function (index, prevIndex, numberOfItems) {\n        var _this = this;\n        if (numberOfItems === void 0) { numberOfItems = 0; }\n        var itemsToBeInsertedToDom = [];\n        // Minimum 2 items should be there\n        var possibleNumberOfItems = Math.max(numberOfItems, 3);\n        possibleNumberOfItems = Math.min(possibleNumberOfItems, this.galleryItems.length);\n        var prevIndexItem = \"lg-item-\" + this.lgId + \"-\" + prevIndex;\n        if (this.galleryItems.length <= 3) {\n            this.galleryItems.forEach(function (_element, index) {\n                itemsToBeInsertedToDom.push(\"lg-item-\" + _this.lgId + \"-\" + index);\n            });\n            return itemsToBeInsertedToDom;\n        }\n        if (index < (this.galleryItems.length - 1) / 2) {\n            for (var idx = index; idx > index - possibleNumberOfItems / 2 && idx >= 0; idx--) {\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + idx);\n            }\n            var numberOfExistingItems = itemsToBeInsertedToDom.length;\n            for (var idx = 0; idx < possibleNumberOfItems - numberOfExistingItems; idx++) {\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + (index + idx + 1));\n            }\n        }\n        else {\n            for (var idx = index; idx <= this.galleryItems.length - 1 &&\n                idx < index + possibleNumberOfItems / 2; idx++) {\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + idx);\n            }\n            var numberOfExistingItems = itemsToBeInsertedToDom.length;\n            for (var idx = 0; idx < possibleNumberOfItems - numberOfExistingItems; idx++) {\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + (index - idx - 1));\n            }\n        }\n        if (this.settings.loop) {\n            if (index === this.galleryItems.length - 1) {\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + 0);\n            }\n            else if (index === 0) {\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + (this.galleryItems.length - 1));\n            }\n        }\n        if (itemsToBeInsertedToDom.indexOf(prevIndexItem) === -1) {\n            itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + prevIndex);\n        }\n        return itemsToBeInsertedToDom;\n    };\n    LightGallery.prototype.organizeSlideItems = function (index, prevIndex) {\n        var _this = this;\n        var itemsToBeInsertedToDom = this.getItemsToBeInsertedToDom(index, prevIndex, this.settings.numberOfSlideItemsInDom);\n        itemsToBeInsertedToDom.forEach(function (item) {\n            if (_this.currentItemsInDom.indexOf(item) === -1) {\n                _this.$inner.append(\"<div id=\\\"\" + item + \"\\\" class=\\\"lg-item\\\"></div>\");\n            }\n        });\n        this.currentItemsInDom.forEach(function (item) {\n            if (itemsToBeInsertedToDom.indexOf(item) === -1) {\n                lgQuery_1.$LG(\"#\" + item).remove();\n            }\n        });\n        return itemsToBeInsertedToDom;\n    };\n    /**\n     * Get previous index of the slide\n     */\n    LightGallery.prototype.getPreviousSlideIndex = function () {\n        var prevIndex = 0;\n        try {\n            var currentItemId = this.outer\n                .find('.lg-current')\n                .first()\n                .attr('id');\n            prevIndex = parseInt(currentItemId.split('-')[3]) || 0;\n        }\n        catch (error) {\n            prevIndex = 0;\n        }\n        return prevIndex;\n    };\n    LightGallery.prototype.setDownloadValue = function (index) {\n        if (this.settings.download) {\n            var currentGalleryItem = this.galleryItems[index];\n            var hideDownloadBtn = currentGalleryItem.downloadUrl === false ||\n                currentGalleryItem.downloadUrl === 'false';\n            if (hideDownloadBtn) {\n                this.outer.addClass('lg-hide-download');\n            }\n            else {\n                var $download = this.getElementById('lg-download');\n                this.outer.removeClass('lg-hide-download');\n                $download.attr('href', currentGalleryItem.downloadUrl ||\n                    currentGalleryItem.src);\n                if (currentGalleryItem.download) {\n                    $download.attr('download', currentGalleryItem.download);\n                }\n            }\n        }\n    };\n    LightGallery.prototype.makeSlideAnimation = function (direction, currentSlideItem, previousSlideItem) {\n        var _this = this;\n        if (this.lGalleryOn) {\n            previousSlideItem.addClass('lg-slide-progress');\n        }\n        setTimeout(function () {\n            // remove all transitions\n            _this.outer.addClass('lg-no-trans');\n            _this.outer\n                .find('.lg-item')\n                .removeClass('lg-prev-slide lg-next-slide');\n            if (direction === 'prev') {\n                //prevslide\n                currentSlideItem.addClass('lg-prev-slide');\n                previousSlideItem.addClass('lg-next-slide');\n            }\n            else {\n                // next slide\n                currentSlideItem.addClass('lg-next-slide');\n                previousSlideItem.addClass('lg-prev-slide');\n            }\n            // give 50 ms for browser to add/remove class\n            setTimeout(function () {\n                _this.outer.find('.lg-item').removeClass('lg-current');\n                currentSlideItem.addClass('lg-current');\n                // reset all transitions\n                _this.outer.removeClass('lg-no-trans');\n            }, 50);\n        }, this.lGalleryOn ? this.settings.slideDelay : 0);\n    };\n    /**\n     * Goto a specific slide.\n     * @param {Number} index - index of the slide\n     * @param {Boolean} fromTouch - true if slide function called via touch event or mouse drag\n     * @param {Boolean} fromThumb - true if slide function called via thumbnail click\n     * @param {String} direction - Direction of the slide(next/prev)\n     * @category lGPublicMethods\n     * @example\n     *  const plugin = lightGallery();\n     *  // to go to 3rd slide\n     *  plugin.slide(2);\n     *\n     */\n    LightGallery.prototype.slide = function (index, fromTouch, fromThumb, direction) {\n        var _this = this;\n        var prevIndex = this.getPreviousSlideIndex();\n        this.currentItemsInDom = this.organizeSlideItems(index, prevIndex);\n        // Prevent multiple call, Required for hsh plugin\n        if (this.lGalleryOn && prevIndex === index) {\n            return;\n        }\n        var numberOfGalleryItems = this.galleryItems.length;\n        if (!this.lgBusy) {\n            if (this.settings.counter) {\n                this.updateCurrentCounter(index);\n            }\n            var currentSlideItem = this.getSlideItem(index);\n            var previousSlideItem_1 = this.getSlideItem(prevIndex);\n            var currentGalleryItem = this.galleryItems[index];\n            var videoInfo = currentGalleryItem.__slideVideoInfo;\n            this.outer.attr('data-lg-slide-type', this.getSlideType(currentGalleryItem));\n            this.setDownloadValue(index);\n            if (videoInfo) {\n                var _a = this.mediaContainerPosition, top_3 = _a.top, bottom = _a.bottom;\n                var videoSize = lg_utils_1.default.getSize(this.items[index], this.outer, top_3 + bottom, videoInfo && this.settings.videoMaxSize);\n                this.resizeVideoSlide(index, videoSize);\n            }\n            this.LGel.trigger(lg_events_1.lGEvents.beforeSlide, {\n                prevIndex: prevIndex,\n                index: index,\n                fromTouch: !!fromTouch,\n                fromThumb: !!fromThumb,\n            });\n            this.lgBusy = true;\n            clearTimeout(this.hideBarTimeout);\n            this.arrowDisable(index);\n            if (!direction) {\n                if (index < prevIndex) {\n                    direction = 'prev';\n                }\n                else if (index > prevIndex) {\n                    direction = 'next';\n                }\n            }\n            if (!fromTouch) {\n                this.makeSlideAnimation(direction, currentSlideItem, previousSlideItem_1);\n            }\n            else {\n                this.outer\n                    .find('.lg-item')\n                    .removeClass('lg-prev-slide lg-current lg-next-slide');\n                var touchPrev = void 0;\n                var touchNext = void 0;\n                if (numberOfGalleryItems > 2) {\n                    touchPrev = index - 1;\n                    touchNext = index + 1;\n                    if (index === 0 && prevIndex === numberOfGalleryItems - 1) {\n                        // next slide\n                        touchNext = 0;\n                        touchPrev = numberOfGalleryItems - 1;\n                    }\n                    else if (index === numberOfGalleryItems - 1 &&\n                        prevIndex === 0) {\n                        // prev slide\n                        touchNext = 0;\n                        touchPrev = numberOfGalleryItems - 1;\n                    }\n                }\n                else {\n                    touchPrev = 0;\n                    touchNext = 1;\n                }\n                if (direction === 'prev') {\n                    this.getSlideItem(touchNext).addClass('lg-next-slide');\n                }\n                else {\n                    this.getSlideItem(touchPrev).addClass('lg-prev-slide');\n                }\n                currentSlideItem.addClass('lg-current');\n            }\n            // Do not put load content in set timeout as it needs to load immediately when the gallery is opened\n            if (!this.lGalleryOn) {\n                this.loadContent(index, true);\n            }\n            setTimeout(function () {\n                if (_this.lGalleryOn) {\n                    _this.loadContent(index, true);\n                }\n                // Add title if this.settings.appendSubHtmlTo === lg-sub-html\n                if (_this.settings.appendSubHtmlTo !== '.lg-item') {\n                    _this.addHtml(index);\n                }\n            }, (this.lGalleryOn ? this.settings.speed + 50 : 50) + (fromTouch ? 0 : this.settings.slideDelay));\n            setTimeout(function () {\n                _this.lgBusy = false;\n                previousSlideItem_1.removeClass('lg-slide-progress');\n                _this.LGel.trigger(lg_events_1.lGEvents.afterSlide, {\n                    prevIndex: prevIndex,\n                    index: index,\n                    fromTouch: fromTouch,\n                    fromThumb: fromThumb,\n                });\n            }, (this.lGalleryOn ? this.settings.speed + 100 : 100) + (fromTouch ? 0 : this.settings.slideDelay));\n        }\n        this.index = index;\n    };\n    LightGallery.prototype.updateCurrentCounter = function (index) {\n        this.getElementById('lg-counter-current').html(index + 1 + '');\n    };\n    LightGallery.prototype.updateCounterTotal = function () {\n        this.getElementById('lg-counter-all').html(this.galleryItems.length + '');\n    };\n    LightGallery.prototype.getSlideType = function (item) {\n        if (item.__slideVideoInfo) {\n            return 'video';\n        }\n        else if (item.iframe) {\n            return 'iframe';\n        }\n        else {\n            return 'image';\n        }\n    };\n    LightGallery.prototype.touchMove = function (startCoords, endCoords, e) {\n        var distanceX = endCoords.pageX - startCoords.pageX;\n        var distanceY = endCoords.pageY - startCoords.pageY;\n        var allowSwipe = false;\n        if (this.swipeDirection) {\n            allowSwipe = true;\n        }\n        else {\n            if (Math.abs(distanceX) > 15) {\n                this.swipeDirection = 'horizontal';\n                allowSwipe = true;\n            }\n            else if (Math.abs(distanceY) > 15) {\n                this.swipeDirection = 'vertical';\n                allowSwipe = true;\n            }\n        }\n        if (!allowSwipe) {\n            return;\n        }\n        var $currentSlide = this.getSlideItem(this.index);\n        if (this.swipeDirection === 'horizontal') {\n            e === null || e === void 0 ? void 0 : e.preventDefault();\n            // reset opacity and transition duration\n            this.outer.addClass('lg-dragging');\n            // move current slide\n            this.setTranslate($currentSlide, distanceX, 0);\n            // move next and prev slide with current slide\n            var width = $currentSlide.get().offsetWidth;\n            var slideWidthAmount = (width * 15) / 100;\n            var gutter = slideWidthAmount - Math.abs((distanceX * 10) / 100);\n            this.setTranslate(this.outer.find('.lg-prev-slide').first(), -width + distanceX - gutter, 0);\n            this.setTranslate(this.outer.find('.lg-next-slide').first(), width + distanceX + gutter, 0);\n        }\n        else if (this.swipeDirection === 'vertical') {\n            if (this.settings.swipeToClose) {\n                e === null || e === void 0 ? void 0 : e.preventDefault();\n                this.$container.addClass('lg-dragging-vertical');\n                var opacity = 1 - Math.abs(distanceY) / window.innerHeight;\n                this.$backdrop.css('opacity', opacity);\n                var scale = 1 - Math.abs(distanceY) / (window.innerWidth * 2);\n                this.setTranslate($currentSlide, 0, distanceY, scale, scale);\n                if (Math.abs(distanceY) > 100) {\n                    this.outer\n                        .addClass('lg-hide-items')\n                        .removeClass('lg-components-open');\n                }\n            }\n        }\n    };\n    LightGallery.prototype.touchEnd = function (endCoords, startCoords, event) {\n        var _this = this;\n        var distance;\n        // keep slide animation for any mode while dragg/swipe\n        if (this.settings.mode !== 'lg-slide') {\n            this.outer.addClass('lg-slide');\n        }\n        // set transition duration\n        setTimeout(function () {\n            _this.$container.removeClass('lg-dragging-vertical');\n            _this.outer\n                .removeClass('lg-dragging lg-hide-items')\n                .addClass('lg-components-open');\n            var triggerClick = true;\n            if (_this.swipeDirection === 'horizontal') {\n                distance = endCoords.pageX - startCoords.pageX;\n                var distanceAbs = Math.abs(endCoords.pageX - startCoords.pageX);\n                if (distance < 0 &&\n                    distanceAbs > _this.settings.swipeThreshold) {\n                    _this.goToNextSlide(true);\n                    triggerClick = false;\n                }\n                else if (distance > 0 &&\n                    distanceAbs > _this.settings.swipeThreshold) {\n                    _this.goToPrevSlide(true);\n                    triggerClick = false;\n                }\n            }\n            else if (_this.swipeDirection === 'vertical') {\n                distance = Math.abs(endCoords.pageY - startCoords.pageY);\n                if (_this.settings.closable &&\n                    _this.settings.swipeToClose &&\n                    distance > 100) {\n                    _this.closeGallery();\n                    return;\n                }\n                else {\n                    _this.$backdrop.css('opacity', 1);\n                }\n            }\n            _this.outer.find('.lg-item').removeAttr('style');\n            if (triggerClick &&\n                Math.abs(endCoords.pageX - startCoords.pageX) < 5) {\n                // Trigger click if distance is less than 5 pix\n                var target = lgQuery_1.$LG(event.target);\n                if (_this.isPosterElement(target)) {\n                    _this.LGel.trigger(lg_events_1.lGEvents.posterClick);\n                }\n            }\n            _this.swipeDirection = undefined;\n        });\n        // remove slide class once drag/swipe is completed if mode is not slide\n        setTimeout(function () {\n            if (!_this.outer.hasClass('lg-dragging') &&\n                _this.settings.mode !== 'lg-slide') {\n                _this.outer.removeClass('lg-slide');\n            }\n        }, this.settings.speed + 100);\n    };\n    LightGallery.prototype.enableSwipe = function () {\n        var _this = this;\n        var startCoords = {};\n        var endCoords = {};\n        var isMoved = false;\n        var isSwiping = false;\n        if (this.settings.enableSwipe) {\n            this.$inner.on('touchstart.lg', function (e) {\n                _this.dragOrSwipeEnabled = true;\n                var $item = _this.getSlideItem(_this.index);\n                if ((lgQuery_1.$LG(e.target).hasClass('lg-item') ||\n                    $item.get().contains(e.target)) &&\n                    !_this.outer.hasClass('lg-zoomed') &&\n                    !_this.lgBusy &&\n                    e.targetTouches.length === 1) {\n                    isSwiping = true;\n                    _this.touchAction = 'swipe';\n                    _this.manageSwipeClass();\n                    startCoords = {\n                        pageX: e.targetTouches[0].pageX,\n                        pageY: e.targetTouches[0].pageY,\n                    };\n                }\n            });\n            this.$inner.on('touchmove.lg', function (e) {\n                if (isSwiping &&\n                    _this.touchAction === 'swipe' &&\n                    e.targetTouches.length === 1) {\n                    endCoords = {\n                        pageX: e.targetTouches[0].pageX,\n                        pageY: e.targetTouches[0].pageY,\n                    };\n                    _this.touchMove(startCoords, endCoords, e);\n                    isMoved = true;\n                }\n            });\n            this.$inner.on('touchend.lg', function (event) {\n                if (_this.touchAction === 'swipe') {\n                    if (isMoved) {\n                        isMoved = false;\n                        _this.touchEnd(endCoords, startCoords, event);\n                    }\n                    else if (isSwiping) {\n                        var target = lgQuery_1.$LG(event.target);\n                        if (_this.isPosterElement(target)) {\n                            _this.LGel.trigger(lg_events_1.lGEvents.posterClick);\n                        }\n                    }\n                    _this.touchAction = undefined;\n                    isSwiping = false;\n                }\n            });\n        }\n    };\n    LightGallery.prototype.enableDrag = function () {\n        var _this = this;\n        var startCoords = {};\n        var endCoords = {};\n        var isDraging = false;\n        var isMoved = false;\n        if (this.settings.enableDrag) {\n            this.outer.on('mousedown.lg', function (e) {\n                _this.dragOrSwipeEnabled = true;\n                var $item = _this.getSlideItem(_this.index);\n                if (lgQuery_1.$LG(e.target).hasClass('lg-item') ||\n                    $item.get().contains(e.target)) {\n                    if (!_this.outer.hasClass('lg-zoomed') && !_this.lgBusy) {\n                        e.preventDefault();\n                        if (!_this.lgBusy) {\n                            _this.manageSwipeClass();\n                            startCoords = {\n                                pageX: e.pageX,\n                                pageY: e.pageY,\n                            };\n                            isDraging = true;\n                            // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n                            _this.outer.get().scrollLeft += 1;\n                            _this.outer.get().scrollLeft -= 1;\n                            // *\n                            _this.outer\n                                .removeClass('lg-grab')\n                                .addClass('lg-grabbing');\n                            _this.LGel.trigger(lg_events_1.lGEvents.dragStart);\n                        }\n                    }\n                }\n            });\n            lgQuery_1.$LG(window).on(\"mousemove.lg.global\" + this.lgId, function (e) {\n                if (isDraging && _this.lgOpened) {\n                    isMoved = true;\n                    endCoords = {\n                        pageX: e.pageX,\n                        pageY: e.pageY,\n                    };\n                    _this.touchMove(startCoords, endCoords);\n                    _this.LGel.trigger(lg_events_1.lGEvents.dragMove);\n                }\n            });\n            lgQuery_1.$LG(window).on(\"mouseup.lg.global\" + this.lgId, function (event) {\n                if (!_this.lgOpened) {\n                    return;\n                }\n                var target = lgQuery_1.$LG(event.target);\n                if (isMoved) {\n                    isMoved = false;\n                    _this.touchEnd(endCoords, startCoords, event);\n                    _this.LGel.trigger(lg_events_1.lGEvents.dragEnd);\n                }\n                else if (_this.isPosterElement(target)) {\n                    _this.LGel.trigger(lg_events_1.lGEvents.posterClick);\n                }\n                // Prevent execution on click\n                if (isDraging) {\n                    isDraging = false;\n                    _this.outer.removeClass('lg-grabbing').addClass('lg-grab');\n                }\n            });\n        }\n    };\n    LightGallery.prototype.triggerPosterClick = function () {\n        var _this = this;\n        this.$inner.on('click.lg', function (event) {\n            if (!_this.dragOrSwipeEnabled &&\n                _this.isPosterElement(lgQuery_1.$LG(event.target))) {\n                _this.LGel.trigger(lg_events_1.lGEvents.posterClick);\n            }\n        });\n    };\n    LightGallery.prototype.manageSwipeClass = function () {\n        var _touchNext = this.index + 1;\n        var _touchPrev = this.index - 1;\n        if (this.settings.loop && this.galleryItems.length > 2) {\n            if (this.index === 0) {\n                _touchPrev = this.galleryItems.length - 1;\n            }\n            else if (this.index === this.galleryItems.length - 1) {\n                _touchNext = 0;\n            }\n        }\n        this.outer.find('.lg-item').removeClass('lg-next-slide lg-prev-slide');\n        if (_touchPrev > -1) {\n            this.getSlideItem(_touchPrev).addClass('lg-prev-slide');\n        }\n        this.getSlideItem(_touchNext).addClass('lg-next-slide');\n    };\n    /**\n     * Go to next slide\n     * @param {Boolean} fromTouch - true if slide function called via touch event\n     * @category lGPublicMethods\n     * @example\n     *  const plugin = lightGallery();\n     *  plugin.goToNextSlide();\n     * @see <a href=\"/demos/methods/\">Demo</a>\n     */\n    LightGallery.prototype.goToNextSlide = function (fromTouch) {\n        var _this = this;\n        var _loop = this.settings.loop;\n        if (fromTouch && this.galleryItems.length < 3) {\n            _loop = false;\n        }\n        if (!this.lgBusy) {\n            if (this.index + 1 < this.galleryItems.length) {\n                this.index++;\n                this.LGel.trigger(lg_events_1.lGEvents.beforeNextSlide, {\n                    index: this.index,\n                });\n                this.slide(this.index, !!fromTouch, false, 'next');\n            }\n            else {\n                if (_loop) {\n                    this.index = 0;\n                    this.LGel.trigger(lg_events_1.lGEvents.beforeNextSlide, {\n                        index: this.index,\n                    });\n                    this.slide(this.index, !!fromTouch, false, 'next');\n                }\n                else if (this.settings.slideEndAnimation && !fromTouch) {\n                    this.outer.addClass('lg-right-end');\n                    setTimeout(function () {\n                        _this.outer.removeClass('lg-right-end');\n                    }, 400);\n                }\n            }\n        }\n    };\n    /**\n     * Go to previous slides\n     * @param {Boolean} fromTouch - true if slide function called via touch event\n     * @category lGPublicMethods\n     * @example\n     *  const plugin = lightGallery({});\n     *  plugin.goToPrevSlide();\n     * @see <a href=\"/demos/methods/\">Demo</a>\n     *\n     */\n    LightGallery.prototype.goToPrevSlide = function (fromTouch) {\n        var _this = this;\n        var _loop = this.settings.loop;\n        if (fromTouch && this.galleryItems.length < 3) {\n            _loop = false;\n        }\n        if (!this.lgBusy) {\n            if (this.index > 0) {\n                this.index--;\n                this.LGel.trigger(lg_events_1.lGEvents.beforePrevSlide, {\n                    index: this.index,\n                    fromTouch: fromTouch,\n                });\n                this.slide(this.index, !!fromTouch, false, 'prev');\n            }\n            else {\n                if (_loop) {\n                    this.index = this.galleryItems.length - 1;\n                    this.LGel.trigger(lg_events_1.lGEvents.beforePrevSlide, {\n                        index: this.index,\n                        fromTouch: fromTouch,\n                    });\n                    this.slide(this.index, !!fromTouch, false, 'prev');\n                }\n                else if (this.settings.slideEndAnimation && !fromTouch) {\n                    this.outer.addClass('lg-left-end');\n                    setTimeout(function () {\n                        _this.outer.removeClass('lg-left-end');\n                    }, 400);\n                }\n            }\n        }\n    };\n    LightGallery.prototype.keyPress = function () {\n        var _this = this;\n        lgQuery_1.$LG(window).on(\"keydown.lg.global\" + this.lgId, function (e) {\n            if (_this.lgOpened &&\n                _this.settings.escKey === true &&\n                e.keyCode === 27) {\n                e.preventDefault();\n                if (_this.settings.allowMediaOverlap &&\n                    _this.outer.hasClass('lg-can-toggle') &&\n                    _this.outer.hasClass('lg-components-open')) {\n                    _this.outer.removeClass('lg-components-open');\n                }\n                else {\n                    _this.closeGallery();\n                }\n            }\n            if (_this.lgOpened && _this.galleryItems.length > 1) {\n                if (e.keyCode === 37) {\n                    e.preventDefault();\n                    _this.goToPrevSlide();\n                }\n                if (e.keyCode === 39) {\n                    e.preventDefault();\n                    _this.goToNextSlide();\n                }\n            }\n        });\n    };\n    LightGallery.prototype.arrow = function () {\n        var _this = this;\n        this.getElementById('lg-prev').on('click.lg', function () {\n            _this.goToPrevSlide();\n        });\n        this.getElementById('lg-next').on('click.lg', function () {\n            _this.goToNextSlide();\n        });\n    };\n    LightGallery.prototype.arrowDisable = function (index) {\n        // Disable arrows if settings.hideControlOnEnd is true\n        if (!this.settings.loop && this.settings.hideControlOnEnd) {\n            var $prev = this.getElementById('lg-prev');\n            var $next = this.getElementById('lg-next');\n            if (index + 1 === this.galleryItems.length) {\n                $next.attr('disabled', 'disabled').addClass('disabled');\n            }\n            else {\n                $next.removeAttr('disabled').removeClass('disabled');\n            }\n            if (index === 0) {\n                $prev.attr('disabled', 'disabled').addClass('disabled');\n            }\n            else {\n                $prev.removeAttr('disabled').removeClass('disabled');\n            }\n        }\n    };\n    LightGallery.prototype.setTranslate = function ($el, xValue, yValue, scaleX, scaleY) {\n        if (scaleX === void 0) { scaleX = 1; }\n        if (scaleY === void 0) { scaleY = 1; }\n        $el.css('transform', 'translate3d(' +\n            xValue +\n            'px, ' +\n            yValue +\n            'px, 0px) scale3d(' +\n            scaleX +\n            ', ' +\n            scaleY +\n            ', 1)');\n    };\n    LightGallery.prototype.mousewheel = function () {\n        var _this = this;\n        this.outer.on('mousewheel.lg', function (e) {\n            if (!e.deltaY || _this.galleryItems.length < 2) {\n                return;\n            }\n            if (e.deltaY > 0) {\n                _this.goToPrevSlide();\n            }\n            else {\n                _this.goToNextSlide();\n            }\n            e.preventDefault();\n        });\n    };\n    LightGallery.prototype.isSlideElement = function (target) {\n        return (target.hasClass('lg-outer') ||\n            target.hasClass('lg-item') ||\n            target.hasClass('lg-img-wrap'));\n    };\n    LightGallery.prototype.isPosterElement = function (target) {\n        var playButton = this.getSlideItem(this.index)\n            .find('.lg-video-play-button')\n            .get();\n        return (target.hasClass('lg-video-poster') ||\n            target.hasClass('lg-video-play-button') ||\n            (playButton && playButton.contains(target.get())));\n    };\n    /**\n     * Maximize minimize inline gallery.\n     * @category lGPublicMethods\n     */\n    LightGallery.prototype.toggleMaximize = function () {\n        var _this = this;\n        this.getElementById('lg-maximize').on('click.lg', function () {\n            _this.$container.toggleClass('lg-inline');\n            _this.refreshOnResize();\n        });\n    };\n    LightGallery.prototype.invalidateItems = function () {\n        for (var index = 0; index < this.items.length; index++) {\n            var element = this.items[index];\n            var $element = lgQuery_1.$LG(element);\n            $element.off(\"click.lgcustom-item-\" + $element.attr('data-lg-id'));\n        }\n    };\n    LightGallery.prototype.manageCloseGallery = function () {\n        var _this = this;\n        if (!this.settings.closable)\n            return;\n        var mousedown = false;\n        this.getElementById('lg-close').on('click.lg', function () {\n            _this.closeGallery();\n        });\n        if (this.settings.closeOnTap) {\n            // If you drag the slide and release outside gallery gets close on chrome\n            // for preventing this check mousedown and mouseup happened on .lg-item or lg-outer\n            this.outer.on('mousedown.lg', function (e) {\n                var target = lgQuery_1.$LG(e.target);\n                if (_this.isSlideElement(target)) {\n                    mousedown = true;\n                }\n                else {\n                    mousedown = false;\n                }\n            });\n            this.outer.on('mousemove.lg', function () {\n                mousedown = false;\n            });\n            this.outer.on('mouseup.lg', function (e) {\n                var target = lgQuery_1.$LG(e.target);\n                if (_this.isSlideElement(target) && mousedown) {\n                    if (!_this.outer.hasClass('lg-dragging')) {\n                        _this.closeGallery();\n                    }\n                }\n            });\n        }\n    };\n    /**\n     * Close lightGallery if it is opened.\n     *\n     * @description If closable is false in the settings, you need to pass true via closeGallery method to force close gallery\n     * @return returns the estimated time to close gallery completely including the close animation duration\n     * @category lGPublicMethods\n     * @example\n     *  const plugin = lightGallery();\n     *  plugin.closeGallery();\n     *\n     */\n    LightGallery.prototype.closeGallery = function (force) {\n        var _this = this;\n        if (!this.lgOpened || (!this.settings.closable && !force)) {\n            return 0;\n        }\n        this.LGel.trigger(lg_events_1.lGEvents.beforeClose);\n        lgQuery_1.$LG(window).scrollTop(this.prevScrollTop);\n        var currentItem = this.items[this.index];\n        var transform;\n        if (this.zoomFromOrigin && currentItem) {\n            var _a = this.mediaContainerPosition, top_4 = _a.top, bottom = _a.bottom;\n            var imageSize = lg_utils_1.default.getSize(currentItem, this.outer, top_4 + bottom, this.galleryItems[this.index].__slideVideoInfo &&\n                this.settings.videoMaxSize);\n            transform = lg_utils_1.default.getTransform(currentItem, this.outer, top_4, bottom, imageSize);\n        }\n        if (this.zoomFromOrigin && transform) {\n            this.outer.addClass('lg-closing lg-zoom-from-image');\n            this.getSlideItem(this.index)\n                .addClass('lg-start-end-progress')\n                .css('transition-duration', this.settings.startAnimationDuration + 'ms')\n                .css('transform', transform);\n        }\n        else {\n            this.outer.addClass('lg-hide-items');\n            // lg-zoom-from-image is used for setting the opacity to 1 if zoomFromOrigin is true\n            // If the closing item doesn't have the lg-size attribute, remove this class to avoid the closing css conflicts\n            this.outer.removeClass('lg-zoom-from-image');\n        }\n        // Unbind all events added by lightGallery\n        // @todo\n        //this.$el.off('.lg.tm');\n        this.destroyModules();\n        this.lGalleryOn = false;\n        this.isDummyImageRemoved = false;\n        this.zoomFromOrigin = this.settings.zoomFromOrigin;\n        clearTimeout(this.hideBarTimeout);\n        this.hideBarTimeout = false;\n        lgQuery_1.$LG('html').removeClass('lg-on');\n        this.outer.removeClass('lg-visible lg-components-open');\n        // Resetting opacity to 0 isd required as  vertical swipe to close function adds inline opacity.\n        this.$backdrop.removeClass('in').css('opacity', 0);\n        var removeTimeout = this.zoomFromOrigin && transform\n            ? Math.max(this.settings.startAnimationDuration, this.settings.backdropDuration)\n            : this.settings.backdropDuration;\n        this.$container.removeClass('lg-show-in');\n        // Once the closign animation is completed and gallery is invisible\n        setTimeout(function () {\n            if (_this.zoomFromOrigin && transform) {\n                _this.outer.removeClass('lg-zoom-from-image');\n            }\n            _this.$container.removeClass('lg-show');\n            // Need to remove inline opacity as it is used in the stylesheet as well\n            _this.$backdrop\n                .removeAttr('style')\n                .css('transition-duration', _this.settings.backdropDuration + 'ms');\n            _this.outer.removeClass(\"lg-closing \" + _this.settings.startClass);\n            _this.getSlideItem(_this.index).removeClass('lg-start-end-progress');\n            _this.$inner.empty();\n            if (_this.lgOpened) {\n                _this.LGel.trigger(lg_events_1.lGEvents.afterClose, {\n                    instance: _this,\n                });\n            }\n            if (_this.outer.get()) {\n                _this.outer.get().blur();\n            }\n            _this.lgOpened = false;\n        }, removeTimeout + 100);\n        return removeTimeout + 100;\n    };\n    LightGallery.prototype.initModules = function () {\n        this.plugins.forEach(function (module) {\n            try {\n                module.init();\n            }\n            catch (err) {\n                console.warn(\"lightGallery:- make sure lightGallery module is properly initiated\");\n            }\n        });\n    };\n    LightGallery.prototype.destroyModules = function (destroy) {\n        this.plugins.forEach(function (module) {\n            try {\n                if (destroy) {\n                    module.destroy();\n                }\n                else {\n                    module.closeGallery && module.closeGallery();\n                }\n            }\n            catch (err) {\n                console.warn(\"lightGallery:- make sure lightGallery module is properly destroyed\");\n            }\n        });\n    };\n    /**\n     * Refresh lightGallery with new set of children.\n     *\n     * @description This is useful to update the gallery when the child elements are changed without calling destroy method.\n     *\n     * If you are using dynamic mode, you can pass the modified array of dynamicEl as the first parameter to refresh the dynamic gallery\n     * @see <a href=\"/demos/dynamic-mode/\">Demo</a>\n     * @category lGPublicMethods\n     * @example\n     *  const plugin = lightGallery();\n     *  // Delete or add children, then call\n     *  plugin.refresh();\n     *\n     */\n    LightGallery.prototype.refresh = function (galleryItems) {\n        if (!this.settings.dynamic) {\n            this.invalidateItems();\n        }\n        if (galleryItems) {\n            this.galleryItems = galleryItems;\n        }\n        else {\n            this.galleryItems = this.getItems();\n        }\n        this.updateControls();\n        this.openGalleryOnItemClick();\n        this.LGel.trigger(lg_events_1.lGEvents.updateSlides);\n    };\n    LightGallery.prototype.updateControls = function () {\n        this.addSlideVideoInfo(this.galleryItems);\n        this.updateCounterTotal();\n        this.manageSingleSlideClassName();\n    };\n    /**\n     * Destroy lightGallery.\n     * Destroy lightGallery and its plugin instances completely\n     *\n     * @description This method also calls CloseGallery function internally. Returns the time takes to completely close and destroy the instance.\n     * In case if you want to re-initialize lightGallery right after destroying it, initialize it only once the destroy process is completed.\n     * You can use refresh method most of the times.\n     * @category lGPublicMethods\n     * @example\n     *  const plugin = lightGallery();\n     *  plugin.destroy();\n     *\n     */\n    LightGallery.prototype.destroy = function () {\n        var _this = this;\n        var closeTimeout = this.closeGallery(true);\n        setTimeout(function () {\n            _this.destroyModules(true);\n            if (!_this.settings.dynamic) {\n                _this.invalidateItems();\n            }\n            lgQuery_1.$LG(window).off(\".lg.global\" + _this.lgId);\n            _this.LGel.off('.lg');\n            _this.$container.remove();\n        }, closeTimeout);\n        return closeTimeout;\n    };\n    return LightGallery;\n}());\nexports.LightGallery = LightGallery;\n//# sourceMappingURL=lightgallery.js.map"],"names":["Object","defineProperty","exports","value","lightgallery_1","el","options","LightGallery","lGEvents","afterAppendSlide","init","hasVideo","containerResize","updateSlides","afterAppendSubHtml","beforeOpen","afterOpen","slideItemLoad","beforeSlide","afterSlide","posterClick","dragStart","dragMove","dragEnd","beforeNextSlide","beforePrevSlide","beforeClose","afterClose","rotateLeft","rotateRight","flipHorizontal","flipVertical","lightGalleryCoreSettings","mode","easing","speed","licenseKey","height","width","addClass","startClass","backdropDuration","container","document","body","startAnimationDuration","zoomFromOrigin","hideBarsDelay","showBarsAfter","slideDelay","supportLegacyBrowser","allowMediaOverlap","videoMaxSize","defaultCaptionHeight","ariaLabelledby","ariaDescribedby","closable","swipeToClose","closeOnTap","showCloseIcon","showMaximizeIcon","loop","escKey","keyPress","controls","slideEndAnimation","hideControlOnEnd","mousewheel","getCaptionFromTitleOrAlt","appendSubHtmlTo","subHtmlSelectorRelative","preload","numberOfSlideItemsInDom","showAfterLoad","selector","selectWithin","nextHtml","prevHtml","index","iframeWidth","iframeHeight","download","counter","appendCounterTo","swipeThreshold","enableSwipe","enableDrag","dynamic","dynamicEl","extraProps","exThumbImage","isMobile","undefined","mobileSettings","plugins","__spreadArrays","this","s","i","il","arguments","length","r","Array","k","a","j","jl","convertToData","lgQuery_1","defaultDynamicOptions","attr","replace","charAt","toLowerCase","slice","g","toUpperCase","utils","getSize","spacing","defaultLgSize","lgSize","$LG","isResponsiveSizes","split","wWidth","window","innerWidth","size_1","parseInt","size","cWidth","cHeight","maxWidth","Math","min","maxHeight","ratio","getTransform","top","bottom","imageSize","LGel","find","first","get","containerRect","getBoundingClientRect","wHeight","elWidth","elHeight","elStyle","style","x","offset","left","parseFloat","paddingLeft","borderLeft","scrollLeft","y","paddingTop","borderTop","scrollTop","getIframeMarkup","src","iframeTitle","getImgMarkup","altAttr","srcset","sizes","sources","imgMarkup","sourceTag","JSON","parse","map","source","attrs","keys","forEach","key","getResponsiveSrc","srcItms","rsWidth","rsSrc","_src","splice","push","isImageLoaded","img","complete","naturalWidth","getVideoPosterMarkup","_poster","dummyImg","videoContStyle","_isVideo","youtube","vimeo","getDynamicOptions","items","dynamicElements","availableDynamicOptions","call","item","attributes","specified","dynamicAttr","name","label","indexOf","currentItem","alt","title","thumb","subHtml","test","navigator","userAgent","lgQuery","CustomEvent","event","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","Element","prototype","matches","msMatchesSelector","webkitMatchesSelector","cssVenderPrefixes","_getSelector","firstElement","_getFirstEl","generateUUID","c","random","toString","context","substring","querySelector","querySelectorAll","_each","func","_setCssVendorPrefix","cssProperty","property","group1","isEventMatched","eventName","eventNamespace","filter","e","every","getAttribute","setAttribute","eq","parent","parentElement","removeAttr","removeAttribute","wrap","className","wrapper","createElement","parentNode","insertBefore","removeChild","appendChild","classNames","classList","add","removeClass","remove","hasClass","contains","hasAttribute","attribute","toggleClass","css","_this","on","events","listener","isArray","eventListeners","addEventListener","once","off","removeEventListener","trigger","customEvent","dispatchEvent","load","url","fetch","then","res","innerHTML","html","append","insertAdjacentHTML","prepend","empty","documentElement","pageYOffset","pageXOffset","rect","bodyMarginLeft","marginLeft","currentStyle","getComputedStyle","clientWidth","paddingRight","clientHeight","paddingBottom","__assign","assign","t","n","p","hasOwnProperty","apply","lg_utils_1","lg_settings_1","lg_events_1","lgId","element","lgOpened","lGalleryOn","lgBusy","currentItemsInDom","prevScrollTop","isDummyImageRemoved","dragOrSwipeEnabled","mediaContainerPosition","generateSettings","buildModules","settings","galleryItems","getItems","normalizeSettings","validateLicense","default","addSlideVideoInfo","buildStructure","instance","setTimeout","triggerPosterClick","arrow","openGalleryOnItemClick","_loop_1","this_1","$element","uuid","preventDefault","currentItemIndex","openGallery","plugin","console","warn","error","getSlideItem","getSlideItemId","getIdName","id","getElementById","manageSingleSlideClassName","outer","$container","subHtmlCont","addClasses","containerClassName","closeIcon","maximizeIcon","template","$lgComponents","$backdrop","$inner","$content","$toolbar","outerClassNames","refreshOnResize","hideBars","manageCloseGallery","toggleMaximize","initModules","videoInfo","__slideVideoInfo","getMediaContainerPosition","_a","top_1","currentImageSize","resizeVideoSlide","imgStyle","getDummyImgStyles","lgVideoStyle","getVideoContStyle","currentSrc","updateControls","_index","some","galleryItem","itemIndex","organizeSlideItems","loadContent","updateCurrentCounter","closeGallery","children","focus","itemsToBeInsertedToDom","getItemsToBeInsertedToDom","addHtml","transform","setMediaContainerPosition","timeout","currentSlide_1","slide","captionHeight","thumbContainer","clearTimeout","hideBarTimeout","initPictureFill","$img","picturefill","elements","counterHtml","subHtmlUrl","fL","currentSlide","getDummyImageContent","$currentSlide","$currentItem","_dummyImgSrc","dummyImgContent","setImgMarkup","currentGalleryItem","onLgObjectLoad","$el","delay","dummyImageLoaded","handleLgObjectLoad","isVideo","video","html5","match","wistia","rec","poster","_html5Video","responsive","srcDyItms","iframe","top_2","videoSize","markup","isFirstSlide_1","hasStartAnimation","delay_1","html5Video","hasPoster","isFirstSlide","_speed","mediaObject","loadContentOnLoad","prevIndex","numberOfItems","possibleNumberOfItems","max","prevIndexItem","_element","idx","numberOfExistingItems","getPreviousSlideIndex","currentItemId","setDownloadValue","downloadUrl","$download","makeSlideAnimation","direction","currentSlideItem","previousSlideItem","fromTouch","fromThumb","numberOfGalleryItems","previousSlideItem_1","getSlideType","top_3","arrowDisable","touchPrev","touchNext","updateCounterTotal","touchMove","startCoords","endCoords","distanceX","pageX","distanceY","pageY","allowSwipe","swipeDirection","abs","setTranslate","offsetWidth","gutter","opacity","innerHeight","scale","touchEnd","distance","triggerClick","distanceAbs","goToNextSlide","goToPrevSlide","target","isPosterElement","isMoved","isSwiping","$item","targetTouches","touchAction","manageSwipeClass","isDraging","_touchNext","_touchPrev","_loop","keyCode","$prev","$next","xValue","yValue","scaleX","scaleY","deltaY","isSlideElement","playButton","invalidateItems","mousedown","force","top_4","destroyModules","removeTimeout","blur","module","err","destroy","refresh","closeTimeout"],"sourceRoot":""}