/*! For license information please see page.js.LICENSE.txt */
(self.webpackChunksakurairo_scripts=self.webpackChunksakurairo_scripts||[]).push([[768],{782:function(){var e=[".bili",".menhera",".tieba"];window.motionSwitch=function(t){for(var n=0;n<e.length;n++)document.querySelector(e[n]+"-bar").classList.remove("on-hover"),document.querySelector(e[n]+"-container").style.display="none";document.querySelector(t+"-bar").classList.add("on-hover"),document.querySelector(t+"-container").style.display="block"},window.grin=function(e,t,n,r){var o;switch(t){case"custom":e=n+e+r;break;case"Img":e="[img]"+e+"[/img]";break;case"Math":e=" {{"+e+"}} ";break;case"tieba":e=" ::"+e+":: ";break;default:e=" :"+e+": "}if(!document.getElementById("comment")||"textarea"!=document.getElementById("comment").type)return!1;if(o=document.getElementById("comment"),document.selection)o.focus(),sel=document.selection.createRange(),sel.text=e,o.focus();else if(o.selectionStart||"0"==o.selectionStart){var a=o.selectionStart,i=o.selectionEnd,s=i;o.value=o.value.substring(0,a)+e+o.value.substring(i,o.value.length),s+=e.length,o.focus(),o.selectionStart=s,o.selectionEnd=s}else o.value+=e,o.focus()}},1682:function(e,t,n){Object.create;Object.create;var r=n(8487),o=n(2346);const a="sakurairo_prefer_cdn",i=[["https://cdn.jsdelivr.net/npm/","@","/",""],["https://unpkg.com/","@","/",""]];const s=function(){const e=localStorage.getItem(a);if(!e)return 0;{const t=parseInt(e);if(isNaN(t)||t>=i.length)return localStorage.removeItem(a),0}}(),c={raw:i[s]},l=(e,t,n="latest")=>String.raw(c,t,n,e);function u(e){const t=i[s][0];if(e.match(t))return!0}let m;async function d(){if(mashiro_option.baguetteBoxON){m||(m=(0,r.loadCSS)(l("dist/baguetteBox.min.css","baguettebox.js","1.11.1")));const{default:e}=await n.e(731).then(n.t.bind(n,5731,23));e.run(".entry-content",{captions:function(e){return e.getElementsByTagName("img")[0].alt},ignoreClass:"fancybox"})}else if(mashiro_option.fancybox){if(m||(m=(0,r.loadCSS)(l("dist/jquery.fancybox.min.css","@fancyapps/fancybox","3.5.7"))),!(window.jQuery instanceof Function||window.$ instanceof Function)){const e=await n.e(755).then(n.t.bind(n,9755,23));window.jQuery=e.default,window.$=e.default}n.e(155).then(n.t.bind(n,4155,23))}else if(mashiro_option.lightGallery){const{default:e}=await n.e(192).then(n.bind(n,5192)),t=mashiro_option.lightGallery,{plugins:o}=t,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["plugins"]);(0,r.loadCSS)(l("css/lightgallery-bundle.min.css","lightgallery","2.3.0")),e(document.querySelector(".entry-content"),Object.assign({plugins:o&&(await Promise.allSettled(o.map((e=>n(8508)(`./${e}/lg-${e}.es5.js`))))).map((e=>"fulfilled"==e.status?e.value.default:console.error("加载lightGallery的插件时出错啦！",e.reason)))},a))}}function f(){!function(){const e=document.getElementsByClassName("collapseButton");if(e.length>0){const t=e=>{(0,o.wy)(e.target.parentNode.parentNode.parentNode.querySelector(".xContent"))};for(const n of e)n.addEventListener("click",t)}}(),d(),async function(){document.getElementsByTagName("math").length>0&&("MathJax"in window||(window.MathJax={svg:{fontCache:"global"},startup:{typeset:!1},chtml:{fontURL:l("es5/output/chtml/fonts/woff-v2","mathjax","2.3.0"),mathmlSpacing:!0}}),await n.e(490).then(n.t.bind(n,2490,23)),window.MathJax.typeset())}()}(0,o.Cd)((function(e=3e4){let t=0,n=0;const r=new PerformanceObserver(((e,r)=>{for(const r of e.getEntries())if(u(r.name)){n++;const{transferSize:e}=r;0==e&&t++}}));r.observe({entryTypes:["resource"]}),setTimeout((()=>{if(r.disconnect(),t/n>.7){const e=s+1;localStorage.setItem(a,(e>=i.length?0:e).toString())}}),e)}));var g=n(19),p=n(3415),h=(n(782),n(2568)),v=n.n(h);const y=(e,t=80)=>"https://"+Poi.gravatar_url+"/"+v()(e)+".jpg?s="+t+"&d=mm";function b(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function w(){var e=!1,t=document.querySelector("input#author"),n=document.querySelector("input#qq"),r=document.querySelector("input#email"),a=document.querySelector("input#url"),i=document.querySelector(".qq-check"),s=document.querySelector(".gravatar-check"),c=document.querySelector("div.comment-user-avatar img");if(null!=t){localStorage.getItem("user_qq")||localStorage.getItem("user_qq_email")||localStorage.getItem("user_author")||(n.value=t.value=r.value=a.value=""),localStorage.getItem("user_avatar")&&localStorage.getItem("user_qq")&&localStorage.getItem("user_qq_email")&&(c.setAttribute("src",localStorage.getItem("user_avatar")),t.value=localStorage.getItem("user_author"),r.value=localStorage.getItem("user_qq")+"@qq.com",n.value=localStorage.getItem("user_qq"),mashiro_option.qzone_autocomplete&&(a.value="https://user.qzone.qq.com/"+localStorage.getItem("user_qq")),n.value&&(i.style.display="block",s.style.display="none"));var l=r.value;t.addEventListener("blur",(function(){var u=t.value;if(/^[1-9]\d{4,9}$/.test(u)){var m=function(){n.value="",i.style.display="none",s.style.display="block",c.setAttribute("src",y(r.value,80)),localStorage.setItem("user_qq",""),localStorage.setItem("user_email",r.value),localStorage.setItem("user_avatar",y(r.value,80))};fetch((0,o.bf)(mashiro_option.qq_api_url,{qq:u})).then(function(){var o,d=(o=regeneratorRuntime.mark((function o(d){var f;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!d.ok){o.next=28;break}return o.prev=1,o.next=4,d.json();case 4:f=o.sent,t.value=f.name,r.value=u.trim()+"@qq.com",mashiro_option.qzone_autocomplete&&(a.value="https://user.qzone.qq.com/"+u.trim()),c.setAttribute("src","https://q2.qlogo.cn/headimg_dl?dst_uin="+u+"&spec=100"),e=!0,n.value=u.trim(),n.value&&(i.style.display="block",s.style.display="none"),localStorage.setItem("user_author",f.name),localStorage.setItem("user_qq",u),localStorage.setItem("is_user_qq","yes"),localStorage.setItem("user_qq_email",u+"@qq.com"),localStorage.setItem("user_email",u+"@qq.com"),l=r.value,c.setAttribute("src",f.avatar),localStorage.setItem("user_avatar",f.avatar),o.next=26;break;case 22:o.prev=22,o.t0=o.catch(1),console.warn(o.t0),m();case 26:o.next=29;break;case 28:m();case 29:case"end":return o.stop()}}),o,null,[[1,22]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=o.apply(e,t);function i(e){b(a,n,r,i,s,"next",e)}function s(e){b(a,n,r,i,s,"throw",e)}i(void 0)}))});return function(e){return d.apply(this,arguments)}}())}})),localStorage.getItem("user_avatar")&&localStorage.getItem("user_email")&&"no"==localStorage.getItem("is_user_qq")&&!localStorage.getItem("user_qq_email")&&(c.setAttribute("src",localStorage.getItem("user_avatar")),r.value=localStorage.getItem("user_mail"),n.value="",n.value||(i.style.display="none",s.style.display="block")),r.addEventListener("blur",(function(){var t=r.value;0!=e&&l==t||""==t||(c.setAttribute("src",y(t,80)),localStorage.setItem("user_avatar",y(t,80)),localStorage.setItem("user_email",t),localStorage.setItem("user_qq_email",""),localStorage.setItem("is_user_qq","no"),n.value="",n.value||(i.style.display="none",s.style.display="block"))})),localStorage.getItem("user_url")&&(a.value=localStorage.getItem("user_url")),a.addEventListener("blur",(function(){var e=a.value;a.value=e,localStorage.setItem("user_url",e)})),localStorage.getItem("user_author")&&(t.value=localStorage.getItem("user_author")),t.addEventListener("blur",(function(){var e=t.value;t.value=e,localStorage.setItem("user_author",e)}))}}const _={respondId:"",moveForm:function(e,t,n){const r=document.getElementById(e),o=document.getElementById(n),a=document.getElementById("cancel-comment-reply-link"),i=document.getElementById("comment_parent");if(this.respondId=n,!document.getElementById("wp-temp-form-div")){const e=document.createElement("div");e.id="wp-temp-form-div",e.style.display="none",o.parentNode.insertBefore(e,o)}if(r)r.parentNode.insertBefore(o,r.nextSibling);else{const e=document.getElementById("wp-temp-form-div");document.getElementById("comment_parent").value="0",e.parentNode.insertBefore(o,e),e.remove()}const s=document.getElementById("respond");window.scrollTo({top:s.getBoundingClientRect().top+window.pageYOffset-s.clientTop-100,behavior:"smooth"}),i.value=t,a.style.display="",a.onclick=function(e){var t=_,n=document.getElementById("wp-temp-form-div"),r=document.getElementById(t.respondId);return document.getElementById("comment_parent").value="0",n&&r&&(n.parentNode.insertBefore(r,n),n.remove()),this.style.display="none",this.onclick=null,!1};try{document.getElementById("comment").focus()}catch(e){}return!1}};var S,E,q=_,k=n(785);function I(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){x(a,r,o,i,s,"next",e)}function s(e){x(a,r,o,i,s,"throw",e)}i(void 0)}))}}var T={autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",contenteditable:"false",design:"by Mashiro"};function j(e,t){if(e.children[0]){var n="text",r=e.children[0].className.match(/language-(\w+)/i);for(var o in r&&(n=r[1]),e.classList.add("highlight-wrap"),T)e.setAttribute(o,T[o]);t.setAttribute("data-rel",n.toUpperCase())}}function A(){return C.apply(this,arguments)}function C(){return(C=B(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.hljs){e.next=7;break}return e.next=4,Promise.all([n.e(857),n.e(128),n.e(980),n.e(49),n.e(82),n.e(930),n.e(529),n.e(420),n.e(223),n.e(302),n.e(587)]).then(n.bind(n,637));case 4:return window.hljs=e.sent.default,e.next=7,n.e(241).then(n.t.bind(n,5241,23));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.warn(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var N=function(e){var t=e.target;if(t.classList.contains("highlight-wrap")){if(t.classList.contains("code-block-fullscreen"))t.remove();else{var n=t.cloneNode(!0);n.classList.toggle("code-block-fullscreen"),document.body.append(n)}document.documentElement.classList.toggle("code-block-fullscreen-html-scroll")}};function P(){document.body.removeEventListener("click",N)}function M(e,t){return R.apply(this,arguments)}function R(){return(R=B(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A();case 3:for(r=0;r<n.length;r++)hljs.highlightElement(n[r]);for(o=0;o<t.length;o++)j(t[o],n[o]);hljs.initLineNumbersOnLoad(),document.body.addEventListener("click",N),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.warn(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var O=null!=(S=null==(E=mashiro_option.code_highlight_prism)?void 0:E.autoload_path)?S:l("","prismjs","1.25.0"),H=void 0,U=function(){var e,t,n=null!=(e=null==(t=mashiro_option.code_highlight_prism)?void 0:t.theme)?e:{},r=n.light,o=n.dark,a={light:null!=r?r:"themes/prism.min.css",dark:null!=o?o:"themes/prism-tomorrow.min.css"};for(var i in a)a[i]=new URL(a[i],O).toString();return a}();function z(e){var t=e?U.dark:U.light;if(H){if(H.href!==t){var n=(0,r.loadCSS)(t);n.addEventListener("load",(function(){H.remove(),H=n}))}}else H=(0,r.loadCSS)(t)}var F=function(e){z(e.detail)},$=function(){return document.removeEventListener("darkmode",F)};function D(){return G.apply(this,arguments)}function G(){return(G=B(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.Prism){e.next=9;break}return z((0,k.N2)()),document.addEventListener("darkmode",F),(0,r.loadCSS)(new URL("plugins/toolbar/prism-toolbar.min.css",O).toString()),(0,r.loadCSS)(new URL("plugins/previewers/prism-previewers.min.css",O).toString()),e.next=8,n.e(27).then(n.bind(n,5027));case 8:Prism.plugins.autoloader.languages_path=new URL("components/",O).toString();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.warn(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function J(){return(0,r.loadCSS)(new URL("plugins/line-numbers/prism-line-numbers.min.css",O).toString()),n.e(759).then(n.t.bind(n,8759,23))}function W(){return(0,r.loadCSS)(new URL("plugins/match-braces/prism-match-braces.min.css",O).toString()),n.e(873).then(n.t.bind(n,7873,23))}function X(e){return Y.apply(this,arguments)}function Y(){return(Y=B(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D();case 3:n=!1,r=!1,mashiro_option.code_highlight_prism.line_number_all&&(document.querySelector(".entry-content").classList.add("line-numbers"),n=!0),o=I(t),e.prev=7,o.s();case 9:if((a=o.n()).done){e.next=18;break}if((i=a.value).parentElement.classList.contains("line-numbers")&&(n=!0),!i.classList.contains("match-braces")){e.next=16;break}if(r=!0,1!=n){e.next=16;break}return e.abrupt("break",18);case 16:e.next=9;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(7),o.e(e.t0);case 23:return e.prev=23,o.f(),e.finish(23);case 26:return e.next=28,Promise.all([n&&J(),r&&W()]);case 28:s=I(t);try{for(s.s();!(c=s.n()).done;)l=c.value,Prism.highlightElement(l)}catch(e){s.e(e)}finally{s.f()}Prism.plugins.fileHighlight&&Prism.plugins.fileHighlight.highlight(),e.next=36;break;case 33:e.prev=33,e.t1=e.catch(0),console.warn(e.t1);case 36:case"end":return e.stop()}}),e,null,[[0,33],[7,20,23,26]])})))).apply(this,arguments)}var Q=n(1470);const Z=e=>{const t=e.target;if(t===document.querySelector("#bangumi-pagination a")){if(e.preventDefault(),e.stopPropagation(),t.classList.contains("loading"))return;t.classList.add("loading"),t.textContent="",fetch(t.dataset.href+"&_wpnonce="+Poi.nonce,{method:"POST"}).then((async e=>{const t=await e.json();if(!e.ok)throw Error(`Error，Status：${e.status}`);document.getElementById("bangumi-pagination").remove(),document.querySelector(".row").insertAdjacentHTML("beforeend",t),(0,g.m)()})).catch((e=>{console.error(e),(0,p.f)(e),t.classList.remove("loading"),t.innerHTML='<i class="fa fa-exclamation-triangle" aria-hidden="true"></i> ERROR '}))}};function K(){const e=document.getElementsByTagName("section");let t=!1;for(let n=0;n<e.length;n++)if(e[n].classList.contains("bangumi")){t=!0;break}t&&document.addEventListener("click",Z)}function V(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ee(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function te(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){te(a,r,o,i,s,"next",e)}function s(e){te(a,r,o,i,s,"throw",e)}i(void 0)}))}}function re(){return oe.apply(this,arguments)}function oe(){return(oe=ne(regeneratorRuntime.mark((function e(){var t,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementsByTagName("pre"),r=document.querySelectorAll("pre code"),t.length){e.next=9;break}e.t0=mashiro_option.code_highlight,e.next="hljs"===e.t0?5:"prism"===e.t0?7:9;break;case 5:return P(),e.abrupt("return");case 7:return $(),e.abrupt("return");case 9:e.t1=mashiro_option.code_highlight,e.next="hljs"===e.t1?12:"prism"===e.t1?15:"custom"===e.t1?18:19;break;case 12:return e.next=14,M(t,r);case 14:return e.abrupt("break",20);case 15:return e.next=17,X(r);case 17:return e.abrupt("break",20);case 18:return e.abrupt("return");case 19:console.warn("mashiro_option.code_highlight这咋填的是个".concat(mashiro_option.code_highlight,"啊🤔"));case 20:if(!(r.length>0)){e.next=28;break}for(o=0;o<r.length;o++)r[o].setAttribute("id","code-block-"+o),r[o].insertAdjacentHTML("afterend",'<a class="copy-code" href="javascript:" data-clipboard-target="#code-block-'+o+'" title="'+(0,Q.__)("拷贝代码")+'"><i class="fa fa-clipboard" aria-hidden="true"></i>');return e.next=25,n.e(152).then(n.t.bind(n,2152,23));case 25:a=e.sent,new(0,a.default)(".copy-code");case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){document.getElementsByClassName("comment_inline_img").length&&document.getElementsByClassName("comments-main")[0].addEventListener("click",(function(e){e.target.classList.contains("comment_inline_img")&&window.open(e.target.src)}))}function ie(){document.getElementsByClassName("emoji-item").length&&document.querySelector(".menhera-container").addEventListener("click",(function(e){e.target.classList.contains("emoji-item")&&grin(e.target.innerText,"custom","`","` ")}))}function se(){var e="commentwrap",t=document.getElementById("commentform");if(t){var n=!1;t.addEventListener("submit",(function(t){if(t.stopPropagation(),t.preventDefault(),!n){var r=(0,p.f)((0,Q.__)("提交中...."),!0),o=new FormData(this);o.append("action","ajax_comment"),n=!0,fetch(Poi.ajaxurl,{method:this.attributes.method.value,body:o}).then(function(){var t=ne(regeneratorRuntime.mark((function t(n){var r,o,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.text();case 2:r=t.sent,n.ok?(Array.from(document.getElementsByTagName("textarea")).forEach((function(e){return e.value=""})),o=document.getElementById("cancel-comment-reply-link"),a=document.getElementById("wp-temp-form-div"),i=document.getElementById(q.respondId),"0"!=document.getElementById("comment_parent").value?document.getElementById("respond").insertAdjacentHTML("beforebegin",'<ol class="children">'+r+"</ol>"):document.getElementsByClassName(e).length?"asc"==Poi.order?document.getElementsByClassName("commentwrap")[1].insertAdjacentHTML("beforeend",r):document.getElementsByClassName("commentwrap")[1].insertAdjacentHTML("afterbegin",r):"bottom"==Poi.formpostion?document.getElementById("respond").insertAdjacentHTML("beforebegin",'<ol class="'+e+'">'+r+"</ol>"):document.getElementById("respond").insertAdjacentHTML("afterend",'<ol class="'+e+'">'+r+"</ol>"),(0,p.f)((0,Q.__)("提交成功")),document.dispatchEvent(new CustomEvent("ajax_comment_complete")),o.style.display="none",o.onclick=null,document.getElementById("comment_parent").value="0",a&&i&&(a.parentNode.insertBefore(i,a),a.remove())):(0,p.f)(null!=r?r:"HTTP"+n.status+":"+n.statusText);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){(0,p.f)(e)})).finally((function(){r.remove(),n=!1}))}}))}}function ce(){var e=document.getElementsByClassName("sm"),t=document.querySelector(".comments-main");e.length&&t&&("new"==Poi.reply_link_version&&t.addEventListener("click",(function(e){if(e.target.classList.contains("comment-reply-link")){e.preventDefault(),e.stopPropagation();var t=e.target.getAttribute("data-commentid");q.moveForm("comment-"+t,t,"respond",this.getAttribute("data-postid"))}})),t.addEventListener("click",(function(e){var t=e.target.parentNode;if(t.classList.contains("sm")){var n=(0,Q.__)("您真的要设为私密吗？");if(1==confirm(n)){if(t.classList.contains("private_now"))return alert((0,Q.__)("您之前已设过私密评论")),!1;t.classList.add("private_now");var r=t.getAttribute("data-idp"),o=t.getAttribute("data-actionp"),a=t.getElementsByClassName("has_set_private")[0],i="action=siren_private&p_id="+r+"&p_action="+o,s=new XMLHttpRequest;return s.onreadystatechange=function(){4==this.readyState&&200==this.status&&(a.innerHTML=s.responseText)},s.open("POST","/wp-admin/admin-ajax.php",!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(i),!1}}})))}function le(){var e=document.querySelector(".toc-container"),t=document.querySelector(".site-content");if(e&&t){var n=function(){e.style.height=Math.min(t.getBoundingClientRect().height,document.documentElement.offsetHeight-e.offsetTop)+"px"};n(),window.addEventListener("resize",n,{passive:!0})}}function ue(e){if(!(document.body.clientWidth<=1200))if(document.querySelector("div.have-toc")||document.querySelector("div.has-toc")){if(e&&document.getElementsByClassName("toc").length>0){for(var t=n.e(866).then(n.t.bind(n,2866,23)),r="sakurairo"==mashiro_option.entry_content_style?document.querySelector("article.type-post")?document.querySelector("div.pattern-attachment")?-75:200:375:window.innerHeight/2,o=document.querySelectorAll(".entry-content,.links"),a=new Set,i=1,s=0;s<o.length;s++){var c,l=V(o[s].querySelectorAll("h1,h2,h3,h4,h5"));try{for(l.s();!(c=l.n()).done;){var u=c.value,m=encodeURIComponent(u.innerText.replace(" ","-"));a.has(m)?u.id="toc-head-"+i++:(u.id=m,a.add(m))}}catch(e){l.e(e)}finally{l.f()}}t.then((function(e){e.default.init({tocSelector:".toc",contentSelector:[".entry-content",".links"],headingSelector:"h1,h2,h3,h4,h5",headingsOffset:r-window.innerHeight/2,onClick:null})}))}}else{var d=document.getElementsByClassName("toc-container")[0];d&&(d.remove(),d=null)}}function me(){var e=document.getElementById("emotion-toggle");e&&e.addEventListener("click",(function(){document.querySelector(".emotion-toggle-off").classList.toggle("emotion-hide"),document.querySelector(".emotion-toggle-on").classList.toggle("emotion-show"),document.querySelector(".emotion-box").classList.toggle("emotion-box-show")}))}function de(){var e=document.querySelector(".form-submit #submit");if(null!=e)if(mashiro_option.comment_upload_img){var t,n;e.insertAdjacentHTML("afterend",'<div class="insert-image-tips popup"><i class="fa fa-picture-o" aria-hidden="true"></i><span class="insert-img-popuptext" id="uploadTipPopup">上传图片</span></div><input id="upload-img-file" type="file" accept="image/*" multiple="multiple" class="insert-image-button">'),t=document.getElementsByClassName("insert-image-tips")[0],(n=document.getElementById("upload-img-file"))&&n.addEventListener("change",(function(){var e=this;if(this.files.length>10)return(0,p.f)((0,Q.__)("每次上传上限为10张")),0;for(var n=0;n<this.files.length;n++)if(this.files[n].size>=5242880)return void alert((0,Q._$)("图片上传大小限制为5 MB\n\n「{0}」\n\n这张图太大啦~请重新上传噢！",this.files[n].name));for(var r=function(n){var r=e.files[n],a=new FormData,i=new XMLHttpRequest;a.append("cmt_img_file",r),i.addEventListener("loadstart",(function(){t.innerHTML='<i class="fa fa-spinner rotating" aria-hidden="true"></i>',(0,p.f)((0,Q.__)("上传中..."))})),i.open("POST",(0,o.bf)(Poi.api+"sakura/v1/image/upload"),!0),i.send(a),i.onreadystatechange=function(){if(4!=i.readyState||200!=i.status&&304!=i.status)4==i.readyState&&(t.innerHTML='<i class="fa fa-times" aria-hidden="true" style="color:red"></i>',alert((0,Q.__)("上传失败，请重试.")),setTimeout((function(){t.innerHTML='<i class="fa fa-picture-o" aria-hidden="true"></i>'}),1e3));else{t.innerHTML='<i class="fa fa-check" aria-hidden="true"></i>',setTimeout((function(){t.innerHTML='<i class="fa fa-picture-o" aria-hidden="true"></i>'}),1e3);var e=JSON.parse(i.responseText);if(200==e.status){var n=e.proxy;document.getElementById("upload-img-show").insertAdjacentHTML("afterend",'<img class="lazyload upload-image-preview" src="https://cdn.jsdelivr.net/gh/Fuukei/Public_Repository@latest/vision/theme/colorful/load/inload.svg" data-src="'+n+'" onclick="window.open(\''+n+'\')" onerror="imgError(this)" />'),(0,g.m)(),(0,p.f)((0,Q.__)("图片上传成功~")),grin(n,type="Img")}else(0,p.f)((0,Q._$)("上传失败！\n文件名: {0}\ncode: {1}\n{2}",r.name,e.status,e.message),3e3)}}},a=0;a<this.files.length;a++)r(a)}));var r=document.getElementById("upload-img-file"),a=document.getElementsByClassName("insert-image-tips")[0],i=document.getElementById("uploadTipPopup");r&&(r.addEventListener("mouseenter",(function(){a.classList.toggle("insert-image-tips-hover"),i.classList.toggle("show")})),r.addEventListener("mouseleave",(function(){a.classList.toggle("insert-image-tips-hover"),i.classList.toggle("show")})))}else e.style.width="100%"}function fe(){(0,g.m)(),re(),ae(),document.getElementById("upload-img-show").innerHTML=""}function ge(){f(),ce()}window.addEventListener("popstate",ge),ae(),re(),K(),ce(),ie(),me(),ue(!0),document.querySelectorAll(".comt-addsmilies").forEach((function(e){e.addEventListener("click",(function(){"block"==e.stlye.display?e.style.display="none":e.style.display="block"}))})),document.querySelectorAll(".comt-smilies a").forEach((function(e){e.addEventListener("click",(function(){e.parentNode.style.display="none"}))})),document.addEventListener("ajax_comment_complete",fe),document.addEventListener("pjax:complete",(function(){try{de(),f(),K(),ue(!0),ae(),w(),ce(),ie(),re(),me(),se(),le()}catch(e){console.warn(e)}})),(0,o.Cd)((function(){f(),se(),document.body.addEventListener("click",(function(e){if(e.target.parentNode==document.getElementById("comments-navi")&&"a"==e.target.nodeName.toLowerCase()){e.preventDefault(),e.stopPropagation();var t=e.target,n=t.pathname,r=new XMLHttpRequest;r.open("GET",t.getAttribute("href"),!0),r.responseType="document",r.onloadstart=function(){var e=document.getElementById("comments-navi"),t=document.querySelector("ul.commentwrap"),n=document.getElementById("loading-comments"),r=document.getElementById("comments-list-title");e.remove(),t.remove(),n.style.display="block",(0,o.wy)(n,500,"show"),window.scrollTo({top:r.getBoundingClientRect().top+window.pageYOffset-r.clientTop-65,behavior:"smooth"})},r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){var e=r.response,t=e.querySelector("ul.commentwrap"),a=e.getElementById("comments-navi"),i=document.getElementById("loading-comments");(0,o.wy)(i,200,"hide"),document.getElementById("loading-comments").insertAdjacentHTML("afterend",t.outerHTML),document.querySelector("ul.commentwrap").insertAdjacentHTML("afterend",a.outerHTML),(0,g.m)(),window.gtag&&gtag("config",Poi.google_analytics_id,{page_path:n}),re(),ae();var s=document.querySelector("ul.commentwrap");window.scrollTo({top:s&&s.getBoundingClientRect().top+window.pageYOffset-s.clientTop-200,behavior:"smooth"})}},r.send()}})),w(),de(),le()}))},487:function(e){var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},1012:function(e){var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var o=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?n.push(t.charAt(o>>>6*(3-a)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,o=0;r<e.length;o=++r%4)0!=o&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(r))>>>6-2*o);return n}},e.exports=n},8738:function(e){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},8508:function(e,t,n){var r={"./autoplay/lg-autoplay.es5.js":[8509,8],"./comment/lg-comment.es5.js":[8080,238],"./fullscreen/lg-fullscreen.es5.js":[2508,846],"./hash/lg-hash.es5.js":[1185,649],"./mediumZoom/lg-medium-zoom.es5.js":[7180,400],"./pager/lg-pager.es5.js":[6220,359],"./relativeCaption/lg-relative-caption.es5.js":[823,515],"./rotate/lg-rotate.es5.js":[4671,893],"./share/lg-share.es5.js":[627,642],"./thumbnail/lg-thumbnail.es5.js":[1997,725],"./video/lg-video.es5.js":[2523,568],"./zoom/lg-zoom.es5.js":[2869,719]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(r)},o.id=8508,e.exports=o},2568:function(e,t,n){var r,o,a,i,s;r=n(1012),o=n(487).utf8,a=n(8738),i=n(487).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?i.stringToBytes(e):o.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),c=8*e.length,l=1732584193,u=-271733879,m=-1732584194,d=271733878,f=0;f<n.length;f++)n[f]=16711935&(n[f]<<8|n[f]>>>24)|4278255360&(n[f]<<24|n[f]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var g=s._ff,p=s._gg,h=s._hh,v=s._ii;for(f=0;f<n.length;f+=16){var y=l,b=u,w=m,_=d;l=g(l,u,m,d,n[f+0],7,-680876936),d=g(d,l,u,m,n[f+1],12,-389564586),m=g(m,d,l,u,n[f+2],17,606105819),u=g(u,m,d,l,n[f+3],22,-1044525330),l=g(l,u,m,d,n[f+4],7,-176418897),d=g(d,l,u,m,n[f+5],12,1200080426),m=g(m,d,l,u,n[f+6],17,-1473231341),u=g(u,m,d,l,n[f+7],22,-45705983),l=g(l,u,m,d,n[f+8],7,1770035416),d=g(d,l,u,m,n[f+9],12,-1958414417),m=g(m,d,l,u,n[f+10],17,-42063),u=g(u,m,d,l,n[f+11],22,-1990404162),l=g(l,u,m,d,n[f+12],7,1804603682),d=g(d,l,u,m,n[f+13],12,-40341101),m=g(m,d,l,u,n[f+14],17,-1502002290),l=p(l,u=g(u,m,d,l,n[f+15],22,1236535329),m,d,n[f+1],5,-165796510),d=p(d,l,u,m,n[f+6],9,-1069501632),m=p(m,d,l,u,n[f+11],14,643717713),u=p(u,m,d,l,n[f+0],20,-373897302),l=p(l,u,m,d,n[f+5],5,-701558691),d=p(d,l,u,m,n[f+10],9,38016083),m=p(m,d,l,u,n[f+15],14,-660478335),u=p(u,m,d,l,n[f+4],20,-405537848),l=p(l,u,m,d,n[f+9],5,568446438),d=p(d,l,u,m,n[f+14],9,-1019803690),m=p(m,d,l,u,n[f+3],14,-187363961),u=p(u,m,d,l,n[f+8],20,1163531501),l=p(l,u,m,d,n[f+13],5,-1444681467),d=p(d,l,u,m,n[f+2],9,-51403784),m=p(m,d,l,u,n[f+7],14,1735328473),l=h(l,u=p(u,m,d,l,n[f+12],20,-1926607734),m,d,n[f+5],4,-378558),d=h(d,l,u,m,n[f+8],11,-2022574463),m=h(m,d,l,u,n[f+11],16,1839030562),u=h(u,m,d,l,n[f+14],23,-35309556),l=h(l,u,m,d,n[f+1],4,-1530992060),d=h(d,l,u,m,n[f+4],11,1272893353),m=h(m,d,l,u,n[f+7],16,-155497632),u=h(u,m,d,l,n[f+10],23,-1094730640),l=h(l,u,m,d,n[f+13],4,681279174),d=h(d,l,u,m,n[f+0],11,-358537222),m=h(m,d,l,u,n[f+3],16,-722521979),u=h(u,m,d,l,n[f+6],23,76029189),l=h(l,u,m,d,n[f+9],4,-640364487),d=h(d,l,u,m,n[f+12],11,-421815835),m=h(m,d,l,u,n[f+15],16,530742520),l=v(l,u=h(u,m,d,l,n[f+2],23,-995338651),m,d,n[f+0],6,-198630844),d=v(d,l,u,m,n[f+7],10,1126891415),m=v(m,d,l,u,n[f+14],15,-1416354905),u=v(u,m,d,l,n[f+5],21,-57434055),l=v(l,u,m,d,n[f+12],6,1700485571),d=v(d,l,u,m,n[f+3],10,-1894986606),m=v(m,d,l,u,n[f+10],15,-1051523),u=v(u,m,d,l,n[f+1],21,-2054922799),l=v(l,u,m,d,n[f+8],6,1873313359),d=v(d,l,u,m,n[f+15],10,-30611744),m=v(m,d,l,u,n[f+6],15,-1560198380),u=v(u,m,d,l,n[f+13],21,1309151649),l=v(l,u,m,d,n[f+4],6,-145523070),d=v(d,l,u,m,n[f+11],10,-1120210379),m=v(m,d,l,u,n[f+2],15,718787259),u=v(u,m,d,l,n[f+9],21,-343485551),l=l+y>>>0,u=u+b>>>0,m=m+w>>>0,d=d+_>>>0}return r.endian([l,u,m,d])})._ff=function(e,t,n,r,o,a,i){var s=e+(t&n|~t&r)+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,n,r,o,a,i){var s=e+(t&r|n&~r)+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,n,r,o,a,i){var s=e+(t^n^r)+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,n,r,o,a,i){var s=e+(n^(t|~r))+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?i.bytesToString(n):r.bytesToHex(n)}}},function(e){var t;t=1682,e(e.s=t)}]);
//# sourceMappingURL=page.js.map