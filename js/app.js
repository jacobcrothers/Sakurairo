/*! For license information please see app.js.LICENSE.txt */
(()=>{var e,t,n,o,s,i={4790:()=>{window.imgError=function(e,t){switch(t){case 1:e.src="https://view.moezx.cc/images/2017/12/30/Transparent_Akkarin.th.jpg";break;case 2:e.src="https://sdn.geekzu.org/avatar/?s=80&d=mm&r=g";break;default:e.src="https://view.moezx.cc/images/2018/05/13/image-404.png"}},window.cmt_showPopup=function(e){let t=e.querySelector("#thePopup");t.classList.add("show"),e.querySelector("input").onblur=()=>{t.classList.remove("show")}},window.coverVideo=function(){let e=document.getElementById("coverVideo"),t=document.getElementById("coverVideo-btn");if(e.paused){e.play();try{t.innerHTML='<i class="fa fa-pause" aria-hidden="true"></i>'}catch{}}else{e.pause();try{t.innerHTML='<i class="fa fa-play" aria-hidden="true"></i>'}catch{}}},window.killCoverVideo=function(){var e=document.getElementById("coverVideo"),t=document.getElementById("coverVideo-btn");if(e.paused);else{e.pause();try{t.innerHTML='<i class="fa fa-play" aria-hidden="true"></i>'}catch(e){}}},window.mail_me=function(){var e="mailto:"+mashiro_option.email_name+"@"+mashiro_option.email_domain;window.open(e)},window.headertop_down=function(){let e=document.getElementById("content").getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:e,behavior:"smooth"})}},8487:function(e,t,n){var o;o=void 0!==n.g?n.g:this,t.loadCSS=function(e,t,n,s){var i,a=o.document,r=a.createElement("link");if(t)i=t;else{var c=(a.body||a.getElementsByTagName("head")[0]).childNodes;i=c[c.length-1]}var l=a.styleSheets;if(s)for(var d in s)s.hasOwnProperty(d)&&r.setAttribute(d,s[d]);r.rel="stylesheet",r.href=e,r.media="only x",function e(t){if(a.body)return t();setTimeout((function(){e(t)}))}((function(){i.parentNode.insertBefore(r,t?i:i.nextSibling)}));var u=function(e){for(var t=r.href,n=l.length;n--;)if(l[n].href===t)return e();setTimeout((function(){u(e)}))};function m(){r.addEventListener&&r.removeEventListener("load",m),r.media=n||"all"}return r.addEventListener&&r.addEventListener("load",m),r.onloadcssdefined=u,u(m),r}},7648:(e,t,n)=>{n.d(t,{m:()=>i});const o={src:"data-src",srcset:"data-srcset",selector:".lazyload",root:null,rootMargin:"0px",threshold:0};class s{constructor(e,t){this.observer=null,this.settings=Object.assign(Object.assign({},o),t),this.images=e||document.querySelectorAll(this.settings.selector),this.init()}init(){if(!IntersectionObserver)return void this.loadImages();const e=this;let t={root:this.settings.root,rootMargin:this.settings.rootMargin,threshold:[this.settings.threshold]};this.observer=new IntersectionObserver((function(t){Array.prototype.forEach.call(t,(function(t){if(t.isIntersecting){e.observer.unobserve(t.target);let n=t.target.getAttribute(e.settings.src),o=t.target.getAttribute(e.settings.srcset);"img"===t.target.tagName.toLowerCase()?(n&&(t.target.src=n),o&&(t.target.srcset=o)):t.target.style.backgroundImage="url("+n+")"}}))}),t),this.images.forEach((t=>{e.observer.observe(t)}))}loadAndDestroy(){this.settings&&(this.loadImages(),this.destroy())}loadImages(){if(!this.settings)return;const e=this;Array.prototype.forEach.call(this.images,(function(t){let n=t.getAttribute(e.settings.src),o=t.getAttribute(e.settings.srcset);"img"===t.tagName.toLowerCase()?(n&&(t.src=n),o&&(t.srcset=o)):t.style.backgroundImage="url('"+n+"')"}))}destroy(){this.settings&&(this.observer.disconnect(),this.settings=null)}}const i=(e,t)=>new s(e,t)},5990:(e,t,n)=>{function o(e,t={},n=!0){const o=new URL(e),{searchParams:s}=o;for(const[e,n]of Object.entries(t))s.set(e,n);return n&&s.set("_wpnonce",Poi.nonce),o.toString()}n.d(t,{Z:()=>o})},6589:(e,t,n)=>{function o(){const e=document.getElementsByClassName("butterBar");if(e.length>0)for(let t=0;t<e.length;t++)e[t].remove()}function s(e,t){o();const n=document.createElement("div");n.classList.add("butterBar","butterBar--center");const s=document.createElement("p");return s.classList.add("butterBar-message"),s.innerHTML=e,n.appendChild(s),document.body.appendChild(n),!0!==t&&setTimeout((()=>{o()}),"number"==typeof t?t:6e3),n}n.d(t,{f:()=>s})},6520:(e,t,n)=>{n.d(t,{N2:()=>i,B3:()=>l,Lg:()=>d,q1:()=>g});const o=window.matchMedia("(prefers-color-scheme:dark)");let s=!1;const i=()=>s;function a(e){console.log("夜间模式"+(e?"开启":"关闭")),e!==s&&(document.dispatchEvent(new CustomEvent("darkmode",{detail:e})),s=e)}function r(){localStorage.getItem("dark")||(o.matches&&mashiro_option.darkmode?l():d())}function c(e){e==m()?localStorage.removeItem("dark"):1==e?localStorage.setItem("dark","1"):localStorage.setItem("dark","0")}function l(e){document.documentElement.style.backgroundColor="#333",document.getElementsByClassName("site-content")[0].style.backgroundColor="#333",document.body.classList.add("dark"),e&&c(!0),a(!0)}function d(e){document.documentElement.style.backgroundColor="",document.getElementsByClassName("site-content")[0].style.backgroundColor="rgba(255, 255, 255, .8)",document.body.classList.remove("dark"),document.body.classList.remove("dynamic"),a(!1),e&&c(!1)}function u(){const e=new Date;return e.getHours()>21||e.getHours()<7}function m(){switch(mashiro_option.dm_strategy){case"time":return u();case"client":return o.matches;case"eien":return!0;default:return u()}}function g(){const e=localStorage.getItem("dark");e?"1"==e?l():d():m()&&mashiro_option.darkmode?l():d()}"client"===mashiro_option.dm_strategy&&(o.removeEventListener?o.removeEventListener("change",r):o.removeListener(r),o.addEventListener?o.addEventListener("change",r):o.addListener(r))},5082:(e,t,n)=>{n.d(t,{NB:()=>o,Cd:()=>s,wy:()=>i,VV:()=>a});const o=e=>{let t=!1;return(...n)=>{if(!t){t=!0;try{const o=e(...n);return o instanceof Promise?o.finally((()=>t=!1)):t=!1,o}catch(e){console.warn(e),t=!1}}}},s=function(e){if("loading"!==document.readyState)return e();document.addEventListener("DOMContentLoaded",e,!1)};function i(e,t=1e3,n="",o){let s=e;s.status=s.status||getComputedStyle(s,null).display;const i="none"!=s.status;1==i&&"show"==n||0==i&&"hide"==n||(s.status=i?"none":"block",s.style.transition="height "+t/1e3+"s",s.style.overflow="hidden",clearTimeout(s.tagTimer),s.tagTimer=s.tagTimer||null,s.style.display="block",s.tagHeight=s.tagHeight||s.clientHeight+"px",s.style.display="",s.style.height=i?s.tagHeight:"0px",setTimeout((()=>{s.style.height=i?"0px":s.tagHeight}),0),s.tagTimer=setTimeout((()=>{s.style.display=i?"none":"block",s.style.transition="",s.style.overflow="",s.style.height="",s.status=s.tagHeight=null}),t),o&&o())}const a=(e,t)=>e<t?e:t},655:(e,t,n)=>{n.d(t,{mG:()=>o});function o(e,t,n,o){return new(n||(n=Promise))((function(s,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function r(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}c((o=o.apply(e,t||[])).next())}))}}},a={};function r(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return i[e].call(n.exports,n,n.exports,r),n.exports}r.m=i,e=[],r.O=(t,n,o,s)=>{if(!n){var i=1/0;for(l=0;l<e.length;l++){for(var[n,o,s]=e[l],a=!0,c=0;c<n.length;c++)(!1&s||i>=s)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(a=!1,s<i&&(i=s));a&&(e.splice(l--,1),t=o())}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[n,o,s]},r.F={},r.E=e=>{Object.keys(r.F).map((t=>{r.F[t](e)}))},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var s=Object.create(null);r.r(s);var i={};t=t||[null,n({}),n([]),n(n)];for(var a=2&o&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,r.d(s,i),s},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>e+".js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},s="sakurairo-scripts:",r.l=(e,t,n,i)=>{if(o[e])o[e].push(t);else{var a,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==s+n){a=u;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",s+n),a.src=e),o[e]=[t];var m=(t,n)=>{a.onerror=a.onload=null,clearTimeout(g);var s=o[e];if(delete o[e],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((e=>e(n))),t)return t(n)},g=setTimeout(m.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=m.bind(null,a.onerror),a.onload=m.bind(null,a.onload),c&&document.head.appendChild(a)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={143:0};r.f.j=(t,n)=>{var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var s=new Promise(((n,s)=>o=e[t]=[n,s]));n.push(o[2]=s);var i=r.p+r.u(t),a=new Error;r.l(i,(n=>{if(r.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var s=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",a.name="ChunkLoadError",a.type=s,a.request=i,o[1](a)}}),"chunk-"+t,t)}},r.F.j=t=>{if(!r.o(e,t)||void 0===e[t]){e[t]=null;var n=document.createElement("link");r.nc&&n.setAttribute("nonce",r.nc),n.rel="prefetch",n.as="script",n.href=r.p+r.u(t),document.head.appendChild(n)}},r.O.j=t=>0===e[t];var t=(t,n)=>{var o,s,[i,a,c]=n,l=0;for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(c)var d=c(r);for(t&&t(n);l<i.length;l++)s=i[l],r.o(e,s)&&e[s]&&e[s][0](),e[i[l]]=0;return r.O(d)},n=self.webpackChunksakurairo_scripts=self.webpackChunksakurairo_scripts||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.O(0,[143],(()=>r.E(844)),5),(()=>{var e=r(655);function t(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function n(e,n){const o=indexedDB.open(e);o.onupgradeneeded=()=>o.result.createObjectStore(n);const s=t(o);return(e,t)=>s.then((o=>t(o.transaction(n,e).objectStore(n))))}let o;function s(){return o||(o=n("keyval-store","keyval")),o}const i=n("sakurairo","cache"),a=e=>function(e,n=s()){return n("readonly",(n=>t(n.get(e))))}(e,i),c=(e,n)=>function(e,n,o=s()){return o("readwrite",(o=>(o.put(n,e),t(o.transaction))))}(e,n,i),l=e=>function(e,n=s()){return n("readwrite",(n=>(n.delete(e),t(n.transaction))))}(e,i);let d=1,u="";const m=document.querySelector(".centerbg"),g=mashiro_option.site_bg_as_cover?e=>{document.body.style.backgroundImage=`url(${e})`}:m?e=>{m.style.backgroundImage=`url(${e})`}:()=>{};function h(e=!1){const t=new URL(mashiro_option.cover_api);return document.body.clientWidth<860&&1==mashiro_option.random_graphs_mts?(t.searchParams.set("type","mobile"),t.toString()+(e?"&"+d:"")):t.toString()+(e?(""===t.search?"?":"&")+d:"")}const p=mashiro_option.cache_cover?(t=!1)=>(0,e.mG)(void 0,void 0,void 0,(function*(){return a("cover").then((e=>e?"object"==typeof e&&e instanceof Blob?(URL.revokeObjectURL(u),u="",u=URL.createObjectURL(e),u):void 0:h(t))).finally((()=>{!function(t=!1){(0,e.mG)(this,void 0,void 0,(function*(){try{const e=yield fetch(h(t));if(e.ok){const t=yield e.blob();c("cover",t)}}catch(e){"object"==typeof e&&e instanceof TypeError&&(console.warn("你的封面API好像不支持跨域调用,这种情况下缓存是不会生效的哦"),l("cover"))}}))}(t)}))})):h;var f,y=r(5990);let v=null!==(f=mashiro_option.cookie_version_control)&&void 0!==f?f:"";var b=r(6589);const w=["# 商业转载请联系作者获得授权，非商业转载请注明出处。","# For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source.","# 协议(License)：署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0)","# 作者(Author)："+mashiro_option.author_name,"# 链接(URL)："+window.location.href,"# 来源(Source)："+mashiro_option.site_name];function E(e){const t=window.getSelection();if(t){const n=t.toString();n.length>30&&(!function(e,t){e.preventDefault();const n=w.join("<br>")+"<br><br>"+t.replace(/\r\n/g,"<br>"),o=w.join("\n")+"\n\n"+t.toString().replace(/\r\n/g,"\n");if(e.clipboardData)e.clipboardData.setData("text/html",n),e.clipboardData.setData("text/plain",o);else if(window.clipboardData)window.clipboardData.setData("text",o)}(e,n),(0,b.f)("复制成功！<br>Copied to clipboard successfully!",1e3))}}function L(){mashiro_option.clipboardCopyright&&(document.body.removeEventListener("copy",E),document.body.addEventListener("copy",E))}var k=r(8487),_=r(7648),S=(r(4790),r(5082));function B(){console.log("Sakurairo","https://github.com/mirai-mamori/Sakurairo")}function x(e){if(document.documentElement.style.overflowY="unset",0!=mashiro_option.preload_blur)try{return void(e.animate([{filter:"blur(0px)",backdropFilter:"blur(10px)",opacity:1},{backdropFilter:"blur(0px)grayscale(0)",opacity:.1},{opacity:0,filter:"blur(100px)"}],{duration:mashiro_option.preload_blur,fill:"forwards",easing:"ease"}).onfinish=()=>{e.remove()})}catch(e){console.warn(e)}e.classList.add("hide"),e.classList.remove("show"),setTimeout((()=>e.remove()),233)}let I,T;function C(e){return()=>{const{name:t}=e.dataset;t!=localStorage.getItem("font_family")&&("serif"==t?(document.body.clientWidth<=860&&(0,b.f)("将从网络加载字体，流量请注意"),document.body.classList.add("serif"),N("serif"),localStorage.setItem("font_family","serif")):(document.body.classList.remove("serif"),N("sans-serif"),localStorage.setItem("font_family","sans-serif")))}}function q(){const e=localStorage.getItem("font_family");e&&"serif"!=e||document.body.classList.add("serif")}function N(e){(null!=e?e:"sans-serif"==localStorage.getItem("font_family"))?(I.classList.remove("selected"),T.classList.add("selected")):(T.classList.remove("selected"),I.classList.add("selected"))}function O(){const e=(I=document.getElementsByClassName("control-btn-serif")[0],T=document.getElementsByClassName("control-btn-sans-serif")[0],T&&I);e||localStorage.removeItem("font_family"),q(),e&&(N(),I.addEventListener("click",C(I)),T.addEventListener("click",C(T)))}var j=r(6520);const A=(()=>{const e=navigator.userAgent,t=-1!=e.indexOf("Chrome")?/(Chrome)\/(\d+)/i:/(Firefox|Chrome|Version|Opera)\/(\d+)/i,n=e.match(t);return Poi.pjax=n&&parseInt(n[2])>={Firefox:84,Edg:88,Chrome:88,Opera:74,Version:9}[n[1]]&&Poi.pjax,0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")&&function(e,t,n){const o=n?"; expires="+new Date(Date.now()+24*n*60*60*1e3).toUTCString():"";document.cookie=e+v+"="+(t||"")+o+"; path=/"}("su_webp","1",114514),Poi.pjax&&r.e(842).then(r.t.bind(r,8842,23)).then((({default:e})=>new e({selectors:["#page","title",".footer-device","#_mashiro_"],elements:["a:not([target='_top']):not(.comment-reply-link):not(#pagination a):not(#comments-navi a):not(.user-menu-option a):not(.header-user-avatar a):not(.emoji-item):not(.no-pjax)",".search-form",".s-search"],timeout:8e3,history:!0,cacheBust:!1})))})();function P(){if(document.querySelector("article")&&document.querySelector("article").classList.contains("post-list-thumb")){const e=new IntersectionObserver((t=>{t.forEach((t=>{window.IntersectionObserver?t.target.classList.contains("post-list-show")?(t.target.style.willChange="auto",e.unobserve(t.target)):t.isIntersecting&&(t.target.classList.add("post-list-show"),t.target.style.willChange="auto",e.unobserve(t.target)):(t.target.style.willChange="auto",!1===t.target.classList.contains("post-list-show")&&t.target.classList.add("post-list-show"))}))}),{root:null,threshold:[.66]}),t=document.getElementsByClassName("post-list-thumb");for(let n=0;n<t.length;n++)e.observe(t[n])}}function H(){if(!1===mashiro_global.variables.skinSecter){const e=document.querySelector(".pattern-center"),t=document.querySelector(".headertop-bar");e&&(e.classList.remove("pattern-center"),e.classList.add("pattern-center-sakura")),t&&(t.classList.remove("headertop-bar"),t.classList.add("headertop-bar-sakura"))}else{const e=document.querySelector(".pattern-center-sakura"),t=document.querySelector(".headertop-bar-sakura");e&&(e.classList.remove("pattern-center-sakura"),e.classList.add("pattern-center")),t&&(t.classList.remove("headertop-bar-sakura"),t.classList.add("headertop-bar"))}}function M(){const e=document.getElementById("primary");e&&e.addEventListener("contextmenu",(function(e){"img"==e.target.nodeName.toLowerCase()&&(e.preventDefault(),e.stopPropagation())}))}async function D(e){mashiro_global.variables.skinSecter="white-bg"==e||"dark-bg"==e,H();const t=document.body.style.backgroundImage;let n;switch(e){case"white-bg":n=mashiro_option.site_bg_as_cover?await p():mashiro_option.skin_bg0;break;case"diy1-bg":n=mashiro_option.skin_bg1;break;case"diy2-bg":n=mashiro_option.skin_bg2;break;case"diy3-bg":n=mashiro_option.skin_bg3;break;case"diy4-bg":n=mashiro_option.skin_bg4}t!=n&&(document.body.style.backgroundImage=n?`url(${n})`:"")}function R(){const t=document.getElementById("bg-next"),n=document.getElementById("bg-pre");t&&(t.onclick=()=>{!function(){(0,e.mG)(this,void 0,void 0,(function*(){g(yield p(!0)),d++}))}()}),n&&(n.onclick=()=>{!function(){(0,e.mG)(this,void 0,void 0,(function*(){d--,g(yield p(!0))}))}()})}function V(e){let t=document.getElementById("archives");if(null==t)return;let n=t.getElementsByClassName("al_mon");1==e?(t.addEventListener("click",(function(e){e.target.classList.contains("al_mon")&&((0,S.wy)(e.target.nextElementSibling,500),e.preventDefault())})),(0,_.m)()):function(){let e=document.getElementById("al_expand_collapse");e.style.cursor="s-resize";for(let e=0;e<n.length;e++){let t=n[e],o=t.nextElementSibling.getElementsByTagName("li").length;t.style.cursor="s-resize",t.querySelector("#post-num").textContent=o}let o=t.getElementsByClassName("al_post_list"),s=o[0];for(let e=0;e<o.length;e++)(0,S.wy)(o[e],500,"hide",(function(){(0,S.wy)(s,500,"show")}));if(t.addEventListener("click",(function(e){e.target.classList.contains("al_mon")&&((0,S.wy)(e.target.nextElementSibling,500),e.preventDefault())})),document.body.clientWidth>860){for(let e=0;e<o.length;e++){let t=o[e];t.parentNode.addEventListener("mouseover",(function(){return(0,S.wy)(t,500,"show"),!1}))}0;let t=0;e.addEventListener("click",(function(){if(0==t){for(let e=0;e<o.length;e++){let t=o[e];(0,S.wy)(t,500,"show")}t++}else if(1==t){for(let e=0;e<o.length;e++){let t=o[e];(0,S.wy)(t,500,"hide")}t--}}))}}()}function F(){const e=document.getElementById("coverVideo"),t=document.getElementById("coverVideo").getAttribute("data-src");if(Hls.isSupported()){const n=new Hls;n.loadSource(t),n.attachMedia(e),n.on(Hls.Events.MANIFEST_PARSED,(function(){e.play()}))}else e.canPlayType("application/vnd.apple.mpegurl")&&(e.src=t,e.addEventListener("loadedmetadata",(function(){e.play()})))}function z(){let e=document.getElementsByTagName("video")[0];e&&e.classList.contains("hls")&&(mashiro_global.variables.has_hls?F():r.e(631).then(r.t.bind(r,7631,23)).then((e=>{window.Hls=e.default,F(),mashiro_global.variables.has_hls=!0})).catch((e=>console.warn("Hls load failed: ",e))))}mashiro_option.land_at_home||r.e(844).then(r.bind(r,6844)).then((({whileLoaded:e})=>{e()})),(0,k.loadCSS)(mashiro_option.jsdelivr_css_src),(0,k.loadCSS)(mashiro_option.entry_content_style_src),(0,k.loadCSS)("https://at.alicdn.com/t/font_679578_qyt5qzzavdo39pb9.css"),mashiro_global.variables=new function(){this.has_hls=!1,this.skinSecter=!0},M(),V();let U=document.getElementsByClassName("comt-addsmilies");function G(){const e=document.getElementsByTagName("section");let t=!1;for(let n=0;n<e.length;n++)if(e[n].classList.contains("bangumi")){t=!0;break}t&&document.addEventListener("click",(function(e){const t=e.target;if(t===document.querySelector("#bangumi-pagination a")){e.preventDefault(),e.stopPropagation(),t.classList.add("loading"),t.textContent="";const n=new XMLHttpRequest;n.open("POST",t.href+"&_wpnonce="+Poi.nonce,!0),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){let e=JSON.parse(n.responseText),t=document.getElementById("bangumi-pagination"),o=document.getElementsByClassName("row")[0];t.remove(),o.insertAdjacentHTML("beforeend",e)}else t.classList.remove("loading"),t.innerHTML='<i class="fa fa-exclamation-triangle" aria-hidden="true"></i> ERROR '},n.send()}}))}U.length>0&&Array.from(U,(e=>{e.addEventListener("click",(()=>{"block"==e.stlye.display?e.style.display="none":e.style.display="block"}))})),document.querySelectorAll(".comt-smilies a").forEach((e=>{e.addEventListener("click",(()=>{e.parentNode.style.display="none"}))})),L(),mashiro_option.float_player_on&&document.body.clientWidth>860&&r.e(297).then(r.bind(r,3297)).then((({aplayerInit:e})=>e())),setTimeout((function(){!function(){let e=document.getElementById("secondary");if(document.body.clientWidth>860){let t=document.querySelector(".show-hide");t&&t.addEventListener("click",(function(){e&&e.classList.toggle("active")}))}else e&&e.remove()}()}),100);const Y=document.getElementById("bgvideo");function $(){let e=document.getElementById("video-btn");e&&(e.classList.add("video-pause"),e.classList.remove("video-play"),e.style.display="");try{if(document.querySelector(".video-stu").style.bottom="-100px",document.querySelector(".focusinfo").style.top="-999px",mashiro_option.float_player_on)return void r.e(297).then(r.bind(r,3297)).then((({destroyAllAplayer:e})=>{e(),Y.play()}))}catch(e){console.warn(e)}Y.play()}function W(){let e=document.getElementById("video-btn");e&&(e.classList.add("video-play"),e.classList.remove("video-pause"));try{document.querySelector(".focusinfo").style.top="49.3%"}catch{}Y.pause()}function J(){let e=document.getElementsByClassName("video-stu")[0];e.innerHTML="正在载入视频 ...",e.style.bottom="0px";let t=Poi.movies.name.split(","),n=t[Math.floor(Math.random()*t.length)],o=document.getElementById("bgvideo");o.setAttribute("src",Poi.movies.url+"/"+n+".mp4"),o.setAttribute("video-name",n)}function X(){if("auto"==Poi.windowheight){if(document.querySelector("h1.main-title")){const e=document.getElementById("centerbg"),t=document.getElementById("bgvideo");e&&(e.style.height="100vh"),t&&(t.style.minHeight="100vh")}}else document.querySelector(".headertop")&&document.querySelector(".headertop").classList.add("headertop-bar")}function Z(){if(document.querySelector(".headertop")){let e=document.querySelector(".headertop"),t=document.querySelector(".blank");if(document.querySelector(".main-title")){try{t.style.paddingTop="0px"}catch(e){}e.style.height="auto",e.style.display="","open"==Poi.movies.live&&Y&&null!=Y.oncanplay&&document.querySelector(".haslive")&&document.querySelector(".videolive")&&$()}else{try{t.style.paddingTop="75px"}catch(e){}e.style.height="0px",e.style.display="none",function(){if(Y&&null!=Y.oncanplay&&document.querySelector(".haslive")){W();let e=document.getElementsByClassName("video-stu")[0];e.style.bottom="0px",e.innerHTML="已暂停 ..."}}()}}}function K(){let e=document.querySelector(".comments-hidden"),t=document.querySelector(".comments-main");null!=e&&(e.style.display="block",t.style.display="none",e.addEventListener("click",(function(){(0,S.wy)(t,500,"show"),e.style.display="none"})));let n=document.getElementsByClassName("archives");if(n.length>0){for(let e=0;e<n.length;e++)n[e].style.display="none";n[0].style.display="";let e=document.getElementById("archives-temp").getElementsByTagName("h3");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),(0,S.wy)(e.target.nextElementSibling,300)}))}const o=function(){if(document.getElementsByClassName("js-toggle-search")[0].classList.toggle("is-active"),document.getElementsByClassName("js-search")[0].classList.toggle("is-visible"),document.documentElement.style.overflowY="hidden",mashiro_option.live_search){var e=[];r=(0,y.Z)(Poi.api+"sakura/v1/cache_search/json"),null!=sessionStorage.getItem("search")?(a(e=JSON.parse(sessionStorage.getItem("search")),document.getElementById("search-input").value,n),s()):fetch(r).then((async o=>{if(o.ok){const i=await o.text();""!=i&&(sessionStorage.setItem("search",i),a(e=JSON.parse(i),t.value,n),s())}else console.warn("HTTP "+o.status)})).catch((e=>console.warn(e)));var t=document.getElementById("search-input"),n=document.getElementById("PostlistBox").innerHTML,o=null;function s(){const e=document.querySelector(".search_close"),t=document.getElementById("Ty");for(const n of document.getElementsByClassName("ins-selectable"))n.addEventListener("click",(()=>{t.href=n.getAttribute("href"),t.click(),e.click()}))}function i(e,t,n,o,s,i,a){if(e){var r=e.trim().split(" "),c=o.indexOf(r[r.length-1]),l=a.indexOf(r[r.length-1]);o=(o=c<60?o.slice(0,80):o.slice(c-30,c+30)).replace(r[r.length-1],'<mark class="search-keyword"> '+r[r.length-1].toUpperCase()+" </mark>"),a=(a=l<60?a.slice(0,80):a.slice(l-30,l+30)).replace(r[r.length-1],'<mark class="search-keyword"> '+r[r.length-1].toUpperCase()+" </mark>")}return'<div class="ins-selectable ins-search-item" href="'+t+'"><header><i class="fa fa-'+n+'" aria-hidden="true"></i>'+o+'<i class="iconfont icon-'+s+'"> '+i+'</i></header><p class="ins-search-preview">'+a+"</p></div>"}function a(e,t,n){var o,s="",a="",r="",c="",l="",d="",u="",m='<section class="ins-section"><header class="ins-section-header">',g="</section>",h="</header>",p=function(e,t){for(let e=0;e<t.length;e++)-1!=[".","?","*"].indexOf(t[e])&&(t=t.slice(0,e)+"\\"+t.slice(e),e++);return t=t.replace(t,"^(?=.*?"+t+").+$").replace(/\s/g,")(?=.*?"),e.filter((e=>Object.values(e).some((e=>new RegExp(t+"").test(e)))))}(e,t.trim());for(o=0;o<Object.keys(p).length;o++)switch((u=p[o]).type){case"post":a+=i(t,u.link,"file",u.title,"mark",u.comments,u.text);break;case"tag":l+=i("",u.link,"tag",u.title,"none","","");break;case"category":c+=i("",u.link,"folder",u.title,"none","","");break;case"page":r+=i(t,u.link,"file",u.title,"mark",u.comments,u.text);break;case"comment":d+=i(t,u.link,"comment",u.title,"none","",u.text)}a&&(s=s+m+"文章"+h+a+g),r&&(s=s+m+"页面"+h+r+g),c&&(s=s+m+"分类"+h+c+g),l&&(s=s+m+"标签"+h+l+g),d&&(s=s+m+"评论"+h+d+g),document.getElementById("PostlistBox").innerHTML=s}t.oninput=function(){null==o&&clearTimeout(o),o=setTimeout((function(){a(e,t.value,n),s()}),250)}}var r};for(const e of document.getElementsByClassName("js-toggle-search"))e.addEventListener("click",o);const s=document.querySelector(".search_close");s&&s.addEventListener("click",(function(){let e=document.getElementsByClassName("js-search")[0];e.classList.contains("is-visible")&&(document.getElementsByClassName("js-toggle-search")[0].classList.toggle("is-active"),e.classList.toggle("is-visible"),document.documentElement.style.overflowY="unset")}));try{let e=document.getElementById("show-nav");e.addEventListener("click",(function(){if(e.classList.contains("showNav")){e.classList.remove("showNav"),e.classList.add("hideNav");let t=document.querySelector(".site-top .lower nav");t&&t.classList.add("navbar")}else{e.classList.remove("hideNav"),e.classList.add("showNav");let t=document.querySelector(".site-top .lower nav");t&&t.classList.remove("navbar")}})),document.getElementById("loading").addEventListener("click",(function(){let e=document.getElementById("loading");e.classList.add("hide"),e.classList.remove("show")}))}catch(e){}}function Q(){const e=document.querySelector(".site-header");window.addEventListener("scroll",(()=>{(document.documentElement.scrollTop||window.pageYOffset)>0?e.classList.add("yya"):e.classList.remove("yya")}))}const ee=(0,S.NB)((function(){const e=document.location.href,t=document.querySelector("#pagination a");t.classList.add("loading"),t.innerText="",fetch(t.getAttribute("href")+"#main").then((async n=>{const o=await n.text(),s=(new DOMParser).parseFromString(o,"text/html"),i=s.querySelectorAll("#main .post"),a=s.querySelector("#pagination a"),r=a&&a.innerText,c=a&&a.getAttribute("href"),l=document.getElementById("main");if(e!=document.location.href)return;for(let e=0;e<i.length;e++)l.append(i[e]);Poi.pjax&&(await A).refresh(document.querySelector("#content"));const d=document.querySelector("#pagination a"),u=document.querySelector("#add_post span");if(d&&(d.classList.remove("loading"),d.innerText=r),u&&(u.classList.remove("loading"),u.innerText=""),(0,_.m)(),P(),null!=c){t.setAttribute("href",c);let e=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;window.scrollTo({top:e+300,behavior:"smooth"})}else document.getElementById("pagination").innerHTML="<span>很高兴你翻到这里，但是真的没有了...</span>"}))}));function te(){let e;new IntersectionObserver((function(t){if(t[0].intersectionRatio<=0)return;const n=document.querySelector("#pagination a");if(n){const t=n.getAttribute("href"),o=document.getElementById("add_post_time");if(null!=t&&o){const t=document.getElementById("add_post_time").title;"233"!=t&&(console.log("%c 自动加载时倒计时 %c","background:#9a9da2; color:#ffffff; border-radius:4px;","","",t),e=setTimeout((function(){ee()}),1e3*t))}}})).observe(document.querySelector(".footer-device")),document.body.addEventListener("click",(function(t){t.target==document.querySelector("#pagination a")&&(t.preventDefault(),t.stopPropagation(),clearTimeout(e),ee())}))}function ne(){let e=document.querySelector("#moblieGoTop"),t=document.querySelector("#changskin");window.addEventListener("scroll",(()=>{(document.documentElement.scrollTop||document.body.scrollTop)>20?(e.style.transform="scale(1)",t.style.transform="scale(1)"):(e.style.transform="scale(0)",t.style.transform="scale(0)")})),e.onclick=function(){window.scrollTo({top:0,behavior:"smooth"})}}function oe(){if(mashiro_option.yiyan){const e=document.getElementById("footer_yiyan");e&&fetch("https://api.maho.cc/yiyan/").then((async t=>{const n=await t.json();e.innerText=n.hitokoto+"——"+n.from}))}}Poi.pjax&&(document.addEventListener("pjax:send",(()=>{for(const e of document.getElementsByClassName("normal-cover-video"))e.pause(),e.src="",e.load="";document.getElementById("bar").style.width="0%",mashiro_option.NProgressON&&r.e(865).then(r.t.bind(r,4865,23)).then((({default:e})=>{e.start()})),document.body.classList.contains("navOpen")&&(document.body.classList.toggle("navOpen"),document.getElementById("main-container").classList.toggle("open"),document.getElementById("mo-nav").classList.toggle("open"),document.querySelector(".openNav").classList.toggle("open"))})),document.addEventListener("pjax:complete",(function(){X(),oe(),Z(),K(),mashiro_option.land_at_home&&te(),mashiro_option.NProgressON&&r.e(865).then(r.t.bind(r,4865,23)).then((({default:e})=>{e.done()})),function(){M(),q();let e=document.getElementsByTagName("p");for(let t=0;t<e.length;t++)e[t].classList.remove("head-copyright");(0,_.m)();let t=document.getElementsByTagName("div"),n=document.getElementById("to-load-aplayer");n&&n.addEventListener("click",(()=>{for(let e=0;e<t.length;e++)t[e].classList.remove("load-aplayer")}));let o=document.getElementsByClassName("iconflat");0!=o.length&&(o[0].style.width="50px",o[0].style.height="50px");let s=document.getElementsByClassName("openNav");0!=s.length&&(s[0].style.height="50px"),R(),V(),L()}(),P(),re(),z(),H(),G(),Q(),mashiro_option.land_at_home||r.e(844).then(r.bind(r,6844)).then((({whilePjaxComplete:e})=>{e()}));let e=document.getElementById("loading");e&&(e.classList.add("hide"),e.classList.remove("show")),document.querySelector(".js-search.is-visible")&&(document.getElementsByClassName("js-toggle-search")[0].classList.toggle("is-active"),document.getElementsByClassName("js-search")[0].classList.toggle("is-visible"),document.documentElement.style.overflowY="unset")})),document.addEventListener("pjax:success",(function(){window.gtag&&gtag("config",Poi.google_analytics_id,{page_path:window.location.pathname})})),document.addEventListener("pjax:error",(e=>{(0,b.f)("文章加载出错了 HTTP "+e.request.status)})),window.addEventListener("popstate",(function(e){X(),oe(),Z(),K(),V(!0),P()}),!1));let se=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,ie=navigator.userAgent.toLowerCase().indexOf("opera")>-1,ae=navigator.userAgent.toLowerCase().indexOf("msie")>-1;function re(){if(mashiro_option.audio&&(window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext)){let e,t=new AudioContext,n="880 987 1046 987 1046 1318 987 659 659 880 784 880 1046 784 659 659 698 659 698 1046 659 1046 1046 1046 987 698 698 987 987 880 987 1046 987 1046 1318 987 659 659 880 784 880 1046 784 659 698 1046 987 1046 1174 1174 1174 1046 1046 880 987 784 880 1046 1174 1318 1174 1318 1567 1046 987 1046 1318 1318 1174 784 784 880 1046 987 1174 1046 784 784 1396 1318 1174 659 1318 1046 1318 1760 1567 1567 1318 1174 1046 1046 1174 1046 1174 1567 1318 1318 1760 1567 1318 1174 1046 1046 1174 1046 1174 987 880 880 987 880".split(" "),o=0,s=1,i="♪ ♩ ♫ ♬ ♭ € § ¶ ♯".split(" ");document.querySelectorAll(".site-title, #moblieGoTop, .site-branding, .searchbox, .changeSkin-gear, .menu-list li").forEach((a=>{a.addEventListener("mouseenter",(a=>{if(e)return;let r=n[o];r||(o=0,r=n[o]),o+=s;const c=t.createOscillator(),l=t.createGain();c.connect(l),l.connect(t.destination),c.type="sine",c.frequency.value=r,l.gain.setValueAtTime(0,t.currentTime),l.gain.linearRampToValueAtTime(1,t.currentTime+.01),c.start(t.currentTime),l.gain.exponentialRampToValueAtTime(.001,t.currentTime+1),c.stop(t.currentTime+1);const d=Math.round(7*Math.random()),u=a.pageX,m=a.pageY-5;e=document.createElement("b"),e.textContent=i[d],e.style.zIndex="99999",e.style.top=m-100+"px",e.style.left=u+"px",e.style.position="absolute",e.style.color="#FF6EB4",document.body.appendChild(e),e.animate([{top:m+"px"},{opacity:0}],{duration:500}),setTimeout((()=>{e.remove(),e=null}),500),a.stopPropagation()}))}))}}var ce;function le(){document.querySelector(".skin-menu").classList.remove("show"),setTimeout((function(){null!=document.querySelector(".changeSkin-gear")&&(document.querySelector(".changeSkin-gear").style.visibility="visible")}),300)}(se||ie||ae)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",(function(){let e,t=location.hash.substring(1);/^[A-z0-9_-]+$/.test(t)&&(e=document.getElementById(t),e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus()))}),!1),(0,_.m)(),P(),z(),H(),document.body.clientWidth>860&&window.addEventListener("scroll",(()=>{let e=document.documentElement.scrollTop||document.body.scrollTop,t=document.documentElement.scrollHeight||document.body.scrollHeight,n=window.innerHeight,o=parseInt(e/(t-n)*100);document.getElementById("bar").style.width=o+"%";let s=document.querySelector(".toc-container"),i=document.querySelector(".site-content"),a=document.querySelector(".skin-menu");s&&i&&(s.style.height=(0,S.VV)(i.getBoundingClientRect().height,document.documentElement.offsetHeight-s.offsetTop)+"px"),a&&a.classList.remove("show")})),G(),D(null!==(ce=localStorage.getItem("bgImgSetting"))&&void 0!==ce?ce:"white-bg"),(0,j.q1)(),(0,S.Cd)((function(){!function(){(0,e.mG)(this,void 0,void 0,(function*(){if(mashiro_option.site_bg_as_cover){if(m.style.background="#0000","white-bg"!==localStorage.getItem("bgImgSetting"))return}else if(!mashiro_option.land_at_home)return;g(yield p())}))}(),document.querySelectorAll(".menu-list li").forEach((e=>{e.addEventListener("click",(function(){const e=this.id;"dark-bg"==e?(0,j.B3)(!0):((0,j.Lg)(!0),D(e),localStorage.setItem("bgImgSetting",e)),le()}))}));let t=document.querySelector("#changskin"),n=document.querySelector(".skin-menu #close-skinMenu");t&&t.addEventListener("click",(function(){document.querySelector(".skin-menu").classList.toggle("show")})),n&&n.addEventListener("click",(function(){le()})),X(),Z(),Q(),ne(),te(),K(),function(){let e=document.querySelector(".iconflat");e&&e.addEventListener("click",(function(){document.body.classList.toggle("navOpen"),document.getElementById("main-container").classList.toggle("open"),document.getElementById("mo-nav").classList.toggle("open"),document.querySelector(".openNav").classList.toggle("open")}))}(),function(){let e=document.getElementById("video-btn");e&&e.addEventListener("click",(function(){this.classList.contains("loadvideo")?(this.classList.add("video-pause"),this.classList.remove("loadvideo"),J(),Y.oncanplay=function(){$(),document.getElementById("video-add").style.display="block",e.classList.add("videolive","haslive")}):this.classList.contains("video-pause")?(W(),e.classList.remove("videolive"),document.getElementsByClassName("video-stu")[0].style.bottom="0px",document.getElementsByClassName("video-stu")[0].innerHTML="已暂停 ..."):($(),e.classList.add("videolive")),Y.onended=function(){Y.setAttribute("src",""),document.getElementById("video-add").style.display="none",e&&e.classList.add("loadvideo"),e&&e.classList.remove("video-pause","videolive","haslive"),document.querySelector(".focusinfo").style.top="49.3%"}}));const t=document.getElementById("video-add");t&&t.addEventListener("click",(function(){J()}))}(),oe(),R(),O(),re(),function(){const e=document.getElementById("preload");if(e){if("complete"===document.readyState)return x(e);window.addEventListener("load",(()=>{x(e)}))}}(),mashiro_option.land_at_home?B():r.e(844).then(r.bind(r,6844)).then((({whileReady:e})=>{e()})).finally((()=>{B()}))}))})(),r.O()})();
//# sourceMappingURL=app.js.map