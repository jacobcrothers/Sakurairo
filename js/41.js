(()=>{var r={5229:(r,t,e)=>{var a=e(7841);r.exports={name:"lab",min:[0,-100,-100],max:[100,100,100],channel:["lightness","a","b"],alias:["LAB","cielab"],xyz:function(r){var t,e,a,n,o=r[0],i=r[1],s=r[2];return o<=8?n=(e=100*o/903.3)/100*7.787+16/116:(e=100*Math.pow((o+16)/116,3),n=Math.pow(e/100,1/3)),[t=t/95.047<=.008856?t=95.047*(i/500+n-16/116)/7.787:95.047*Math.pow(i/500+n,3),e,a=a/108.883<=.008859?a=108.883*(n-s/200-16/116)/7.787:108.883*Math.pow(n-s/200,3)]}},a.lab=function(r){var t=r[0],e=r[1],a=r[2];return e/=100,a/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(e=e>.008856?Math.pow(e,1/3):7.787*e+16/116)-16,500*(t-e),200*(e-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]}},2409:r=>{r.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},7841:(r,t,e)=>{var a=e(2409),n={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};n.max=n.whitepoint[2].D65,n.rgb=function(r,t){t=t||n.whitepoint[2].E;var e,a,o,i=r[0]/t[0],s=r[1]/t[1],f=r[2]/t[2];return a=-.96924363628087*i+1.87596750150772*s+.041555057407175*f,o=.055630079696993*i+-.20397695888897*s+1.056971514242878*f,e=(e=3.240969941904521*i+-1.537383177570093*s+-.498610760293*f)>.0031308?1.055*Math.pow(e,1/2.4)-.055:e*=12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*=12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*=12.92,[255*(e=Math.min(Math.max(0,e),1)),255*(a=Math.min(Math.max(0,a),1)),255*(o=Math.min(Math.max(0,o),1))]},a.xyz=function(r,t){var e=r[0]/255,a=r[1]/255,o=r[2]/255,i=.21263900587151*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.71516867876775*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)+.072192315360733*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92),s=.019330818715591*e+.11919477979462*a+.95053215224966*o;return[(.41239079926595*e+.35758433938387*a+.18048078840183*o)*(t=t||n.whitepoint[2].E)[0],i*t[1],s*t[2]]},r.exports=n},9847:r=>{r.exports=function(r){function t(r,t,e,a){function n(t){"function"!=typeof self.postMessage?r.ports[0].postMessage(t):self.postMessage(t)}e?("undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",e),n([t,{message:e.message}])):n([t,null,a])}self.addEventListener("message",(function(e){var a=e.data;if(Array.isArray(a)&&2===a.length){var n=a[0],o=a[1];"function"!=typeof r?t(e,n,new Error("Please pass a function into register().")):function(r,e,a,n){var o,i=function(r,t){try{return{res:r(t)}}catch(r){return{err:r}}}(e,n);i.err?t(r,a,i.err):!(o=i.res)||"object"!=typeof o&&"function"!=typeof o||"function"!=typeof o.then?t(r,a,null,i.res):i.res.then((function(e){t(r,a,null,e)}),(function(e){t(r,a,e)}))}(e,r,n,o)}}))}}},t={};function e(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return r[a](o,o.exports,e),o.exports}e.n=r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return e.d(t,{a:t}),t},e.d=(r,t)=>{for(var a in t)e.o(t,a)&&!e.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:t[a]})},e.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),(()=>{var r=e(2409),t=e(7841);e(5229);function a(r,t,e){var a=r[t++]-e[0],n=r[t++]-e[1],o=r[t++]-e[2],i=r[t++]-e[3];return Math.pow(a,2)+Math.pow(n,2)+Math.pow(o,2)+Math.pow(i,2)}function n(r,t){for(var e=[],a=0;a<t;a++)e.push(r);return e}var o=e(9847);e.n(o)()((e=>{const{img:o,k:i,iteration:s}=e,f=function(r,t,e,o){void 0===o&&(o=1);for(var i,s,f,h,p,u=[],c=[],l=[],v=0,M=0;M<t;M++){var m=Math.floor(Math.random()*r.length);c.push(Array.from(r.slice(m,m+4))),l.push(n(0,4)),u.push(n(0,5))}for(;v<e;){for(var w=0;w<r.length;){for(var g=0,y=a(r,w,c[0]),x=1;x<t;x++){var d=a(r,w,c[x]);d<y&&(y=d,g=x)}var b=u[g];b[0]+=r[w++],b[1]+=r[w++],b[2]+=r[w++],b[3]+=r[w++],b[4]++}for(var D=0,A=0;A<t;A++){var z=u[A],E=z[4];if(0==E){var F=Math.floor(Math.random()*r.length);l[A]=Array.from(Array.from(r.slice(F,F+4))),D+=o}else{for(var j=l[A],O=0;O<4;O++)j[O]=z[O]/E;D+=Math.sqrt((f=(i=c[A])[1]-(s=l[A])[1],h=i[2]-s[2],p=i[3]-s[3],Math.pow(i[0]-s[0],2)+Math.pow(f,2)+Math.pow(h,2)+Math.pow(p,2)))}}if(D<=o)return{centroid:l,iteration:v,fit:!0,label:u.map((function(r){return r[4]})),size:r.length};var P=c;c=l,l=P,v++;for(var k=0;k<t;k++){var B=u[k];B[0]=0,B[1]=0,B[2]=0,B[3]=0,B[4]=0}}return{centroid:c,iteration:v,fit:!1,label:u.map((function(r){return r[4]})),size:r.length}}(function(e){for(var a=[],n=0;n<e.length;n+=4){var o=e.slice(n,n+4),i=o[3],s=o.slice(0,3),f=r.xyz(s),h=t.lab(f);a.push.apply(a,h.concat([i]))}return a}(o.data),i,s);return f}))})()})();
//# sourceMappingURL=41.js.map