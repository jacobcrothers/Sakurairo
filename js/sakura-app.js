/*! For license information please see sakura-app.js.LICENSE.txt */
(()=>{var e,t,n,o,a={713:(e,t)=>{"use strict";const n={respondId:"",moveForm:function(e,t,o){const a=document.getElementById(e),s=document.getElementById(o),i=document.getElementById("cancel-comment-reply-link"),l=document.getElementById("comment_parent");let r;if(this.respondId=o,document.getElementById("wp-temp-form-div")||(r=document.createElement("div"),r.id="wp-temp-form-div",r.style.display="none",s.parentNode.insertBefore(r,s)),a)a.parentNode.insertBefore(s,a.nextSibling);else{const e=document.getElementById("wp-temp-form-div");document.getElementById("comment_parent").value="0",e.parentNode.insertBefore(s,e),e.remove()}const c=document.getElementById("respond");window.scrollTo({top:c.getBoundingClientRect().top+window.pageYOffset-c.clientTop-100,behavior:"smooth"}),l.value=t,i.style.display="",i.onclick=function(e){var t=n,o=document.getElementById("wp-temp-form-div"),a=document.getElementById(t.respondId);return document.getElementById("comment_parent").value="0",o&&a&&(o.parentNode.insertBefore(a,o),o.remove()),this.style.display="none",this.onclick=null,!1};try{document.getElementById("comment").focus()}catch(e){}return!1},clearButterbar:function(){const e=document.getElementsByClassName("butterBar");if(e.length>0)for(let t=0;t<e.length;t++)e[t].remove()},createButterbar:function(e,t){const n=this;n.clearButterbar(),document.body.insertAdjacentHTML("beforeend",'<div class="butterBar butterBar--center"><p class="butterBar-message">'+e+"</p></div>"),setTimeout((()=>{n.clearButterbar()}),t>0?t:6e3)}};t.Z=n},37:(e,t)=>{"use strict";const n=["# 商业转载请联系作者获得授权，非商业转载请注明出处。","# For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source.","# 协议(License)：署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0)","# 作者(Author)："+mashiro_option.author_name,"# 链接(URL)："+window.location.href,"# 来源(Source)："+mashiro_option.site_name];function o(e){const t=window.getSelection();if(t){const o=t.toString();o.length>30&&(!function(e,t){e.preventDefault();const o=n.join("<br>")+"<br><br>"+t.replace(/\r\n/g,"<br>"),a=n.join("\n")+"\n\n"+t.toString().replace(/\r\n/g,"\n");if(e.clipboardData)e.clipboardData.setData("text/html",o),e.clipboardData.setData("text/plain",a);else if(window.clipboardData)window.clipboardData.setData("text",a)}(e,o),addComment.createButterbar("复制成功！<br>Copied to clipboard successfully!",1e3))}}t.Z=function(){mashiro_option.clipboardCopyright&&(document.body.removeEventListener("copy",o),document.body.addEventListener("copy",o))}},458:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeCookie=t.getCookie=t.setCookie=t.setVersionCtrl=void 0;let n="";t.setVersionCtrl=function(e){n=e},t.setCookie=function(e,t,o){let a="";o&&(a="; expires="+new Date(Date.now()+24*o*60*60*1e3).toUTCString()),document.cookie=e+n+"="+(t||"")+a+"; path=/"},t.getCookie=function(e){const t=e+n+"=",o=document.cookie.split(";");for(let e=0;e<o.length;e++){let n=o[e];for(;" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null},t.removeCookie=function(e){document.cookie=e+n+"=; Max-Age=-99999999;"}}},s={};function l(e){if(s[e])return s[e].exports;var t=s[e]={exports:{}};return a[e].call(t.exports,t,t.exports,l),t.exports}l.m=a,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"==typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"==typeof n.then)return n}var a=Object.create(null);l.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var i=2&o&&n;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>s[e]=()=>n[e]));return s.default=()=>n,l.d(a,s),a},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>e+".js",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},o="sakurairo-scripts:",l.l=(e,t,a,s)=>{if(n[e])n[e].push(t);else{var i,r;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==o+a){i=u;break}}i||(r=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,l.nc&&i.setAttribute("nonce",l.nc),i.setAttribute("data-webpack",o+a),i.src=e),n[e]=[t];var m=(t,o)=>{i.onerror=i.onload=null,clearTimeout(g);var a=n[e];if(delete n[e],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((e=>e(o))),t)return t(o)},g=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),r&&document.head.appendChild(i)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e})(),(()=>{var e={560:0};l.f.j=(t,n)=>{var o=l.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise(((n,a)=>{o=e[t]=[n,a]}));n.push(o[2]=a);var s=l.p+l.u(t),i=new Error;l.l(s,(n=>{if(l.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",i.name="ChunkLoadError",i.type=a,i.request=s,o[1](i)}}),"chunk-"+t,t)}};var t=(t,n)=>{for(var o,a,[s,i,r]=n,c=0,d=[];c<s.length;c++)a=s[c],l.o(e,a)&&e[a]&&d.push(e[a][0]),e[a]=0;for(o in i)l.o(i,o)&&(l.m[o]=i[o]);for(r&&r(l),t&&t(n);d.length;)d.shift()()},n=self.webpackChunksakurairo_scripts=self.webpackChunksakurairo_scripts||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{const e=l(37).Z;(()=>{const e=navigator.userAgent;let t;t=-1!=e.indexOf("Chrome")?/(Chrome)\/(\d+)/i:/(Firefox|Chrome|Version|Opera)\/(\d+)/i;const n=e.match(t);Poi.pjax=n&&n[2]>={Firefox:84,Edg:88,Chrome:88,Opera:74,Version:9}[n[1]]&&Poi.pjax})(),mashiro_global.variables=new function(){this.has_hls=!1,this.skinSecter=!0},mashiro_global.ini=new function(){this.normalize=function(){lazyload(),r(),B(),D(),k(),y(),document.body.clientWidth>860&&window.addEventListener("scroll",(()=>{let e,t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollHeight||document.body.scrollHeight,o=window.innerHeight,a=parseInt(t/(n-o)*100),s=document.getElementById("bar");switch(s.style.width=a+"%",!0){case a<=19:e="#cccccc";break;case a<=39:e="#50bcb6";break;case a<=59:e="#85c440";break;case a<=79:e="#f2b63c";break;case a<=99:e="#FF0000";break;case 100==a:e="#5aaadb";break;default:e="orange"}s.style.background=e;let i=document.querySelector(".toc-container"),l=document.querySelector(".site-content"),r=document.querySelector(".skin-menu");i&&l&&(i.style.height=l.getBoundingClientRect(outerHeight).height+"px"),r&&r.classList.remove("show")})),j(),T()},this.pjax=function(){q(),r(),B(),D(),k(),y(),j(),T()}};const{setCookie:t,getCookie:n,removeCookie:o,setVersionCtrl:a}=l(458);function s(e,t=1e3,n="",o){let a=e;a.status=a.status||getComputedStyle(a,null).display;const s="none"!=a.status;1==s&&"show"==n||0==s&&"hide"==n||(a.status=s?"none":"block",a.style.transition="height "+t/1e3+"s",a.style.overflow="hidden",clearTimeout(a.tagTimer),a.tagTimer=a.tagTimer||null,a.style.display="block",a.tagHeight=a.tagHeight||a.clientHeight+"px",a.style.display="",a.style.height=s?a.tagHeight:"0px",setTimeout((()=>{a.style.height=s?"0px":a.tagHeight}),0),a.tagTimer=setTimeout((()=>{a.style.display=s?"none":"block",a.style.transition="",a.style.overflow="",a.style.height="",a.status=a.tagHeight=null}),t),o&&o())}function r(){if(document.querySelector("article")&&document.querySelector("article").classList.contains("post-list-thumb")){const e=new IntersectionObserver((t=>{t.forEach((t=>{window.IntersectionObserver?t.target.classList.contains("post-list-show")?(t.target.style.willChange="auto",e.unobserve(t.target)):t.isIntersecting&&(t.target.classList.add("post-list-show"),t.target.style.willChange="auto",e.unobserve(t.target)):(t.target.style.willChange="auto",!1===t.target.classList.contains("post-list-show")&&t.target.classList.add("post-list-show"))}))}),{root:null,threshold:[.66]}),t=document.getElementsByClassName("post-list-thumb");for(let n=0;n<t.length;n++)e.observe(t[n])}}function c(){const e=document.getElementsByTagName("pre"),t=document.querySelectorAll("pre code");if(!e.length)return;function n(n){let o={autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",contenteditable:"false",design:"by Mashiro"},a=e[n].children[0].className,s=a.substr(0,a.indexOf(" ")).replace("language-",""),i=t[n];"hljs"==s.toLowerCase()&&(s=i.className.replace("hljs","")?i.className.replace("hljs",""):"text"),e[n].classList.add("highlight-wrap");for(let t in o)e[n].setAttribute(t,o[t]);i.setAttribute("data-rel",s.toUpperCase())}for(let e=0;e<t.length;e++)hljs.highlightBlock(t[e]);for(let t=0;t<e.length;t++)n(t);hljs.initLineNumbersOnLoad();const o=document.querySelector(".entry-content");o&&o.addEventListener("click",(function(e){e.target.classList.contains("highlight-wrap")&&(e.target.classList.toggle("code-block-fullscreen"),document.getElementsByTagName("html")[0].classList.toggle("code-block-fullscreen-html-scroll"))}))}a(mashiro_option.cookie_version_control),mashiro_global.font_control=new function(){const e=document.getElementsByClassName("control-btn-serif")[0],o=document.getElementsByClassName("control-btn-sans-serif")[0];this.change_font=function(){document.body.classList.contains("serif")?(document.body.classList.remove("serif"),e&&e.classList.remove("selected"),o&&o.classList.remove("selected"),t("font_family","sans-serif",30)):(document.body.classList.add("serif"),e&&e.classList.add("selected"),o&&o.classList.remove("selected"),t("font_family","serif",30),document.body.clientWidth<=860&&addComment.createButterbar("将从网络加载字体，流量请注意"))},this.ini=function(){document.body.clientWidth>860&&(n("font_family")&&"serif"!=n("font_family")||document.body.classList.add("serif")),"sans-serif"==n("font_family")&&(document.body.classList.remove("sans-serif"),e&&e.classList.remove("selected"),o&&o.classList.add("selected"))}},mashiro_global.font_control.ini();try{c()}catch(e){}if("new"==Poi.reply_link_version){let e=document.querySelector(".comments-main");e&&e.addEventListener("click",(function(e){if(e.target.classList.contains("comment-reply-link")){e.preventDefault(),e.stopPropagation();let t=e.target.getAttribute("data-commentid");addComment.moveForm("comment-"+t,t,"respond",this.getAttribute("data-postid"))}}))}const d=function(e){if("complete"===document.readyState)return e();document.addEventListener("DOMContentLoaded",e,!1)};function u(){let e=document.querySelector(".form-submit #submit");if(null==e)return;e.insertAdjacentHTML("afterend",'<div class="insert-image-tips popup"><i class="fa fa-picture-o" aria-hidden="true"></i><span class="insert-img-popuptext" id="uploadTipPopup">上传图片</span></div><input id="upload-img-file" type="file" accept="image/*" multiple="multiple" class="insert-image-button">'),function(){let e=document.getElementsByClassName("insert-image-tips")[0],t=document.getElementById("upload-img-file");t&&t.addEventListener("change",(function(){if(this.files.length>10)return addComment.createButterbar("每次上传上限为10张.<br>10 files max per request."),0;for(let e=0;e<this.files.length;e++)if(this.files[e].size>=5242880)return void alert("图片上传大小限制为5 MB.\n5 MB max per file.\n\n「"+this.files[e].name+"」\n\n这张图太大啦~请重新上传噢！\nThis image is too large~Please reupload!");for(let t=0;t<this.files.length;t++){let n=this.files[t],o=new FormData,a=new XMLHttpRequest;o.append("cmt_img_file",n),a.addEventListener("loadstart",(function(){e.innerHTML='<i class="fa fa-spinner rotating" aria-hidden="true"></i>',addComment.createButterbar("上传中...<br>Uploading...")})),a.open("POST",Poi.api+"sakura/v1/image/upload?_wpnonce="+Poi.nonce,!0),a.send(o),a.onreadystatechange=function(){if(4!=a.readyState||200!=a.status&&304!=a.status)4==a.readyState&&(e.innerHTML='<i class="fa fa-times" aria-hidden="true" style="color:red"></i>',alert("上传失败，请重试.\nUpload failed, please try again."),setTimeout((function(){e.innerHTML='<i class="fa fa-picture-o" aria-hidden="true"></i>'}),1e3));else{e.innerHTML='<i class="fa fa-check" aria-hidden="true"></i>',setTimeout((function(){e.innerHTML='<i class="fa fa-picture-o" aria-hidden="true"></i>'}),1e3);let t=JSON.parse(a.responseText);if(200==t.status){let e=t.proxy;document.getElementById("upload-img-show").insertAdjacentHTML("afterend",'<img class="lazyload upload-image-preview" src="https://cdn.jsdelivr.net/gh/Fuukei/Public_Repository@latest/vision/theme/colorful/load/inload.svg" data-src="'+e+'" onclick="window.open(\''+e+'\')" onerror="imgError(this)" />'),lazyload(),addComment.createButterbar("图片上传成功~<br>Uploaded successfully~"),x(e,type="Img")}else addComment.createButterbar("上传失败！<br>Uploaded failed!<br> 文件名/Filename: "+n.name+"<br>code: "+t.status+"<br>"+t.message,3e3)}}}}))}();let t=document.getElementById("upload-img-file"),n=document.getElementsByClassName("insert-image-tips")[0],o=document.getElementById("uploadTipPopup");t&&(t.addEventListener("mouseenter",(function(){n.classList.toggle("insert-image-tips-hover"),o.classList.toggle("show")})),t.addEventListener("mouseleave",(function(){n.classList.toggle("insert-image-tips-hover"),o.classList.toggle("show")})))}function m(){document.getElementsByClassName("comment_inline_img").length&&document.getElementsByClassName("comments-main")[0].addEventListener("click",(function(e){e.target.classList.contains("comment_inline_img")&&window.open(e.target.src)}))}function g(){document.getElementsByClassName("emoji-item").length&&document.querySelector(".menhera-container").addEventListener("click",(function(e){e.target.classList.contains("emoji-item")&&x(e.target.innerText,"custom","`","` ")}))}function y(){if(!1===mashiro_global.variables.skinSecter){const e=document.querySelector(".pattern-center"),t=document.querySelector(".headertop-bar");e&&(e.classList.remove("pattern-center"),e.classList.add("pattern-center-sakura")),t&&(t.classList.remove("headertop-bar"),t.classList.add("headertop-bar-sakura"))}else{const e=document.querySelector(".pattern-center-sakura"),t=document.querySelector(".headertop-bar-sakura");e&&(e.classList.remove("pattern-center-sakura"),e.classList.add("pattern-center")),t&&(t.classList.remove("headertop-bar-sakura"),t.classList.add("headertop-bar"))}}function f(){let e=n("bgImgSetting");e?document.getElementById(e).click():document.getElementById("white-bg").click()}function v(){const e=document.getElementById("primary");e&&e.addEventListener("contextmenu",(function(e){"img"==e.target.nodeName.toLowerCase()&&(e.preventDefault(),e.stopPropagation())}))}m(),g(),!n("darkcache")&&((new Date).getHours()>21||(new Date).getHours()<7)&&(o("dark"),t("darkcache","cached",.4)),setTimeout((function(){!function(){let e=n("dark"),o=new Date,a=document.body.clientWidth;if(e)"1"==e&&(o.getHours()>=22||o.getHours()<=6)&&mashiro_option.darkmode?(setTimeout((function(){document.getElementById("dark-bg").click()}),100),console.log("夜间模式开启")):("0"==e||o.getHours()<22||o.getHours()>6)&&(a>860?(setTimeout((function(){f()}),100),console.log("夜间模式关闭")):(document.getElementsByTagName("html")[0].style.background="unset",document.body.classList.remove("dark"),document.getElementById("moblieDarkLight").innerHTML='<i class="fa fa-moon-o" aria-hidden="true"></i>',t("dark","0",.33)));else if((o.getHours()>21||o.getHours()<7)&&mashiro_option.darkmode)setTimeout((function(){document.getElementById("dark-bg").click()}),100),console.log("夜间模式开启");else if(a>860)setTimeout((function(){f()}),100),console.log("夜间模式关闭");else{document.getElementsByTagName("html")[0].style.background="unset",document.body.classList.remove("dark");let e=document.getElementById("moblieDarkLight");e&&(e.innerHTML='<i class="fa fa-moon-o" aria-hidden="true"></i>'),t("dark","0",.33)}}()}),100),v(),d((function(){!function(){const e=document.querySelector(".centerbg");if(e){const t=document.body.clientWidth<860&&1==mashiro_option.random_graphs_mts;e.style.backgroundImage="url("+mashiro_option.cover_api+(t?"?type=mobile":"")+")"}}();function e(){document.querySelector(".skin-menu").classList.remove("show"),setTimeout((function(){null!=document.querySelector(".changeSkin-gear")&&(document.querySelector(".changeSkin-gear").style.visibility="visible")}),300)}document.querySelectorAll(".menu-list li").forEach((n=>{n.addEventListener("click",(function(){const n=this.id;let o;switch(mashiro_global.variables.skinSecter="white-bg"==n||"dark-bg"==n,y(),"dark-bg"==n?(document.getElementsByTagName("html")[0].style.background="#333333",document.getElementsByClassName("site-content")[0].style.backgroundColor="#333333",document.body.classList.add("dark"),t("dark","1",.33)):(document.getElementsByTagName("html")[0].style.background="unset",document.getElementsByClassName("site-content")[0].style.backgroundColor="rgba(255, 255, 255, .8)",document.body.classList.remove("dark"),t("dark","0",.33),t("bgImgSetting",n,30)),n){case"white-bg":o=mashiro_option.skin_bg0,document.body.classList.remove("dynamic");break;case"diy1-bg":o=mashiro_option.skin_bg1;break;case"diy2-bg":o=mashiro_option.skin_bg2;break;case"diy3-bg":o=mashiro_option.skin_bg3;break;case"diy4-bg":o=mashiro_option.skin_bg4}document.body.style.backgroundImage=`url(${o})`,e()}))}));let n=document.querySelector("#changskin"),o=document.querySelector(".skin-menu #close-skinMenu");n&&n.addEventListener("click",(function(){document.querySelector(".skin-menu").classList.toggle("show")})),o&&o.addEventListener("click",(function(){e()})),u()}));let b=1;function E(){document.body.clientWidth<860&&1==mashiro_option.random_graphs_mts?document.querySelector(".centerbg").style.backgroundImage="url("+mashiro_option.cover_api+"?type=mobile&"+b+")":document.querySelector(".centerbg").style.backgroundImage="url("+mashiro_option.cover_api+"?"+b+")",b+=1}function L(){b-=1,document.body.clientWidth<860&&1==mashiro_option.random_graphs_mts?document.querySelector(".centerbg").style.backgroundImage="url("+mashiro_option.cover_api+"?type=mobile&"+b+")":document.querySelector(".centerbg").style.backgroundImage="url("+mashiro_option.cover_api+"?"+b+")"}function w(e){let t=document.getElementById("archives");if(null==t)return;let n=t.getElementsByClassName("al_mon");1==e?(t.addEventListener("click",(function(e){e.target.classList.contains("al_mon")&&(s(e.target.nextElementSibling,500),e.preventDefault())})),lazyload()):function(){let e=document.getElementById("al_expand_collapse");e.style.cursor="s-resize";for(let e=0;e<n.length;e++){let t=n[e],o=t.nextElementSibling.getElementsByTagName("li").length;t.style.cursor="s-resize",t.querySelector("#post-num").textContent=o}let o=t.getElementsByClassName("al_post_list"),a=o[0];for(let e=0;e<o.length;e++)s(o[e],500,"hide",(function(){s(a,500,"show")}));if(t.addEventListener("click",(function(e){e.target.classList.contains("al_mon")&&(s(e.target.nextElementSibling,500),e.preventDefault())})),document.body.clientWidth>860){for(let e=0;e<o.length;e++){let t=o[e];t.parentNode.addEventListener("mouseover",(function(){return s(t,500,"show"),!1}))}0;let t=0;e.addEventListener("click",(function(){if(0==t){for(let e=0;e<o.length;e++){s(o[e],500,"show")}t++}else if(1==t){for(let e=0;e<o.length;e++){s(o[e],500,"hide")}t--}}))}}()}function _(){const e=document.getElementById("coverVideo"),t=document.getElementById("coverVideo").getAttribute("data-src");if(Hls.isSupported()){const n=new Hls;n.loadSource(t),n.attachMedia(e),n.on(Hls.Events.MANIFEST_PARSED,(function(){e.play()}))}else e.canPlayType("application/vnd.apple.mpegurl")&&(e.src=t,e.addEventListener("loadedmetadata",(function(){e.play()})))}function k(){let e=document.getElementsByTagName("video")[0];e&&e.classList.contains("hls")&&(mashiro_global.variables.has_hls?_():l.e(631).then(l.t.bind(l,631,23)).then((e=>{window.Hls=e.default,_(),mashiro_global.variables.has_hls=!0})))}function B(){let e=document.querySelectorAll("pre code");for(let t=0;t<e.length;t++)e[t].setAttribute("id","hljs-"+t),e[t].insertAdjacentHTML("afterend",'<a class="copy-code" href="javascript:" data-clipboard-target="#hljs-'+t+'" title="拷贝代码"><i class="fa fa-clipboard" aria-hidden="true"></i>');new ClipboardJS(".copy-code")}function S(e){if(!(document.body.clientWidth<=1200))if(document.querySelector("div.have-toc")||document.querySelector("div.has-toc")){if(e){let e=1,t="sakura"==mashiro_option.entry_content_theme?document.querySelector("article.type-post")?document.querySelector("div.pattern-attachment-img")?-75:200:375:window.innerHeight/2,n=document.querySelectorAll(".entry-content,.links");for(let t=0;t<n.length;t++){let o=n[t].querySelectorAll("h1,h2,h3,h4,h5");for(let t=0;t<o.length;t++)o[t].id="toc-head-"+e,e++}tocbot.init({tocSelector:".toc",contentSelector:[".entry-content",".links"],headingSelector:"h1, h2, h3, h4, h5",headingsOffset:t-window.innerHeight/2})}}else{let e=document.getElementsByClassName("toc-container")[0];e&&(e.remove(),e=null)}}d((function(){let e=document.getElementById("bg-next"),t=document.getElementById("bg-pre");e&&(e.onclick=()=>{E()}),t&&(t.onclick=()=>{L()})})),w(),S(!0);const q=function(){u(),v(),m(),g(),mashiro_global.font_control.ini();let t=document.getElementsByTagName("p");for(let e=0;e<t.length;e++)t[e].classList.remove("head-copyright");try{c()}catch{}try{N()}catch{}lazyload();let n=document.getElementsByTagName("div"),o=document.getElementById("to-load-aplayer");o&&o.addEventListener("click",(()=>{try{reloadHermit()}catch(e){}for(let e=0;e<n.length;e++)n[e].classList.remove("load-aplayer")}));for(let e=0;e<n.length;e++)if(n[e].classList.contains("aplayer"))try{reloadHermit()}catch{}let a=document.getElementsByClassName("iconflat");0!=a.length&&(a[0].style.width="50px",a[0].style.height="50px");let s=document.getElementsByClassName("openNav");0!=s.length&&(s[0].style.height="50px"),document.getElementById("bg-next").addEventListener("click",(()=>{E()})),document.getElementById("bg-pre").addEventListener("click",(()=>{L()})),I(),w(),e(),S(!0)};function T(){let e=document.getElementsByClassName("sm"),t=document.querySelector(".comments-main");e.length&&t&&t.addEventListener("click",(e=>{let t=e.target.parentNode;if(t.classList.contains("sm")){if(1==confirm("您真的要设为私密吗？")){if(t.classList.contains("private_now"))return alert("您之前已设过私密评论"),!1;{t.classList.add("private_now");let e=t.getAttribute("data-idp"),n=t.getAttribute("data-actionp"),o=t.getElementsByClassName("has_set_private")[0],a="action=siren_private&p_id="+e+"&p_action="+n,s=new XMLHttpRequest;return s.onreadystatechange=function(){4==this.readyState&&200==this.status&&(o.innerHTML=s.responseText)},s.open("POST","/wp-admin/admin-ajax.php",!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(a),!1}}alert("已取消")}}))}POWERMODE.colorful=!0,POWERMODE.shake=!1,document.body.addEventListener("input",POWERMODE);let C=document.getElementsByClassName("comt-addsmilies");function I(){let e=document.getElementById("emotion-toggle");e&&e.addEventListener("click",(function(){document.querySelector(".emotion-toggle-off").classList.toggle("emotion-hide"),document.querySelector(".emotion-toggle-on").classList.toggle("emotion-show"),document.querySelector(".emotion-box").classList.toggle("emotion-box-show")}))}function x(e,t,n,o){let a;switch(t){case"custom":e=n+e+o;break;case"Img":e="[img]"+e+"[/img]";break;case"Math":e=" {{"+e+"}} ";break;case"tieba":e=" ::"+e+":: ";break;default:e=" :"+e+": "}if(!document.getElementById("comment")||"textarea"!=document.getElementById("comment").type)return!1;if(a=document.getElementById("comment"),document.selection)a.focus(),sel=document.selection.createRange(),sel.text=e,a.focus();else if(a.selectionStart||"0"==a.selectionStart){let t=a.selectionStart,n=a.selectionEnd,o=n;a.value=a.value.substring(0,t)+e+a.value.substring(n,a.value.length),o+=e.length,a.focus(),a.selectionStart=o,a.selectionEnd=o}else a.value+=e,a.focus()}if(C.length>0&&Array.from(C,(e=>{e.addEventListener("click",(()=>{"block"==e.stlye.display?e.style.display="none":e.style.display="block"}))})),document.querySelectorAll(".comt-smilies a").forEach((e=>{e.addEventListener("click",(()=>{e.parentNode.style.display="none"}))})),I(),e(),d((()=>{N()})),mashiro_option.float_player_on){document.body.clientWidth>860&&function(){"use strict";let e=[];document.addEventListener("DOMContentLoaded",(function(){function t(t,n){let o={container:t,audio:n,mini:null,fixed:null,autoplay:!1,mutex:!0,lrcType:3,listFolded:1,preload:"auto",theme:"#2980b9",loop:"all",order:"list",volume:null,listMaxHeight:null,customAudioType:null,storageName:"metingjs"};if(n.length){n[0].lrc||(o.lrcType=0);let a={};for(let e in o){let n=e.toLowerCase();(t.dataset.hasOwnProperty(n)||t.dataset.hasOwnProperty(e)||null!==o[e])&&(a[e]=t.dataset[n]||t.dataset[e]||o[e],("true"===a[e]||"false"===a[e])&&(a[e]="true"==a[e]))}e.push(new APlayer(a))}for(let n=0;n<e.length;n++)try{e[n].lrc.hide()}catch(t){console.log(t)}let a=1;document.querySelector(".aplayer.aplayer-fixed").addEventListener("click",(()=>{if(1==a)for(let t=0;t<e.length;t++)try{e[t].lrc.show()}catch(e){console.log(e)}a=2}));let s=0,i=document.querySelector(".aplayer.aplayer-fixed .aplayer-body");document.querySelector(".aplayer-miniswitcher"),i&&i.classList.add("ap-hover"),player_minisw&&player_minisw.addEventListener("click",(()=>{0==s?(i&&i.classList.remove("ap-hover"),document.getElementById("secondary")&&document.getElementById("secondary").classList.add("active"),s=1):(i&&i.classList.add("ap-hover"),document.getElementById("secondary")&&document.getElementById("secondary").classList.remove("active"),s=0)}))}let n=mashiro_option.meting_api_url+"?server=:server&type=:type&id=:id&_wpnonce="+Poi.nonce;"undefined"!=typeof meting_api&&(n=meting_api);for(let n=0;n<e.length;n++)try{e[n].destroy()}catch(t){console.log(t)}e=[];for(let e=document.querySelectorAll(".aplayer"),o=function(){let o=e[a];if(o.dataset.id){let e=o.dataset.api||n;e=e.replace(":server",o.dataset.server),e=e.replace(":type",o.dataset.type),e=e.replace(":id",o.dataset.id);let a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState&&(200<=a.status&&300>a.status||304===a.status)){let e=JSON.parse(a.responseText);t(o,e)}},a.open("get",e,!0),a.send(null)}else if(o.dataset.url){let e=[{name:o.dataset.name||o.dataset.title||"Audio name",artist:o.dataset.artist||o.dataset.author||"Audio artist",url:o.dataset.url,cover:o.dataset.cover||o.dataset.pic,lrc:o.dataset.lrc,type:o.dataset.type||"auto"}];t(o,e)}},a=0;a<e.length;a++)o()}),!1)}()}function N(){let e=!1;const o=document.querySelector("input#author"),a=document.querySelector("input#qq"),s=document.querySelector("input#email"),i=document.querySelector("input#url"),l=document.querySelector(".qq-check"),r=document.querySelector(".gravatar-check"),c=document.querySelector("div.comment-user-avatar img");if(null==o)return;n("user_qq")||n("user_qq_email")||n("user_author")||(a.value=o.value=s.value=i.value=""),n("user_avatar")&&n("user_qq")&&n("user_qq_email")&&(c.setAttribute("src",n("user_avatar")),o.value=n("user_author"),s.value=n("user_qq")+"@qq.com",a.value=n("user_qq"),mashiro_option.qzone_autocomplete&&(i.value="https://user.qzone.qq.com/"+n("user_qq")),a.value&&(l.style.display="block",r.style.display="none"));let d=s.value;o.addEventListener("blur",(()=>{let n=o.value;/^[1-9]\d{4,9}$/.test(n)&&$.ajax({type:"get",url:mashiro_option.qq_api_url+"?qq="+n+"&_wpnonce="+Poi.nonce,dataType:"json",success:function(a){o.value=a.name,s.value=n.trim()+"@qq.com",mashiro_option.qzone_autocomplete&&(i.value="https://user.qzone.qq.com/"+n.trim()),c.setAttribute("src","https://q2.qlogo.cn/headimg_dl?dst_uin="+n+"&spec=100"),e=!0,n.value=n.trim(),n.value&&(l.style.display="block",r.style.display="none"),t("user_author",a.name,30),t("user_qq",n,30),t("is_user_qq","yes",30),t("user_qq_email",n+"@qq.com",30),t("user_email",n+"@qq.com",30),d=s.value(),c.setAttribute("src",a.avatar),t("user_avatar",a.avatar,30)},error:function(){n.value="",l.style.display="none",r.style.display="block",c.setAttribute("src",get_gravatar(s.value,80)),t("user_qq","",30),t("user_email",s.value,30),t("user_avatar",get_gravatar(s.value,80),30),n.value=s.value=i.value="",n.value||(l.style.display="none",r.style.display="block",t("user_qq","",30),c.setAttribute("src",get_gravatar(s.value,80)),t("user_avatar",get_gravatar(s.value,80),30))}})})),n("user_avatar")&&n("user_email")&&"no"==n("is_user_qq")&&!n("user_qq_email")&&(c.setAttribute("src",n("user_avatar")),s.value=n("user_mail"),a.value="",a.value||(l.style.display="none",r.style.display="block")),s.addEventListener("blur",(function(){let n=s.value;0!=e&&d==n||""==n||(c.setAttribute("src",get_gravatar(n,80)),t("user_avatar",get_gravatar(n,80),30),t("user_email",n,30),t("user_qq_email","",30),t("is_user_qq","no",30),a.value="",a.value||(l.style.display="none",r.style.display="block"))})),n("user_url")&&(i.value=n("user_url")),i.addEventListener("blur",(function(){let e=i.value;i.value=e,t("user_url",e,30)})),n("user_author")&&(o.value=n("user_author")),o.addEventListener("blur",(function(){let e=o.value;o.value=e,t("user_author",e,30)}))}function j(){let e=document.getElementsByTagName("section"),t=!1;for(let n=0;n<e.length;n++)e[n].classList.contains("bangumi")&&(t=!0);t&&document.addEventListener("click",(function(e){let t=e.target;if(t===document.querySelector("#bangumi-pagination a")){let e=document.querySelector("#bangumi-pagination a");e.classList.add("loading"),e.textContent="";let n=new XMLHttpRequest;n.open("POST",t.href+"&_wpnonce="+Poi.nonce,!0),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){let e=JSON.parse(n.responseText),t=document.getElementById("bangumi-pagination"),o=document.getElementsByClassName("row")[0];t.remove(),o.insertAdjacentHTML("beforeend",e)}else e.classList.remove("loading"),e.innerHTML='<i class="fa fa-exclamation-triangle" aria-hidden="true"></i> ERROR '},n.send()}}))}setTimeout((function(){!function(){let e=document.getElementById("secondary");if(document.body.clientWidth>860){let t=document.querySelector(".show-hide");t&&t.addEventListener("click",(function(){e&&e.classList.toggle("active")}))}else e&&e.remove()}()}),100),mashiro_global.ini.normalize(),loadCSS(mashiro_option.jsdelivr_css_src),loadCSS(mashiro_option.entry_content_style_src),loadCSS("https://at.alicdn.com/t/font_679578_qyt5qzzavdo39pb9.css"),loadCSS("https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css");var A=document.getElementById("bgvideo"),H={MN:function(){let e=document.querySelector(".iconflat");e&&e.addEventListener("click",(function(){document.body.classList.toggle("navOpen"),document.getElementById("main-container").classList.toggle("open"),document.getElementById("mo-nav").classList.toggle("open"),document.querySelector(".openNav").classList.toggle("open")}))},MNH:function(){document.body.classList.contains("navOpen")&&(document.body.classList.toggle("navOpen"),document.getElementById("main-container").classList.toggle("open"),document.getElementById("mo-nav").classList.toggle("open"),document.querySelector(".openNav").classList.toggle("open"))},splay:function(){let e=document.getElementById("video-btn");e&&(e.classList.add("video-pause"),e.classList.remove("video-play"));try{e.style.display="",document.querySelector(".video-stu").style.bottom="-100px",document.querySelector(".focusinfo").style.top="-999px"}catch{}try{for(let e=0;e<ap.length;e++)try{ap[e].destroy()}catch{}}catch{}try{hermitInit()}catch{}A.play()},spause:function(){let e=document.getElementById("video-btn");e&&(e.classList.add("video-play"),e.classList.remove("video-pause"));try{document.querySelector(".focusinfo").style.top="49.3%"}catch{}A.pause()},liveplay:function(){null!=A.oncanplay&&document.querySelector(".haslive")&&document.querySelector(".videolive")&&H.splay()},livepause:function(){if(null!=A.oncanplay&&document.querySelector(".haslive")){H.spause();let e=document.getElementsByClassName("video-stu")[0];e.style.bottom="0px",e.innerHTML="已暂停 ..."}},addsource:function(){let e=document.getElementsByClassName("video-stu")[0];e.innerHTML="正在载入视频 ...",e.style.bottom="0px";let t=Poi.movies.name.split(","),n=t[Math.floor(Math.random()*t.length)],o=document.getElementById("bgvideo");o.setAttribute("src",Poi.movies.url+"/"+n+".mp4"),o.setAttribute("video-name",n)},LV:function(){let e=document.getElementById("video-btn");e.addEventListener("click",(function(){this.classList.contains("loadvideo")?(this.classList.add("video-pause"),this.classList.remove("loadvideo"),H.addsource(),A.oncanplay=function(){H.splay(),document.getElementById("video-add").style.display="block",e.classList.add("videolive","haslive")}):this.classList.contains("video-pause")?(H.spause(),e.classList.remove("videolive"),document.getElementsByClassName("video-stu")[0].style.bottom="0px",document.getElementsByClassName("video-stu")[0].innerHTML="已暂停 ..."):(H.splay(),e.classList.add("videolive")),A.onended=function(){A.setAttribute("src",""),document.getElementById("video-add").style.display="none",e&&e.classList.add("loadvideo"),e&&e.classList.remove("video-pause","videolive","haslive"),document.querySelector(".focusinfo").style.top="49.3%"}})),document.getElementById("video-add").addEventListener("click",(function(){H.addsource()}))},AH:function(){"auto"==Poi.windowheight?document.querySelector("h1.main-title")&&(document.getElementById("centerbg").style.height="100vh",document.getElementById("bgvideo").style.minHeight="100vh"):document.querySelector(".headertop")&&document.querySelector(".headertop").classList.add("headertop-bar")},PE:function(){if(document.querySelector(".headertop")){let e=document.querySelector(".headertop"),t=document.querySelector(".blank");if(document.querySelector(".main-title")){try{t.style.paddingTop="0px"}catch(e){}e.style.height="auto",e.style.display="","open"==Poi.movies.live&&H.liveplay()}else{try{t.style.paddingTop="75px"}catch(e){}e.style.height="0px",e.style.display="none",H.livepause()}}},CE:function(){let e=document.querySelector(".comments-hidden"),t=document.querySelector(".comments-main");null!=e&&(e.style.display="block",t.style.display="none",e.addEventListener("click",(function(){s(t,500,"show"),e.style.display="none"})));let n=document.getElementsByClassName("archives");if(n.length>0){for(let e=0;e<n.length;e++)n[e].style.display="none";n[0].style.display="";let e=document.getElementById("archives-temp").getElementsByTagName("h3");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),s(e.target.nextElementSibling,300)}))}$(".js-toggle-search").on("click",(function(){if($(".js-toggle-search").toggleClass("is-active"),$(".js-search").toggleClass("is-visible"),$("html").css("overflow-y","hidden"),mashiro_option.live_search){var e=[];!function(o){if(null!=sessionStorage.getItem("search"))l(e=JSON.parse(sessionStorage.getItem("search")),$("#search-input").val(),n),a();else{var s=new XMLHttpRequest;s.open("GET",o,!0),s.send(),s.onreadystatechange=function(){4==s.readyState&&200==s.status&&(json=s.responseText,""!=json&&(sessionStorage.setItem("search",json),l(e=JSON.parse(json),t.value,n),a()))}}}(Poi.api+"sakura/v1/cache_search/json?_wpnonce="+Poi.nonce);var t=document.getElementById("search-input"),n=document.getElementById("PostlistBox").innerHTML,o=null;function a(){$(".ins-selectable").each((function(){$(this).click((function(){$("#Ty").attr("href",$(this).attr("href")),$("#Ty").click(),$(".search_close").click()}))}))}function s(e,t,n,o,a,s,i){if(e){var l=e.trim().split(" "),r=o.indexOf(l[l.length-1]),c=i.indexOf(l[l.length-1]);o=(o=r<60?o.slice(0,80):o.slice(r-30,r+30)).replace(l[l.length-1],'<mark class="search-keyword"> '+l[l.length-1].toUpperCase()+" </mark>"),i=(i=c<60?i.slice(0,80):i.slice(c-30,c+30)).replace(l[l.length-1],'<mark class="search-keyword"> '+l[l.length-1].toUpperCase()+" </mark>")}return'<div class="ins-selectable ins-search-item" href="'+t+'"><header><i class="fa fa-'+n+'" aria-hidden="true"></i>'+o+'<i class="iconfont icon-'+a+'"> '+s+'</i></header><p class="ins-search-preview">'+i+"</p></div>"}function l(e,t,n){var o,a,l,r="",c="",d="",u="",m="",g="",p="",y='<section class="ins-section"><header class="ins-section-header">',h="</section>",f="</header>",v=(a=e,l=(l=t.trim()).replace(l,"^(?=.*?"+l+").+$").replace(/\s/g,")(?=.*?"),i=a.filter((e=>Object.values(e).some((e=>new RegExp(l+"").test(e))))),i);for(o=0;o<Object.keys(v).length;o++)switch((p=v[o]).type){case"post":c+=s(t,p.link,"file",p.title,"mark",p.comments,p.text);break;case"tag":m+=s("",p.link,"tag",p.title,"none","","");break;case"category":u+=s("",p.link,"folder",p.title,"none","","");break;case"page":d+=s(t,p.link,"file",p.title,"mark",p.comments,p.text);break;case"comment":g+=s(t,p.link,"comment",p.title,"none","",p.text)}c&&(r=r+y+"文章"+f+c+h),d&&(r=r+y+"页面"+f+d+h),u&&(r=r+y+"分类"+f+u+h),m&&(r=r+y+"标签"+f+m+h),g&&(r=r+y+"评论"+f+g+h),document.getElementById("PostlistBox").innerHTML=r}t.oninput=function(){null==o&&clearTimeout(o),o=setTimeout((function(){l(e,t.value,n),a()}),250)},Object.values||(Object.values=function(e){if(e!==Object(e))throw new TypeError("Object.values called on a non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(e[t]);return n})}}));const o=document.querySelector(".search_close");o&&o.addEventListener("click",(function(){let e=document.getElementsByClassName("js-search")[0];e.classList.contains("is-visible")&&(document.getElementsByClassName("js-toggle-search")[0].classList.toggle("is-active"),e.classList.toggle("is-visible"),document.getElementsByTagName("html")[0].style.overflowY="unset")}));try{let e=document.getElementById("show-nav");e.addEventListener("click",(function(){if(e.classList.contains("showNav")){e.classList.remove("showNav"),e.classList.add("hideNav");let t=document.querySelector(".site-top .lower nav");t&&t.classList.add("navbar")}else{e.classList.remove("hideNav"),e.classList.add("showNav");let t=document.querySelector(".site-top .lower nav");t&&t.classList.remove("navbar")}})),document.getElementById("loading").addEventListener("click",(function(){let e=document.getElementById("loading");e.classList.add("hide"),e.classList.remove("show")}))}catch(e){}},NH:function(){window.addEventListener("scroll",(()=>{let e=document.documentElement.scrollTop||window.pageYOffset,t=document.querySelector(".site-header");0==e&&t.classList.remove("yya"),e>0&&t.classList.add("yya")}))},XLS:function(){let e;$body=window.opera?"CSS1Compat"==document.compatMode?$("html"):$("body"):$("html,body");function t(){const e=document.querySelector("#pagination a");return e.classList.add("loading"),e.innerText="",fetch(e.attributes.href+"#main",{method:"POST"}).then((t=>{if(t.ok)if(result=$(data).find("#main .post"),nextHref=$(data).find("#pagination a").attr("href"),$("#main").append(result.fadeIn(500)),e.classList.remove("loading"),e.innerText="Previous",document.querySelector("#add_post span").classList.remove("loading"),document.querySelector("#add_post span").innerText="",lazyload(),r(),null!=nextHref){e.setAttribute("href",nextHref);let t=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;window.scrollTo({top:t+300,behavior:"smooth"})}else document.getElementById("pagination").innerHTML="<span>很高兴你翻到这里，但是真的没有了...</span>"})),!1}new IntersectionObserver((function(n){if(!(n[0].intersectionRatio<=0)){var o=$("#pagination a").attr("href"),a=document.getElementById("add_post_time");if(null!=o&&a){var s=document.getElementById("add_post_time").title;"233"!=s&&(console.log("%c 自动加载时倒计时 %c","background:#9a9da2; color:#ffffff; border-radius:4px;","","",s),e=setTimeout((function(){t()}),1e3*s))}}})).observe(document.querySelector(".footer-device")),$("body").on("click","#pagination a",(function(){return clearTimeout(e),t(),!1}))},XCS:function(){const e="commentwrap",t=document.getElementById("commentform");t&&t.addEventListener("submit",(function(){addComment.createButterbar("提交中(Commiting)....");const t=new FormData(this);return t.append("action","ajax_comment"),fetch(Poi.ajaxurl,{method:this.attributes.method.value,body:t}).then((async t=>{const n=await t.text();if(t.ok){Array.from(document.getElementsByTagName("textarea")).forEach((e=>e.value=""));const t=document.getElementById("cancel-comment-reply-link"),o=document.getElementById("wp-temp-form-div"),a=document.getElementById(addComment.respondId);"0"!=document.getElementById("comment_parent").value?document.getElementById("respond").insertAdjacentHTML("beforebegin",'<ol class="children">'+n+"</ol>"):document.getElementsByClassName(e).length?"asc"==Poi.order?document.getElementsByClassName("commentwrap")[1].insertAdjacentHTML("beforeend",n):document.getElementsByClassName("commentwrap")[1].insertAdjacentHTML("afterbegin",n):"bottom"==Poi.formpostion?document.getElementById("respond").insertAdjacentHTML("beforebegin",'<ol class="'+e+'">'+n+"</ol>"):document.getElementById("respond").insertAdjacentHTML("afterend",'<ol class="'+e+'">'+n+"</ol>"),addComment.createButterbar("提交成功(Succeed)"),lazyload(),c(),m(),document.getElementById("upload-img-show").innerHTML="",t.style.display="none",t.onclick=null,document.getElementById("comment_parent").value="0",o&&a&&(o.parentNode.insertBefore(a,o),o.remove())}else addComment.createButterbar(null!=n?n:"HTTP"+t.status+":"+t.statusText)})).catch((e=>{addComment.createButterbar(e)})),!1})),window.addComment=l(713).Z},XCP:function(){document.body.addEventListener("click",(function(e){if(e.target.parentNode==document.getElementById("comments-navi")&&"a"==e.target.nodeName.toLowerCase()){e.preventDefault(),e.stopPropagation();let t=e.target,n=t.pathname,o=new XMLHttpRequest;o.open("GET",t.getAttribute("href"),!0),o.responseType="document",o.onloadstart=()=>{let e=document.getElementById("comments-navi"),t=document.querySelector("ul.commentwrap"),n=document.getElementById("loading-comments"),o=document.getElementById("comments-list-title");e.remove(),t.remove(),n.style.display="block",s(n,500,"show"),window.scrollTo({top:o.getBoundingClientRect().top+window.pageYOffset-o.clientTop-65,behavior:"smooth"})},o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){let e=o.response,t=e.querySelector("ul.commentwrap"),a=e.getElementById("comments-navi");s(document.getElementById("loading-comments"),200,"hide"),document.getElementById("loading-comments").insertAdjacentHTML("afterend",t.outerHTML),document.querySelector("ul.commentwrap").insertAdjacentHTML("afterend",a.outerHTML),lazyload(),window.gtag&&gtag("config",Poi.google_analytics_id,{page_path:n}),c(),m();let i=document.querySelector("ul.commentwrap");window.scrollTo({top:i&&i.getBoundingClientRect().top+window.pageYOffset-i.clientTop-200,behavior:"smooth"})}},o.send()}}))},IA:function(){POWERMODE.colorful=!0,POWERMODE.shake=!1,document.body.addEventListener("input",POWERMODE)},GT:function(){let e=document.querySelector("#moblieGoTop"),t=document.querySelector("#changskin");window.addEventListener("scroll",(()=>{(document.documentElement.scrollTop||document.body.scrollTop)>20?(e.style.transform="scale(1)",t.style.transform="scale(1)"):(e.style.transform="scale(0)",t.style.transform="scale(0)")})),e.onclick=function(){window.scrollTo({top:0,behavior:"smooth"})}}};Poi.pjax&&(new Pjax({selectors:["#page","title",".footer-device"],elements:["a:not([target='_top']):not(.comment-reply-link):not(#pagination a):not(#comments-navi a):not(.user-menu-option a):not(.header-user-avatar a):not(.emoji-item)",".search-form",".s-search"],timeout:8e3,history:!0,cacheBust:!1}),document.addEventListener("pjax:send",(()=>{for(const e of document.getElementsByClassName("normal-cover-video"))e.pause(),e.src="",e.load="";document.getElementById("bar").style.width="0%",mashiro_option.NProgressON&&NProgress.start(),H.MNH()})),document.addEventListener("pjax:complete",(function(){H.AH(),H.PE(),H.CE(),mashiro_option.NProgressON&&NProgress.done(),mashiro_global.ini.pjax();let e=document.getElementById("loading");e&&(e.classList.add("hide"),e.classList.remove("show")),"open"==Poi.codelamp&&self.Prism.highlightAll(event),document.querySelector(".js-search.is-visible")&&(document.getElementsByClassName("js-toggle-search")[0].classList.toggle("is-active"),document.getElementsByClassName("js-search")[0].classList.toggle("is-visible"),document.getElementsByTagName("html")[0].style.overflowY="unset")})),document.addEventListener("pjax:success",(function(){window.gtag&&gtag("config",Poi.google_analytics_id,{page_path:window.location.pathname})})),window.addEventListener("popstate",(function(e){H.AH(),H.PE(),H.CE(),T(),w(!0),r()}),!1)),d((function(){H.AH(),H.PE(),H.NH(),H.GT(),H.XLS(),H.XCS(),H.XCP(),H.CE(),H.MN(),H.IA(),H.LV(),console.log("%c Mashiro %c","background:#24272A; color:#ffffff","","https://2heng.xin/"),console.log("%c Github %c","background:#24272A; color:#ffffff","","https://github.com/mashirozx")}));let O=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,P=navigator.userAgent.toLowerCase().indexOf("opera")>-1,M=navigator.userAgent.toLowerCase().indexOf("msie")>-1;function D(){mashiro_option.audio&&d((()=>{window.AudioContext=window.AudioContext||window.webkitAudioContext,function(){if(window.AudioContext){let e,t=new AudioContext,n="880 987 1046 987 1046 1318 987 659 659 880 784 880 1046 784 659 659 698 659 698 1046 659 1046 1046 1046 987 698 698 987 987 880 987 1046 987 1046 1318 987 659 659 880 784 880 1046 784 659 698 1046 987 1046 1174 1174 1174 1046 1046 880 987 784 880 1046 1174 1318 1174 1318 1567 1046 987 1046 1318 1318 1174 784 784 880 1046 987 1174 1046 784 784 1396 1318 1174 659 1318 1046 1318 1760 1567 1567 1318 1174 1046 1046 1174 1046 1174 1567 1318 1318 1760 1567 1318 1174 1046 1046 1174 1046 1174 987 880 880 987 880".split(" "),o=0,a=1,s="♪ ♩ ♫ ♬ ♭ € § ¶ ♯".split(" "),i=!1;document.querySelectorAll(".site-title, #moblieGoTop, .site-branding, .searchbox, .changeSkin-gear, .menu-list li").forEach((l=>{l.addEventListener("mouseenter",(l=>{if(e)return;let r=n[o];r||(o=0,r=n[o]),o+=a;let c=t.createOscillator(),d=t.createGain();if(c.connect(d),d.connect(t.destination),c.type="sine",c.frequency.value=r,d.gain.setValueAtTime(0,t.currentTime),d.gain.linearRampToValueAtTime(1,t.currentTime+.01),c.start(t.currentTime),d.gain.exponentialRampToValueAtTime(.001,t.currentTime+1),c.stop(t.currentTime+1),i=!0){let t=Math.round(7*Math.random());e=document.createElement("b"),e.textContent=s[t],h=l.pageX,p=l.pageY-5,e.style.zIndex="99999",e.style.top=p-100+"px",e.style.left=h+"px",e.style.position="absolute",e.style.color="#FF6EB4",document.body.appendChild(e),e.animate([{top:p+"px"},{opacity:0}],{duration:500}),setTimeout((()=>{e.remove(),e=null}),500),l.stopPropagation()}i=!1}))}))}}()}))}(O||P||M)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",(function(){let e,t=location.hash.substring(1);/^[A-z0-9_-]+$/.test(t)&&(e=document.getElementById(t),e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus()))}),!1),window.onload=function(){document.getElementsByTagName("html")[0].style.overflowY="unset";let e=document.getElementById("preload");e&&(e.classList.add("hide"),e.classList.remove("show"),setTimeout("preload.remove()",666))}})()})();
//# sourceMappingURL=sakura-app.js.map