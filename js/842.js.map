{"version":3,"sources":["webpack://sakurairo-scripts/./node_modules/pjax/index.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/abort-request.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/eval-script.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/events/on.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/events/trigger.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/execute-scripts.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/foreach-els.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/foreach-selectors.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/is-supported.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/parse-options.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/proto/attach-form.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/proto/attach-link.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/proto/handle-response.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/proto/log.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/proto/parse-element.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/send-request.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/switches-selectors.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/switches.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/uniqueid.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/util/clone.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/util/contains.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/util/extend.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/util/noop.js","webpack://sakurairo-scripts/./node_modules/pjax/lib/util/update-query-string.js"],"names":["executeScripts","forEachEls","parseOptions","switches","newUid","on","trigger","clone","contains","extend","noop","Pjax","options","this","state","numPendingSwitches","href","log","scrollRestoration","history","maxUid","lastUid","parseDOM","document","window","st","opt","url","title","scrollPos","uid","backward","forward","loadUrl","bind","prototype","getElements","el","querySelectorAll","elements","parseElement","refresh","reload","location","attachLink","attachForm","forEachSelectors","cb","context","DOMcontext","selectors","switchSelectors","fromEl","toEl","switchesOptions","latestChance","onSwitch","afterAllSwitches","loadContent","html","tmpEl","implementation","createHTMLDocument","matches","match","length","shift","forEach","htmlAttrib","attr","trim","split","documentElement","setAttribute","slice","innerHTML","attributes","activeElement","blur","e","abortRequest","doRequest","handleResponse","request","autofocusEl","Array","call","pop","focus","selector","replaceState","pushState","analytics","a","createElement","hash","name","decodeURIComponent","curtop","target","getElementById","getElementsByName","offsetParent","offsetTop","scrollTo","isSupported","module","exports","stupidPjax","key","hasOwnProperty","readyState","onreadystatechange","abort","code","text","textContent","src","parent","parentNode","querySelector","script","console","type","id","async","appendChild","createTextNode","HTMLHeadElement","HTMLBodyElement","removeChild","els","events","listener","useCapture","addEventListener","opts","event","createEvent","initEvent","eventName","Object","keys","domFix","body","dispatchEvent","evalScript","tagName","toLowerCase","fn","HTMLCollection","NodeList","navigator","userAgent","defaultSwitches","defaultAnalytics","_gaq","push","ga","page","pathname","cacheBust","debug","timeout","currentUrlFullReload","head","switchElementsAlt","attrState","formAction","isDefaultPrevented","requestOptions","requestUrl","getAttribute","requestMethod","virtLinkElement","attrValue","protocol","host","replace","checkIfShouldAbort","preventDefault","enctype","formData","FormData","requestParams","formElements","i","element","undefined","value","checked","values","j","selected","disabled","hasAttribute","k","encodeURIComponent","parseFormElements","triggerElement","defaultPrevented","returnValue","that","linkAction","which","metaKey","ctrlKey","shiftKey","altKey","keyCode","responseText","currentState","scrollLeft","scrollTop","oldHref","responseURL","getResponseHeader","oldHash","error","apply","arguments","updateQueryString","callback","queryString","toUpperCase","requestPayload","XMLHttpRequest","status","onerror","ontimeout","map","param","join","Date","now","open","setRequestHeader","JSON","stringify","send","switchesQueue","newEls","oldEls","newEl","oldEl","outerHTML","queuedSwitch","className","removeAttribute","hasAttributes","attrs","setNamedItem","cloneNode","replaceNode","replaceChild","sideBySide","switchOptions","elsToRemove","elsToAdd","fragToAppend","createDocumentFragment","animationEventNames","animatedElsNumber","sexyAnimationEnd","currentTarget","childNodes","classList","add","callbacks","removeElement","classNames","remove","addClasses","addElement","counter","getTime","obj","copy","constructor","doc","selectedEls","to","source","uri","re","RegExp","separator","indexOf"],"mappings":"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","file":"842.js","sourcesContent":["var executeScripts = require(\"./lib/execute-scripts\");\nvar forEachEls = require(\"./lib/foreach-els\");\nvar parseOptions = require(\"./lib/parse-options\");\nvar switches = require(\"./lib/switches\");\nvar newUid = require(\"./lib/uniqueid\");\n\nvar on = require(\"./lib/events/on\");\nvar trigger = require(\"./lib/events/trigger\");\n\nvar clone = require(\"./lib/util/clone\");\nvar contains = require(\"./lib/util/contains\");\nvar extend = require(\"./lib/util/extend\");\nvar noop = require(\"./lib/util/noop\");\n\nvar Pjax = function(options) {\n  this.state = {\n    numPendingSwitches: 0,\n    href: null,\n    options: null\n  };\n\n  this.options = parseOptions(options);\n  this.log(\"Pjax options\", this.options);\n\n  if (this.options.scrollRestoration && \"scrollRestoration\" in history) {\n    history.scrollRestoration = \"manual\";\n  }\n\n  this.maxUid = this.lastUid = newUid();\n\n  this.parseDOM(document);\n\n  on(\n    window,\n    \"popstate\",\n    function(st) {\n      if (st.state) {\n        var opt = clone(this.options);\n        opt.url = st.state.url;\n        opt.title = st.state.title;\n        // Since state already exists, prevent it from being pushed again\n        opt.history = false;\n        opt.scrollPos = st.state.scrollPos;\n        if (st.state.uid < this.lastUid) {\n          opt.backward = true;\n        } else {\n          opt.forward = true;\n        }\n        this.lastUid = st.state.uid;\n\n        // @todo implement history cache here, based on uid\n        this.loadUrl(st.state.url, opt);\n      }\n    }.bind(this)\n  );\n};\n\nPjax.switches = switches;\n\nPjax.prototype = {\n  log: require(\"./lib/proto/log\"),\n\n  getElements: function(el) {\n    return el.querySelectorAll(this.options.elements);\n  },\n\n  parseDOM: function(el) {\n    var parseElement = require(\"./lib/proto/parse-element\");\n    forEachEls(this.getElements(el), parseElement, this);\n  },\n\n  refresh: function(el) {\n    this.parseDOM(el || document);\n  },\n\n  reload: function() {\n    window.location.reload();\n  },\n\n  attachLink: require(\"./lib/proto/attach-link\"),\n\n  attachForm: require(\"./lib/proto/attach-form\"),\n\n  forEachSelectors: function(cb, context, DOMcontext) {\n    return require(\"./lib/foreach-selectors\").bind(this)(\n      this.options.selectors,\n      cb,\n      context,\n      DOMcontext\n    );\n  },\n\n  switchSelectors: function(selectors, fromEl, toEl, options) {\n    return require(\"./lib/switches-selectors\").bind(this)(\n      this.options.switches,\n      this.options.switchesOptions,\n      selectors,\n      fromEl,\n      toEl,\n      options\n    );\n  },\n\n  latestChance: function(href) {\n    window.location = href;\n  },\n\n  onSwitch: function() {\n    trigger(window, \"resize scroll\");\n\n    this.state.numPendingSwitches--;\n\n    // debounce calls, so we only run this once after all switches are finished.\n    if (this.state.numPendingSwitches === 0) {\n      this.afterAllSwitches();\n    }\n  },\n\n  loadContent: function(html, options) {\n    if (typeof html !== \"string\") {\n      trigger(document, \"pjax:complete pjax:error\", options);\n\n      return;\n    }\n\n    var tmpEl = document.implementation.createHTMLDocument(\"pjax\");\n\n    // parse HTML attributes to copy them\n    // since we are forced to use documentElement.innerHTML (outerHTML can't be used for <html>)\n    var htmlRegex = /<html[^>]+>/gi;\n    var htmlAttribsRegex = /\\s?[a-z:]+(?:=['\"][^'\">]+['\"])*/gi;\n    var matches = html.match(htmlRegex);\n    if (matches && matches.length) {\n      matches = matches[0].match(htmlAttribsRegex);\n      if (matches.length) {\n        matches.shift();\n        matches.forEach(function(htmlAttrib) {\n          var attr = htmlAttrib.trim().split(\"=\");\n          if (attr.length === 1) {\n            tmpEl.documentElement.setAttribute(attr[0], true);\n          } else {\n            tmpEl.documentElement.setAttribute(attr[0], attr[1].slice(1, -1));\n          }\n        });\n      }\n    }\n\n    tmpEl.documentElement.innerHTML = html;\n    this.log(\n      \"load content\",\n      tmpEl.documentElement.attributes,\n      tmpEl.documentElement.innerHTML.length\n    );\n\n    // Clear out any focused controls before inserting new page contents.\n    if (\n      document.activeElement &&\n      contains(document, this.options.selectors, document.activeElement)\n    ) {\n      try {\n        document.activeElement.blur();\n      } catch (e) {} // eslint-disable-line no-empty\n    }\n\n    this.switchSelectors(this.options.selectors, tmpEl, document, options);\n  },\n\n  abortRequest: require(\"./lib/abort-request\"),\n\n  doRequest: require(\"./lib/send-request\"),\n\n  handleResponse: require(\"./lib/proto/handle-response\"),\n\n  loadUrl: function(href, options) {\n    options =\n      typeof options === \"object\"\n        ? extend({}, this.options, options)\n        : clone(this.options);\n\n    this.log(\"load href\", href, options);\n\n    // Abort any previous request\n    this.abortRequest(this.request);\n\n    trigger(document, \"pjax:send\", options);\n\n    // Do the request\n    this.request = this.doRequest(\n      href,\n      options,\n      this.handleResponse.bind(this)\n    );\n  },\n\n  afterAllSwitches: function() {\n    // FF bug: Won’t autofocus fields that are inserted via JS.\n    // This behavior is incorrect. So if theres no current focus, autofocus\n    // the last field.\n    //\n    // http://www.w3.org/html/wg/drafts/html/master/forms.html\n    var autofocusEl = Array.prototype.slice\n      .call(document.querySelectorAll(\"[autofocus]\"))\n      .pop();\n    if (autofocusEl && document.activeElement !== autofocusEl) {\n      autofocusEl.focus();\n    }\n\n    // execute scripts when DOM have been completely updated\n    this.options.selectors.forEach(function(selector) {\n      forEachEls(document.querySelectorAll(selector), function(el) {\n        executeScripts(el);\n      });\n    });\n\n    var state = this.state;\n\n    if (state.options.history) {\n      if (!window.history.state) {\n        this.lastUid = this.maxUid = newUid();\n        window.history.replaceState(\n          {\n            url: window.location.href,\n            title: document.title,\n            uid: this.maxUid,\n            scrollPos: [0, 0]\n          },\n          document.title\n        );\n      }\n\n      // Update browser history\n      this.lastUid = this.maxUid = newUid();\n\n      window.history.pushState(\n        {\n          url: state.href,\n          title: state.options.title,\n          uid: this.maxUid,\n          scrollPos: [0, 0]\n        },\n        state.options.title,\n        state.href\n      );\n    }\n\n    this.forEachSelectors(function(el) {\n      this.parseDOM(el);\n    }, this);\n\n    // Fire Events\n    trigger(document, \"pjax:complete pjax:success\", state.options);\n\n    if (typeof state.options.analytics === \"function\") {\n      state.options.analytics();\n    }\n\n    if (state.options.history) {\n      // First parse url and check for hash to override scroll\n      var a = document.createElement(\"a\");\n      a.href = this.state.href;\n      if (a.hash) {\n        var name = a.hash.slice(1);\n        name = decodeURIComponent(name);\n\n        var curtop = 0;\n        var target =\n          document.getElementById(name) || document.getElementsByName(name)[0];\n        if (target) {\n          // http://stackoverflow.com/questions/8111094/cross-browser-javascript-function-to-find-actual-position-of-an-element-in-page\n          if (target.offsetParent) {\n            do {\n              curtop += target.offsetTop;\n\n              target = target.offsetParent;\n            } while (target);\n          }\n        }\n        window.scrollTo(0, curtop);\n      } else if (state.options.scrollTo !== false) {\n        // Scroll page to top on new page load\n        if (state.options.scrollTo.length > 1) {\n          window.scrollTo(state.options.scrollTo[0], state.options.scrollTo[1]);\n        } else {\n          window.scrollTo(0, state.options.scrollTo);\n        }\n      }\n    } else if (state.options.scrollRestoration && state.options.scrollPos) {\n      window.scrollTo(state.options.scrollPos[0], state.options.scrollPos[1]);\n    }\n\n    this.state = {\n      numPendingSwitches: 0,\n      href: null,\n      options: null\n    };\n  }\n};\n\nPjax.isSupported = require(\"./lib/is-supported\");\n\n// arguably could do `if( require(\"./lib/is-supported\")()) {` but that might be a little to simple\nif (Pjax.isSupported()) {\n  module.exports = Pjax;\n}\n// if there isn’t required browser functions, returning stupid api\nelse {\n  var stupidPjax = noop;\n  for (var key in Pjax.prototype) {\n    if (\n      Pjax.prototype.hasOwnProperty(key) &&\n      typeof Pjax.prototype[key] === \"function\"\n    ) {\n      stupidPjax[key] = noop;\n    }\n  }\n\n  module.exports = stupidPjax;\n}\n","var noop = require(\"./util/noop\");\n\nmodule.exports = function(request) {\n  if (request && request.readyState < 4) {\n    request.onreadystatechange = noop;\n    request.abort();\n  }\n};\n","module.exports = function(el) {\n  var code = el.text || el.textContent || el.innerHTML || \"\";\n  var src = el.src || \"\";\n  var parent =\n    el.parentNode || document.querySelector(\"head\") || document.documentElement;\n  var script = document.createElement(\"script\");\n\n  if (code.match(\"document.write\")) {\n    if (console && console.log) {\n      console.log(\n        \"Script contains document.write. Can’t be executed correctly. Code skipped \",\n        el\n      );\n    }\n    return false;\n  }\n\n  script.type = \"text/javascript\";\n  script.id = el.id;\n\n  /* istanbul ignore if */\n  if (src !== \"\") {\n    script.src = src;\n    script.async = false; // force synchronous loading of peripheral JS\n  }\n\n  if (code !== \"\") {\n    try {\n      script.appendChild(document.createTextNode(code));\n    } catch (e) {\n      /* istanbul ignore next */\n      // old IEs have funky script nodes\n      script.text = code;\n    }\n  }\n\n  // execute\n  parent.appendChild(script);\n  // avoid pollution only in head or body tags\n  if (\n    (parent instanceof HTMLHeadElement || parent instanceof HTMLBodyElement) &&\n    parent.contains(script)\n  ) {\n    parent.removeChild(script);\n  }\n\n  return true;\n};\n","var forEachEls = require(\"../foreach-els\");\n\nmodule.exports = function(els, events, listener, useCapture) {\n  events = typeof events === \"string\" ? events.split(\" \") : events;\n\n  events.forEach(function(e) {\n    forEachEls(els, function(el) {\n      el.addEventListener(e, listener, useCapture);\n    });\n  });\n};\n","var forEachEls = require(\"../foreach-els\");\n\nmodule.exports = function(els, events, opts) {\n  events = typeof events === \"string\" ? events.split(\" \") : events;\n\n  events.forEach(function(e) {\n    var event;\n    event = document.createEvent(\"HTMLEvents\");\n    event.initEvent(e, true, true);\n    event.eventName = e;\n    if (opts) {\n      Object.keys(opts).forEach(function(key) {\n        event[key] = opts[key];\n      });\n    }\n\n    forEachEls(els, function(el) {\n      var domFix = false;\n      if (!el.parentNode && el !== document && el !== window) {\n        // THANK YOU IE (9/10/11)\n        // dispatchEvent doesn't work if the element is not in the DOM\n        domFix = true;\n        document.body.appendChild(el);\n      }\n      el.dispatchEvent(event);\n      if (domFix) {\n        el.parentNode.removeChild(el);\n      }\n    });\n  });\n};\n","var forEachEls = require(\"./foreach-els\");\nvar evalScript = require(\"./eval-script\");\n// Finds and executes scripts (used for newly added elements)\n// Needed since innerHTML does not run scripts\nmodule.exports = function(el) {\n  if (el.tagName.toLowerCase() === \"script\") {\n    evalScript(el);\n  }\n\n  forEachEls(el.querySelectorAll(\"script\"), function(script) {\n    if (!script.type || script.type.toLowerCase() === \"text/javascript\") {\n      if (script.parentNode) {\n        script.parentNode.removeChild(script);\n      }\n      evalScript(script);\n    }\n  });\n};\n","/* global HTMLCollection: true */\n\nmodule.exports = function(els, fn, context) {\n  if (\n    els instanceof HTMLCollection ||\n    els instanceof NodeList ||\n    els instanceof Array\n  ) {\n    return Array.prototype.forEach.call(els, fn, context);\n  }\n  // assume simple DOM element\n  return fn.call(context, els);\n};\n","var forEachEls = require(\"./foreach-els\");\n\nmodule.exports = function(selectors, cb, context, DOMcontext) {\n  DOMcontext = DOMcontext || document;\n  selectors.forEach(function(selector) {\n    forEachEls(DOMcontext.querySelectorAll(selector), cb, context);\n  });\n};\n","module.exports = function() {\n  // Borrowed wholesale from https://github.com/defunkt/jquery-pjax\n  return (\n    window.history &&\n    window.history.pushState &&\n    window.history.replaceState &&\n    // pushState isn’t reliable on iOS until 5.\n    !navigator.userAgent.match(\n      /((iPod|iPhone|iPad).+\\bOS\\s+[1-4]\\D|WebApps\\/.+CFNetwork)/\n    )\n  );\n};\n","/* global _gaq: true, ga: true */\n\nvar defaultSwitches = require(\"./switches\");\n\nmodule.exports = function(options) {\n  options = options || {};\n  options.elements = options.elements || \"a[href], form[action]\";\n  options.selectors = options.selectors || [\"title\", \".js-Pjax\"];\n  options.switches = options.switches || {};\n  options.switchesOptions = options.switchesOptions || {};\n  options.history =\n    typeof options.history === \"undefined\" ? true : options.history;\n  options.analytics =\n    typeof options.analytics === \"function\" || options.analytics === false\n      ? options.analytics\n      : defaultAnalytics;\n  options.scrollTo =\n    typeof options.scrollTo === \"undefined\" ? 0 : options.scrollTo;\n  options.scrollRestoration =\n    typeof options.scrollRestoration !== \"undefined\"\n      ? options.scrollRestoration\n      : true;\n  options.cacheBust =\n    typeof options.cacheBust === \"undefined\" ? true : options.cacheBust;\n  options.debug = options.debug || false;\n  options.timeout = options.timeout || 0;\n  options.currentUrlFullReload =\n    typeof options.currentUrlFullReload === \"undefined\"\n      ? false\n      : options.currentUrlFullReload;\n\n  // We can’t replace body.outerHTML or head.outerHTML.\n  // It creates a bug where a new body or head are created in the DOM.\n  // If you set head.outerHTML, a new body tag is appended, so the DOM has 2 body nodes, and vice versa\n  if (!options.switches.head) {\n    options.switches.head = defaultSwitches.switchElementsAlt;\n  }\n  if (!options.switches.body) {\n    options.switches.body = defaultSwitches.switchElementsAlt;\n  }\n\n  return options;\n};\n\n/* istanbul ignore next */\nfunction defaultAnalytics() {\n  if (window._gaq) {\n    _gaq.push([\"_trackPageview\"]);\n  }\n  if (window.ga) {\n    ga(\"send\", \"pageview\", { page: location.pathname, title: document.title });\n  }\n}\n","var on = require(\"../events/on\");\nvar clone = require(\"../util/clone\");\n\nvar attrState = \"data-pjax-state\";\n\nvar formAction = function(el, event) {\n  if (isDefaultPrevented(event)) {\n    return;\n  }\n\n  // Since loadUrl modifies options and we may add our own modifications below,\n  // clone it so the changes don't persist\n  var options = clone(this.options);\n\n  // Initialize requestOptions\n  options.requestOptions = {\n    requestUrl: el.getAttribute(\"action\") || window.location.href,\n    requestMethod: el.getAttribute(\"method\") || \"GET\"\n  };\n\n  // create a testable virtual link of the form action\n  var virtLinkElement = document.createElement(\"a\");\n  virtLinkElement.setAttribute(\"href\", options.requestOptions.requestUrl);\n\n  var attrValue = checkIfShouldAbort(virtLinkElement, options);\n  if (attrValue) {\n    el.setAttribute(attrState, attrValue);\n    return;\n  }\n\n  event.preventDefault();\n\n  if (el.enctype === \"multipart/form-data\") {\n    options.requestOptions.formData = new FormData(el);\n  } else {\n    options.requestOptions.requestParams = parseFormElements(el);\n  }\n\n  el.setAttribute(attrState, \"submit\");\n\n  options.triggerElement = el;\n  this.loadUrl(virtLinkElement.href, options);\n};\n\nfunction parseFormElements(el) {\n  var requestParams = [];\n  var formElements = el.elements;\n\n  for (var i = 0; i < formElements.length; i++) {\n    var element = formElements[i];\n    var tagName = element.tagName.toLowerCase();\n    // jscs:disable disallowImplicitTypeConversion\n    if (\n      !!element.name &&\n      element.attributes !== undefined &&\n      tagName !== \"button\"\n    ) {\n      // jscs:enable disallowImplicitTypeConversion\n      var type = element.attributes.type;\n\n      if (\n        !type ||\n        (type.value !== \"checkbox\" && type.value !== \"radio\") ||\n        element.checked\n      ) {\n        // Build array of values to submit\n        var values = [];\n\n        if (tagName === \"select\") {\n          var opt;\n\n          for (var j = 0; j < element.options.length; j++) {\n            opt = element.options[j];\n            if (opt.selected && !opt.disabled) {\n              values.push(opt.hasAttribute(\"value\") ? opt.value : opt.text);\n            }\n          }\n        } else {\n          values.push(element.value);\n        }\n\n        for (var k = 0; k < values.length; k++) {\n          requestParams.push({\n            name: encodeURIComponent(element.name),\n            value: encodeURIComponent(values[k])\n          });\n        }\n      }\n    }\n  }\n\n  return requestParams;\n}\n\nfunction checkIfShouldAbort(virtLinkElement, options) {\n  // Ignore external links.\n  if (\n    virtLinkElement.protocol !== window.location.protocol ||\n    virtLinkElement.host !== window.location.host\n  ) {\n    return \"external\";\n  }\n\n  // Ignore click if we are on an anchor on the same page\n  if (\n    virtLinkElement.hash &&\n    virtLinkElement.href.replace(virtLinkElement.hash, \"\") ===\n      window.location.href.replace(location.hash, \"\")\n  ) {\n    return \"anchor\";\n  }\n\n  // Ignore empty anchor \"foo.html#\"\n  if (virtLinkElement.href === window.location.href.split(\"#\")[0] + \"#\") {\n    return \"anchor-empty\";\n  }\n\n  // if declared as a full reload, just normally submit the form\n  if (\n    options.currentUrlFullReload &&\n    virtLinkElement.href === window.location.href.split(\"#\")[0]\n  ) {\n    return \"reload\";\n  }\n}\n\nvar isDefaultPrevented = function(event) {\n  return event.defaultPrevented || event.returnValue === false;\n};\n\nmodule.exports = function(el) {\n  var that = this;\n\n  el.setAttribute(attrState, \"\");\n\n  on(el, \"submit\", function(event) {\n    formAction.call(that, el, event);\n  });\n};\n","var on = require(\"../events/on\");\nvar clone = require(\"../util/clone\");\n\nvar attrState = \"data-pjax-state\";\n\nvar linkAction = function(el, event) {\n  if (isDefaultPrevented(event)) {\n    return;\n  }\n\n  // Since loadUrl modifies options and we may add our own modifications below,\n  // clone it so the changes don't persist\n  var options = clone(this.options);\n\n  var attrValue = checkIfShouldAbort(el, event);\n  if (attrValue) {\n    el.setAttribute(attrState, attrValue);\n    return;\n  }\n\n  event.preventDefault();\n\n  // don’t do \"nothing\" if user try to reload the page by clicking the same link twice\n  if (\n    this.options.currentUrlFullReload &&\n    el.href === window.location.href.split(\"#\")[0]\n  ) {\n    el.setAttribute(attrState, \"reload\");\n    this.reload();\n    return;\n  }\n\n  el.setAttribute(attrState, \"load\");\n\n  options.triggerElement = el;\n  this.loadUrl(el.href, options);\n};\n\nfunction checkIfShouldAbort(el, event) {\n  // Don’t break browser special behavior on links (like page in new window)\n  if (\n    event.which > 1 ||\n    event.metaKey ||\n    event.ctrlKey ||\n    event.shiftKey ||\n    event.altKey\n  ) {\n    return \"modifier\";\n  }\n\n  // we do test on href now to prevent unexpected behavior if for some reason\n  // user have href that can be dynamically updated\n\n  // Ignore external links.\n  if (\n    el.protocol !== window.location.protocol ||\n    el.host !== window.location.host\n  ) {\n    return \"external\";\n  }\n\n  // Ignore anchors on the same page (keep native behavior)\n  if (\n    el.hash &&\n    el.href.replace(el.hash, \"\") ===\n      window.location.href.replace(location.hash, \"\")\n  ) {\n    return \"anchor\";\n  }\n\n  // Ignore empty anchor \"foo.html#\"\n  if (el.href === window.location.href.split(\"#\")[0] + \"#\") {\n    return \"anchor-empty\";\n  }\n}\n\nvar isDefaultPrevented = function(event) {\n  return event.defaultPrevented || event.returnValue === false;\n};\n\nmodule.exports = function(el) {\n  var that = this;\n\n  el.setAttribute(attrState, \"\");\n\n  on(el, \"click\", function(event) {\n    linkAction.call(that, el, event);\n  });\n\n  on(\n    el,\n    \"keyup\",\n    function(event) {\n      if (event.keyCode === 13) {\n        linkAction.call(that, el, event);\n      }\n    }.bind(this)\n  );\n};\n","var clone = require(\"../util/clone\");\nvar newUid = require(\"../uniqueid\");\nvar trigger = require(\"../events/trigger\");\n\nmodule.exports = function(responseText, request, href, options) {\n  options = clone(options || this.options);\n  options.request = request;\n\n  // Fail if unable to load HTML via AJAX\n  if (responseText === false) {\n    trigger(document, \"pjax:complete pjax:error\", options);\n\n    return;\n  }\n\n  // push scroll position to history\n  var currentState = window.history.state || {};\n  window.history.replaceState(\n    {\n      url: currentState.url || window.location.href,\n      title: currentState.title || document.title,\n      uid: currentState.uid || newUid(),\n      scrollPos: [\n        document.documentElement.scrollLeft || document.body.scrollLeft,\n        document.documentElement.scrollTop || document.body.scrollTop\n      ]\n    },\n    document.title,\n    window.location.href\n  );\n\n  // Check for redirects\n  var oldHref = href;\n  if (request.responseURL) {\n    if (href !== request.responseURL) {\n      href = request.responseURL;\n    }\n  } else if (request.getResponseHeader(\"X-PJAX-URL\")) {\n    href = request.getResponseHeader(\"X-PJAX-URL\");\n  } else if (request.getResponseHeader(\"X-XHR-Redirected-To\")) {\n    href = request.getResponseHeader(\"X-XHR-Redirected-To\");\n  }\n\n  // Add back the hash if it was removed\n  var a = document.createElement(\"a\");\n  a.href = oldHref;\n  var oldHash = a.hash;\n  a.href = href;\n  if (oldHash && !a.hash) {\n    a.hash = oldHash;\n    href = a.href;\n  }\n\n  this.state.href = href;\n  this.state.options = options;\n\n  try {\n    this.loadContent(responseText, options);\n  } catch (e) {\n    trigger(document, \"pjax:error\", options);\n\n    if (!this.options.debug) {\n      if (console && console.error) {\n        console.error(\"Pjax switch fail: \", e);\n      }\n      return this.latestChance(href);\n    } else {\n      throw e;\n    }\n  }\n};\n","module.exports = function() {\n  if (this.options.debug && console) {\n    if (typeof console.log === \"function\") {\n      console.log.apply(console, arguments);\n    }\n    // IE is weird\n    else if (console.log) {\n      console.log(arguments);\n    }\n  }\n};\n","var attrState = \"data-pjax-state\";\n\nmodule.exports = function(el) {\n  switch (el.tagName.toLowerCase()) {\n    case \"a\":\n      // only attach link if el does not already have link attached\n      if (!el.hasAttribute(attrState)) {\n        this.attachLink(el);\n      }\n      break;\n\n    case \"form\":\n      // only attach link if el does not already have link attached\n      if (!el.hasAttribute(attrState)) {\n        this.attachForm(el);\n      }\n      break;\n\n    default:\n      throw \"Pjax can only be applied on <a> or <form> submit\";\n  }\n};\n","var updateQueryString = require(\"./util/update-query-string\");\n\nmodule.exports = function(location, options, callback) {\n  options = options || {};\n  var queryString;\n  var requestOptions = options.requestOptions || {};\n  var requestMethod = (requestOptions.requestMethod || \"GET\").toUpperCase();\n  var requestParams = requestOptions.requestParams || null;\n  var formData = requestOptions.formData || null;\n  var requestPayload = null;\n  var request = new XMLHttpRequest();\n  var timeout = options.timeout || 0;\n\n  request.onreadystatechange = function() {\n    if (request.readyState === 4) {\n      if (request.status === 200) {\n        callback(request.responseText, request, location, options);\n      } else if (request.status !== 0) {\n        callback(null, request, location, options);\n      }\n    }\n  };\n\n  request.onerror = function(e) {\n    console.log(e);\n    callback(null, request, location, options);\n  };\n\n  request.ontimeout = function() {\n    callback(null, request, location, options);\n  };\n\n  // Prepare the request payload for forms, if available\n  if (requestParams && requestParams.length) {\n    // Build query string\n    queryString = requestParams\n      .map(function(param) {\n        return param.name + \"=\" + param.value;\n      })\n      .join(\"&\");\n\n    switch (requestMethod) {\n      case \"GET\":\n        // Reset query string to avoid an issue with repeat submissions where checkboxes that were\n        // previously checked are incorrectly preserved\n        location = location.split(\"?\")[0];\n\n        // Append new query string\n        location += \"?\" + queryString;\n        break;\n\n      case \"POST\":\n        // Send query string as request payload\n        requestPayload = queryString;\n        break;\n    }\n  } else if (formData) {\n    requestPayload = formData;\n  }\n\n  // Add a timestamp as part of the query string if cache busting is enabled\n  if (options.cacheBust) {\n    location = updateQueryString(location, \"t\", Date.now());\n  }\n\n  request.open(requestMethod, location, true);\n  request.timeout = timeout;\n  request.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n  request.setRequestHeader(\"X-PJAX\", \"true\");\n  request.setRequestHeader(\n    \"X-PJAX-Selectors\",\n    JSON.stringify(options.selectors)\n  );\n\n  // Send the proper header information for POST forms\n  if (requestPayload && requestMethod === \"POST\" && !formData) {\n    request.setRequestHeader(\n      \"Content-Type\",\n      \"application/x-www-form-urlencoded\"\n    );\n  }\n\n  request.send(requestPayload);\n\n  return request;\n};\n","var forEachEls = require(\"./foreach-els\");\n\nvar defaultSwitches = require(\"./switches\");\n\nmodule.exports = function(\n  switches,\n  switchesOptions,\n  selectors,\n  fromEl,\n  toEl,\n  options\n) {\n  var switchesQueue = [];\n\n  selectors.forEach(function(selector) {\n    var newEls = fromEl.querySelectorAll(selector);\n    var oldEls = toEl.querySelectorAll(selector);\n    if (this.log) {\n      this.log(\"Pjax switch\", selector, newEls, oldEls);\n    }\n    if (newEls.length !== oldEls.length) {\n      throw \"DOM doesn’t look the same on new loaded page: ’\" +\n        selector +\n        \"’ - new \" +\n        newEls.length +\n        \", old \" +\n        oldEls.length;\n    }\n\n    forEachEls(\n      newEls,\n      function(newEl, i) {\n        var oldEl = oldEls[i];\n        if (this.log) {\n          this.log(\"newEl\", newEl, \"oldEl\", oldEl);\n        }\n\n        var callback = switches[selector]\n          ? switches[selector].bind(\n              this,\n              oldEl,\n              newEl,\n              options,\n              switchesOptions[selector]\n            )\n          : defaultSwitches.outerHTML.bind(this, oldEl, newEl, options);\n\n        switchesQueue.push(callback);\n      },\n      this\n    );\n  }, this);\n\n  this.state.numPendingSwitches = switchesQueue.length;\n\n  switchesQueue.forEach(function(queuedSwitch) {\n    queuedSwitch();\n  });\n};\n","var on = require(\"./events/on\");\n\nmodule.exports = {\n  outerHTML: function(oldEl, newEl) {\n    oldEl.outerHTML = newEl.outerHTML;\n    this.onSwitch();\n  },\n\n  innerHTML: function(oldEl, newEl) {\n    oldEl.innerHTML = newEl.innerHTML;\n\n    if (newEl.className === \"\") {\n      oldEl.removeAttribute(\"class\");\n    } else {\n      oldEl.className = newEl.className;\n    }\n\n    this.onSwitch();\n  },\n\n  switchElementsAlt: function(oldEl, newEl) {\n    oldEl.innerHTML = newEl.innerHTML;\n\n    // Copy attributes from the new element to the old one\n    if (newEl.hasAttributes()) {\n      var attrs = newEl.attributes;\n      for (var i = 0; i < attrs.length; i++) {\n        oldEl.attributes.setNamedItem(attrs[i].cloneNode());\n      }\n    }\n\n    this.onSwitch();\n  },\n\n  // Equivalent to outerHTML(), but doesn't require switchElementsAlt() for <head> and <body>\n  replaceNode: function(oldEl, newEl) {\n    oldEl.parentNode.replaceChild(newEl, oldEl);\n    this.onSwitch();\n  },\n\n  sideBySide: function(oldEl, newEl, options, switchOptions) {\n    var forEach = Array.prototype.forEach;\n    var elsToRemove = [];\n    var elsToAdd = [];\n    var fragToAppend = document.createDocumentFragment();\n    var animationEventNames =\n      \"animationend webkitAnimationEnd MSAnimationEnd oanimationend\";\n    var animatedElsNumber = 0;\n    var sexyAnimationEnd = function(e) {\n      if (e.target !== e.currentTarget) {\n        // end triggered by an animation on a child\n        return;\n      }\n\n      animatedElsNumber--;\n      if (animatedElsNumber <= 0 && elsToRemove) {\n        elsToRemove.forEach(function(el) {\n          // browsing quickly can make the el\n          // already removed by last page update ?\n          if (el.parentNode) {\n            el.parentNode.removeChild(el);\n          }\n        });\n\n        elsToAdd.forEach(function(el) {\n          el.className = el.className.replace(\n            el.getAttribute(\"data-pjax-classes\"),\n            \"\"\n          );\n          el.removeAttribute(\"data-pjax-classes\");\n        });\n\n        elsToAdd = null; // free memory\n        elsToRemove = null; // free memory\n\n        // this is to trigger some repaint (example: picturefill)\n        this.onSwitch();\n      }\n    }.bind(this);\n\n    switchOptions = switchOptions || {};\n\n    forEach.call(oldEl.childNodes, function(el) {\n      elsToRemove.push(el);\n      if (el.classList && !el.classList.contains(\"js-Pjax-remove\")) {\n        // for fast switch, clean element that just have been added, & not cleaned yet.\n        if (el.hasAttribute(\"data-pjax-classes\")) {\n          el.className = el.className.replace(\n            el.getAttribute(\"data-pjax-classes\"),\n            \"\"\n          );\n          el.removeAttribute(\"data-pjax-classes\");\n        }\n        el.classList.add(\"js-Pjax-remove\");\n        if (switchOptions.callbacks && switchOptions.callbacks.removeElement) {\n          switchOptions.callbacks.removeElement(el);\n        }\n        if (switchOptions.classNames) {\n          el.className +=\n            \" \" +\n            switchOptions.classNames.remove +\n            \" \" +\n            (options.backward\n              ? switchOptions.classNames.backward\n              : switchOptions.classNames.forward);\n        }\n        animatedElsNumber++;\n        on(el, animationEventNames, sexyAnimationEnd, true);\n      }\n    });\n\n    forEach.call(newEl.childNodes, function(el) {\n      if (el.classList) {\n        var addClasses = \"\";\n        if (switchOptions.classNames) {\n          addClasses =\n            \" js-Pjax-add \" +\n            switchOptions.classNames.add +\n            \" \" +\n            (options.backward\n              ? switchOptions.classNames.forward\n              : switchOptions.classNames.backward);\n        }\n        if (switchOptions.callbacks && switchOptions.callbacks.addElement) {\n          switchOptions.callbacks.addElement(el);\n        }\n        el.className += addClasses;\n        el.setAttribute(\"data-pjax-classes\", addClasses);\n        elsToAdd.push(el);\n        fragToAppend.appendChild(el);\n        animatedElsNumber++;\n        on(el, animationEventNames, sexyAnimationEnd, true);\n      }\n    });\n\n    // pass all className of the parent\n    oldEl.className = newEl.className;\n    oldEl.appendChild(fragToAppend);\n  }\n};\n","module.exports = (function() {\n  var counter = 0;\n  return function() {\n    var id = \"pjax\" + new Date().getTime() + \"_\" + counter;\n    counter++;\n    return id;\n  };\n})();\n","module.exports = function(obj) {\n  /* istanbul ignore if */\n  if (null === obj || \"object\" !== typeof obj) {\n    return obj;\n  }\n  var copy = obj.constructor();\n  for (var attr in obj) {\n    if (obj.hasOwnProperty(attr)) {\n      copy[attr] = obj[attr];\n    }\n  }\n  return copy;\n};\n","module.exports = function contains(doc, selectors, el) {\n  for (var i = 0; i < selectors.length; i++) {\n    var selectedEls = doc.querySelectorAll(selectors[i]);\n    for (var j = 0; j < selectedEls.length; j++) {\n      if (selectedEls[j].contains(el)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n","module.exports = function(target) {\n  if (target == null) {\n    return null;\n  }\n\n  var to = Object(target);\n\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    if (source != null) {\n      for (var key in source) {\n        // Avoid bugs when hasOwnProperty is shadowed\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          to[key] = source[key];\n        }\n      }\n    }\n  }\n  return to;\n};\n","module.exports = function() {};\n","module.exports = function(uri, key, value) {\n  var re = new RegExp(\"([?&])\" + key + \"=.*?(&|$)\", \"i\");\n  var separator = uri.indexOf(\"?\") !== -1 ? \"&\" : \"?\";\n  if (uri.match(re)) {\n    return uri.replace(re, \"$1\" + key + \"=\" + value + \"$2\");\n  } else {\n    return uri + separator + key + \"=\" + value;\n  }\n};\n"],"sourceRoot":""}