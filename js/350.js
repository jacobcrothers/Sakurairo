(self.webpackChunksakurairo_scripts=self.webpackChunksakurairo_scripts||[]).push([[350],{350:function(e,t,a){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.aplayerInit=void 0;const n=s(a(373)),r=a(487);let l=[];function o(e,t){const a={container:e,audio:t,mini:null,fixed:null,autoplay:!1,mutex:!0,lrcType:3,listFolded:1,preload:"auto",theme:"#2980b9",loop:"all",order:"list",volume:null,listMaxHeight:null,customAudioType:null,storageName:"metingjs"};if(t.length){t[0].lrc||(a.lrcType=0);let s={};for(const t in a){let n=t.toLowerCase();(e.dataset.hasOwnProperty(n)||e.dataset.hasOwnProperty(t)||null!==a[t])&&(s[t]=e.dataset[n]||e.dataset[t]||a[t],"true"!==s[t]&&"false"!==s[t]||(s[t]="true"==s[t]))}l.push(new n.default(s))}for(let t=0;t<l.length;t++)try{l[t].lrc.hide()}catch(e){console.log(e)}let s=1;document.querySelector(".aplayer.aplayer-fixed").addEventListener("click",(()=>{if(1==s)for(let e=0;e<l.length;e++)try{l[e].lrc.show()}catch(e){console.log(e)}s=2}));let r=0,o=document.querySelector(".aplayer.aplayer-fixed .aplayer-body"),c=document.querySelector(".aplayer-miniswitcher");o&&o.classList.add("ap-hover"),c&&c.addEventListener("click",(()=>{0==r?(o&&o.classList.remove("ap-hover"),document.getElementById("secondary")&&document.getElementById("secondary").classList.add("active"),r=1):(o&&o.classList.add("ap-hover"),document.getElementById("secondary")&&document.getElementById("secondary").classList.remove("active"),r=0)}))}t.aplayerInit=function(){r.loadCSS("https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"),function(){let e;"string"==typeof meting_api?e=new URL(meting_api):(e=new URL(mashiro_option.meting_api_url),e.searchParams.set("_wpnonce",Poi.nonce));for(let e=0;e<l.length;e++)try{l[e].destroy()}catch(e){console.log(e)}l=[];let t=document.getElementsByClassName("aplayer");for(let a=0;a<t.length;a++){let s=t[a];if(s.dataset.id){const t=s.dataset.api?new URL(s.dataset.api):e,a=t.searchParams;if(a.set("server",s.dataset.server),a.set("type",s.dataset.type),a.set("id",s.dataset.id),fetch)fetch(t.toString()).then((async e=>{e.ok?o(s,await e.json()):console.warn(`(APlayer) HTTP ${e.status}:${e.statusText}`)})).catch(console.error);else{const e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState&&(200<=e.status&&300>e.status||304===e.status)){const t=JSON.parse(e.responseText);o(s,t)}},e.open("get",t.toString(),!0),e.send()}}else if(s.dataset.url){const e=[{name:s.dataset.name||s.dataset.title||"Audio name",artist:s.dataset.artist||s.dataset.author||"Audio artist",url:s.dataset.url,cover:s.dataset.cover||s.dataset.pic,lrc:s.dataset.lrc,type:s.dataset.type||"auto"}];o(s,e)}}}()}}}]);
//# sourceMappingURL=350.js.map